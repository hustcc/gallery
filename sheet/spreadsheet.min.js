/*! For license information please see spreadsheet.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Spreadsheet=e():t.Spreadsheet=e()}(self,(function(){return(()=>{var t={5411:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},8910:(t,e,n)=>{var i=n(5411),r=n(5029),o=Object.hasOwnProperty,a={};for(var s in i)o.call(i,s)&&(a[i[s]]=s);var u=t.exports={to:{},get:{}};function h(t,e,n){return Math.min(Math.max(e,t),n)}function c(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}u.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=u.get.hsl(t),n="hsl";break;case"hwb":e=u.get.hwb(t),n="hwb";break;default:e=u.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},u.get.rgb=function(t){if(!t)return null;var e,n,r,a=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var s=2*n;a[n]=parseInt(e.slice(s,s+2),16)}r&&(a[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)a[n]=parseInt(e[n]+e[n],16);r&&(a[3]=parseInt(r+r,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)a[n]=parseInt(e[n+1],0);e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:o.call(i,e[1])?((a=i[e[1]])[3]=1,a):null:null;for(n=0;n<3;n++)a[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}for(n=0;n<3;n++)a[n]=h(a[n],0,255);return a[3]=h(a[3],0,1),a},u.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,h(parseFloat(e[2]),0,100),h(parseFloat(e[3]),0,100),h(isNaN(n)?1:n,0,1)]}return null},u.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,h(parseFloat(e[2]),0,100),h(parseFloat(e[3]),0,100),h(isNaN(n)?1:n,0,1)]}return null},u.to.hex=function(){var t=r(arguments);return"#"+c(t[0])+c(t[1])+c(t[2])+(t[3]<1?c(Math.round(255*t[3])):"")},u.to.rgb=function(){var t=r(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},u.to.rgb.percent=function(){var t=r(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+i+"%)":"rgba("+e+"%, "+n+"%, "+i+"%, "+t[3]+")"},u.to.hsl=function(){var t=r(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},u.to.hwb=function(){var t=r(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},u.to.keyword=function(t){return a[t.slice(0,3)]}},666:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,i,o,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new r(i,o||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},s.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,a=new Array(o);r<o;r++)a[r]=i[r].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},s.prototype.emit=function(t,e,i,r,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var u,h,c=this._events[s],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,o),!0;case 6:return c.fn.call(c.context,e,i,r,o,a),!0}for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];c.fn.apply(c.context,u)}else{var p,d=c.length;for(h=0;h<d;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),l){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,i);break;case 4:c[h].fn.call(c[h].context,e,i,r);break;default:if(!u)for(p=1,u=new Array(l-1);p<l;p++)u[p-1]=arguments[p];c[h].fn.apply(c[h].context,u)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||a(this,o);else{for(var u=0,h=[],c=s.length;u<c;u++)(s[u].fn!==e||r&&!s[u].once||i&&s[u].context!==i)&&h.push(s[u]);h.length?this._events[o]=1===h.length?h[0]:h:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s},626:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var i=n(6078),r=n(295);function o(t,e,n,r,o){var a={},s="number"==typeof o,u=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var h=a[u];if(Array.isArray(h))for(var c=0,l=h;c<l.length;c++){var p=l[c];if(p.key===r.key)throw new Error(i.DUPLICATED_METADATA+" "+p.key.toString())}else h=[];h.push(r),a[u]=h,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function s(t,e){return function(n,i){e(n,i,t)}}e.tagParameter=function(t,e,n,i){o(r.TAGGED,t,e,i,n)},e.tagProperty=function(t,e,n){o(r.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([s(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},6213:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var i=n(6078),r=n(295),o=n(5092),a=n(626),s=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=s,e.inject=function(t){return function(e,n,s){if(void 0===t)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(e.name));var u=new o.Metadata(r.INJECT_TAG,t);"number"==typeof s?a.tagParameter(e,n,s,u):a.tagProperty(e,n,u)}}},1773:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var i=n(6078),r=n(295);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,t))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(r.PARAM_TYPES,e,t),t}}},1528:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var i=n(295),r=n(5092),o=n(626);e.multiInject=function(t){return function(e,n,a){var s=new r.Metadata(i.MULTI_INJECT_TAG,t);"number"==typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}},9817:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var i=n(295),r=n(5092),o=n(626);e.named=function(t){return function(e,n,a){var s=new r.Metadata(i.NAMED_TAG,t);"number"==typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}},1316:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var i=n(295),r=n(5092),o=n(626);e.optional=function(){return function(t,e,n){var a=new r.Metadata(i.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(t,e,n,a):o.tagProperty(t,e,a)}}},1971:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var i=n(6078),r=n(295),o=n(5092);e.postConstruct=function(){return function(t,e,n){var a=new o.Metadata(r.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,t.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,a,t.constructor)}}},9189:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var i=n(5092),r=n(626);e.tagged=function(t,e){return function(n,o,a){var s=new i.Metadata(t,e);"number"==typeof a?r.tagParameter(n,o,a,s):r.tagProperty(n,o,s)}}},8245:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var i=n(295),r=n(5092),o=n(626);e.targetName=function(t){return function(e,n,a){var s=new r.Metadata(i.NAME_TAG,t);o.tagParameter(e,n,a,s)}}},9235:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var i=n(295),r=n(5092),o=n(626);e.unmanaged=function(){return function(t,e,n){var a=new r.Metadata(i.UNMANAGED_TAG,!0);o.tagParameter(t,e,n,a)}}},683:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var i=n(7690),r=n(23),o=function(){function t(t,e){this.id=r.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===i.BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=o},3497:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0,e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},6078:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},7690:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0,e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},295:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG]},596:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n(683),s=n(6078),u=n(7690),h=n(295),c=n(3870),l=n(4142),p=n(9386),d=n(3313),f=n(23),g=n(9552),y=n(1878),v=n(2543),m=function(){function t(t){this._appliedMiddleware=[];var e=t||{};if("object"!=typeof e)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=u.BindingScopeEnum.Transient;else if(e.defaultScope!==u.BindingScopeEnum.Singleton&&e.defaultScope!==u.BindingScopeEnum.Transient&&e.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=f.id(),this._bindingDictionary=new v.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return t.merge=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var a=new t,s=o([e,n],i).map((function(t){return l.getBindingDictionary(t)})),u=l.getBindingDictionary(a);function h(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return s.forEach((function(t){h(t,u)})),a},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=t;i<r.length;i++){var o=r[i],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(this,void 0,void 0,(function(){var e,n,i,o,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,i=t,r.label=1;case 1:return n<i.length?(o=i[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=i(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||u.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new d.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(s.CANNOT_UNBIND+" "+g.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new v.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,h.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var i=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),o=l.createMockRequest(this,t,e,n);i=r.some((function(t){return t.constraint(o)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,e,n)),i},t.prototype.snapshot=function(){this._snapshots.push(y.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,u.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,h.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,u.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,h.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach((function(t){e.applyMiddleware(t)})),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(i){var r=t.rebind.bind(t)(i);return e(r,n),r}};return function(i){return{bindFunction:(r=i,function(n){var i=t.bind.bind(t)(n);return e(i,r),i}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(i),unbindFunction:function(e){t.unbind.bind(t)(e)}};var r}},t.prototype._get=function(t,e,n,i,r,o){var a=null,u={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:r,serviceIdentifier:i,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(u)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(u);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=l.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),p.resolve(n)}},t}();e.Container=m},2913:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var i=n(23);e.ContainerModule=function(t){this.id=i.id(),this.registry=t};e.AsyncContainerModule=function(t){this.id=i.id(),this.registry=t}},1878:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var n=function(){function t(){}return t.of=function(e,n){var i=new t;return i.bindings=e,i.middleware=n,i},t}();e.ContainerSnapshot=n},2543:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var i=n(6078),r=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(i.NULL_ARGUMENT);if(null==e)throw new Error(i.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(i.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(i.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,i){var r=n.filter((function(e){return!t(e)}));r.length>0?e._map.set(i,r):e._map.delete(i)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=r},9311:(t,e,n)=>{"use strict";e.GW=e.zY=e.f3=e.t6=e.b2=e.W2=void 0,n(295);var i=n(596);Object.defineProperty(e,"W2",{enumerable:!0,get:function(){return i.Container}});n(7690),n(2913);var r=n(1773);Object.defineProperty(e,"b2",{enumerable:!0,get:function(){return r.injectable}});n(9189);var o=n(9817);Object.defineProperty(e,"t6",{enumerable:!0,get:function(){return o.named}});var a=n(6213);Object.defineProperty(e,"f3",{enumerable:!0,get:function(){return a.inject}});n(1316),n(9235),n(1528),n(8245);var s=n(1971);Object.defineProperty(e,"zY",{enumerable:!0,get:function(){return s.postConstruct}});n(3870),n(23);var u=n(626);Object.defineProperty(e,"GW",{enumerable:!0,get:function(){return u.decorate}});n(3140),n(9552),n(4384)},1519:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var i=n(23),r=function(){function t(t){this.id=i.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=r},5092:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=n(295),r=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=r},3870:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var i=n(295),r=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(i.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(i.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(i.TAGGED_PROP,t)||[]},t}();e.MetadataReader=r},6335:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;e.Plan=function(t,e){this.parentContext=t,this.rootRequest=e}},4142:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var i=n(3497),r=n(6078),o=n(7690),a=n(295),s=n(2542),u=n(9552),h=n(1519),c=n(5092),l=n(6335),p=n(6664),d=n(4810),f=n(9660);function g(t){return t._bindingDictionary}function y(t,e,n,o,a){var s,h=m(n.container,a.serviceIdentifier);return h.length===i.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),h=m(n.container,a.serviceIdentifier)),s=e?h:h.filter((function(t){var e=new d.Request(t.serviceIdentifier,n,o,t,a);return t.constraint(e)})),function(t,e,n,o){switch(e.length){case i.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=u.getServiceIdentifierAsString(t),s=r.NOT_REGISTERED;throw s+=u.listMetadataForTarget(a,n),s+=u.listRegisteredBindingsForServiceIdentifier(o,a,m),new Error(s);case i.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case i.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;throw a=u.getServiceIdentifierAsString(t),s=r.AMBIGUOUS_MATCH+" "+a,s+=u.listRegisteredBindingsForServiceIdentifier(o,a,m),new Error(s)}}(a.serviceIdentifier,s,a,n.container),s}function v(t,e,n,i,a,s){var u,h;if(null===a){u=y(t,e,i,null,s),h=new d.Request(n,i,null,u,s);var c=new l.Plan(i,h);i.addPlan(c)}else u=y(t,e,i,a,s),h=a.addChildRequest(s.serviceIdentifier,u,s);u.forEach((function(e){var n=null;if(s.isArray())n=h.addChildRequest(e.serviceIdentifier,e,s);else{if(e.cache)return;n=h}if(e.type===o.BindingTypeEnum.Instance&&null!==e.implementationType){var a=p.getDependencies(t,e.implementationType);if(!i.container.options.skipBaseClassChecks){var u=p.getBaseClassDependencyCount(t,e.implementationType);if(a.length<u){var c=r.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(e.implementationType));throw new Error(c)}}a.forEach((function(e){v(t,!1,e.serviceIdentifier,i,n,e)}))}}))}function m(t,e){var n=[],i=g(t);return i.hasKey(e)?n=i.get(e):null!==t.parent&&(n=m(t.parent,e)),n}e.getBindingDictionary=g,e.plan=function(t,e,n,i,r,o,l,p){void 0===p&&(p=!1);var d=new h.Context(e),g=function(t,e,n,i,r,o){var s=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,u=new c.Metadata(s,n),h=new f.Target(e,"",n,u);if(void 0!==r){var l=new c.Metadata(r,o);h.metadata.push(l)}return h}(n,i,r,0,o,l);try{return v(t,p,r,d,null,g),d}catch(t){throw s.isStackOverflowExeption(t)&&d.plan&&u.circularDependencyToException(d.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,i){var r=new f.Target(o.TargetTypeEnum.Variable,"",e,new c.Metadata(n,i)),a=new h.Context(t);return new d.Request(e,a,null,[],r)}},8634:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var n=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=n},6664:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var r=n(6213),o=n(6078),a=n(7690),s=n(295),u=n(9552);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var h=n(9660);function c(t,e,n,r){var a=t.getConstructorMetadata(n),s=a.compilerGeneratedMetadata;if(void 0===s){var u=o.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(u)}var h=a.userGeneratedMetadata,c=Object.keys(h),d=0===n.length&&c.length>0,f=c.length>n.length,g=function(t,e,n,i,r){for(var o=[],a=0;a<r;a++){var s=l(a,t,e,n,i);null!==s&&o.push(s)}return o}(r,e,s,h,d||f?c.length:n.length),y=p(t,n);return i(i([],g),y)}function l(t,e,n,i,s){var u=s[t.toString()]||[],c=d(u),l=!0!==c.unmanaged,p=i[t];if((p=c.inject||c.multiInject||p)instanceof r.LazyServiceIdentifer&&(p=p.unwrap()),l){if(!e&&(p===Object||p===Function||void 0===p)){var f=o.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(f)}var g=new h.Target(a.TargetTypeEnum.ConstructorArgument,c.targetName,p);return g.metadata=u,g}return null}function p(t,e){for(var n=t.getPropertiesMetadata(e),r=[],o=0,s=Object.keys(n);o<s.length;o++){var u=s[o],c=n[u],l=d(n[u]),f=l.targetName||u,g=l.inject||l.multiInject,y=new h.Target(a.TargetTypeEnum.ClassProperty,f,g);y.metadata=c,r.push(y)}var v=Object.getPrototypeOf(e.prototype).constructor;if(v!==Object){var m=p(t,v);r=i(i([],r),m)}return r}function d(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[s.INJECT_TAG],multiInject:e[s.MULTI_INJECT_TAG],targetName:e[s.NAME_TAG],unmanaged:e[s.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return c(t,u.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var i=Object.getPrototypeOf(n.prototype).constructor;if(i!==Object){var r=c(e,u.getFunctionName(i),i,!0),o=r.map((function(t){return t.metadata.filter((function(t){return t.key===s.UNMANAGED_TAG}))})),a=[].concat.apply([],o).length,h=r.length-a;return h>0?h:t(e,i)}return 0}},4810:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var i=n(23),r=function(){function t(t,e,n,r,o){this.id=i.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,i){var r=new t(e,this.parentContext,this,n,i);return this.childRequests.push(r),r},t}();e.Request=r},9660:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var i=n(295),r=n(23),o=n(5092),a=n(8634),s=function(){function t(t,e,n,s){this.id=r.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var u=null;"string"==typeof s?u=new o.Metadata(i.NAMED_TAG,s):s instanceof o.Metadata&&(u=s),null!==u&&this.metadata.push(u)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++)if(n[e].key===t)return!0;return!1},t.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(i.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return i.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===i.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return i.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(i.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var i=0,r=e.metadata;i<r.length;i++){var o=r[i];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=s},4962:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var r=n(6078),o=n(7690),a=n(295);e.resolveInstance=function(t,e,n){var s,u,h=null;e.length>0?(u=e.filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ConstructorArgument})).map(n),h=function(t,e,n){var i=e.filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ClassProperty})),r=i.map(n);return i.forEach((function(e,n){var i;i=e.target.name.value();var o=r[n];t[i]=o})),t}(h=new((s=t).bind.apply(s,i([void 0],u))),e,n)):h=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(r.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,h),h}},9386:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var i=n(6078),r=n(7690),o=n(2542),a=n(9552),s=n(4962),u=function(t,e,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},h=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,o=e.childRequests,c=e.target&&e.target.isArray(),l=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(c&&l)return o.map((function(e){return h(t)(e)}));var p=null;if(!e.target.isOptional()||0!==n.length){var d=n[0],f=d.scope===r.BindingScopeEnum.Singleton,g=d.scope===r.BindingScopeEnum.Request;if(f&&d.activated)return d.cache;if(g&&null!==t&&t.has(d.id))return t.get(d.id);if(d.type===r.BindingTypeEnum.ConstantValue)p=d.cache,d.activated=!0;else if(d.type===r.BindingTypeEnum.Function)p=d.cache,d.activated=!0;else if(d.type===r.BindingTypeEnum.Constructor)p=d.implementationType;else if(d.type===r.BindingTypeEnum.DynamicValue&&null!==d.dynamicValue)p=u("toDynamicValue",d.serviceIdentifier,(function(){return d.dynamicValue(e.parentContext)}));else if(d.type===r.BindingTypeEnum.Factory&&null!==d.factory)p=u("toFactory",d.serviceIdentifier,(function(){return d.factory(e.parentContext)}));else if(d.type===r.BindingTypeEnum.Provider&&null!==d.provider)p=u("toProvider",d.serviceIdentifier,(function(){return d.provider(e.parentContext)}));else{if(d.type!==r.BindingTypeEnum.Instance||null===d.implementationType){var y=a.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+y)}p=s.resolveInstance(d.implementationType,o,h(t))}return"function"==typeof d.onActivation&&(p=d.onActivation(e.parentContext,p)),f&&(d.cache=p,d.activated=!0),g&&null!==t&&!t.has(d.id)&&t.set(d.id,p),p}}};e.resolve=function(t){return h(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},1640:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var i=n(7690),r=n(6890),o=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=o},2386:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var i=n(1640),r=n(8926),o=n(2700),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},8926:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var i=n(2700),r=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new i.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=r},3313:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var i=n(6078),r=n(7690),o=n(2386),a=n(6890),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+i.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(i.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=r.BindingTypeEnum.Function,this._binding.scope=r.BindingScopeEnum.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=s},6890:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var i=n(8926),r=n(2700),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=o},2700:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var i=n(8926),r=n(3140),o=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=r.namedConstraint(t),new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=r.taggedConstraint(t)(e),new i.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return r.typeConstraint(t)(e.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return r.namedConstraint(t)(e.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return r.taggedConstraint(t)(e)(n.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,t)},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,t)},new i.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=o},3140:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var i=n(295),r=n(5092),o=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||o(n,e))};e.traverseAncerstors=o;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new r.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(i.NAMED_TAG);e.namedConstraint=s,e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var i=e.bindings[0].implementationType;return t===i}return!1}}},4384:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0,e.multiBindToService=function(t){return function(e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},2542:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var i=n(6078);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===i.STACK_OVERFLOW}},23:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var n=0;e.id=function(){return n++}},9552:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var i=n(6078);function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function o(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||o(t.parentRequest,e))}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var i="",r=n(t,e);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),i=i+"\n "+e,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)}))),i},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(o(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var i=r(e.serviceIdentifier);return n.push(i),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}(e);throw new Error(i.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",i=e.getNamedTag(),r=e.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=a},2948:t=>{t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},9535:function(t){t.exports=function(){"use strict";function t(t,i,r,o,a){!function t(n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,u=i-r+1,h=Math.log(s),c=.5*Math.exp(2*h/3),l=.5*Math.sqrt(h*c*(s-c)/s)*(u-s/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-u*c/s+l)),Math.min(o,Math.floor(i+(s-u)*c/s+l)),a)}var p=n[i],d=r,f=o;for(e(n,r,i),a(n[o],p)>0&&e(n,r,o);d<f;){for(e(n,d,f),d++,f--;a(n[d],p)<0;)d++;for(;a(n[f],p)>0;)f--}0===a(n[r],p)?e(n,r,f):e(n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}(t,i,r||0,o||t.length-1,a||n)}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,r){r||(r=f(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(r,t.leaf?i(a):a)}return r}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,i,r,o){for(var a=[n,i];a.length;)if(!((i=a.pop())-(n=a.pop())<=r)){var s=n+Math.ceil((i-n)/r/2)*r;t(e,s,n,i,o),a.push(n,s,s,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!d(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?i(a):a;d(t,s)&&(e.leaf?n.push(a):p(t,s)?this._all(a,n):r.push(a))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!d(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(d(t,o)){if(e.leaf||p(t,o))return!0;n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=f([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,i,o,a=this.data,s=this.toBBox(t),u=[],h=[];a||u.length;){if(a||(a=u.pop(),i=u[u.length-1],n=h.pop(),o=!0),a.leaf){var c=r(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}o||a.leaf||!p(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(u.push(a),h.push(n),n=0,i=a,a=a.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,i){var r,a=n-e+1,s=this._maxEntries;if(a<=s)return o(r=f(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),(r=f([])).leaf=!1,r.height=i;var u=Math.ceil(a/s),h=u*Math.ceil(Math.sqrt(s));g(t,e,n,h,this.compareMinX);for(var c=e;c<=n;c+=h){var l=Math.min(c+h-1,n);g(t,c,l,u,this.compareMinY);for(var p=c;p<=l;p+=u){var d=Math.min(p+u-1,l);r.children.push(this._build(t,p,d,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],h=c(u),l=(p=t,d=u,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-h);l<o?(o=l,r=h<r?h:r,a=u):l===o&&h<r&&(r=h,a=u)}e=a||e.children[0]}var p,d;return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),s(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var a=this._chooseSplitIndex(n,r,i),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,o,s,u,h,l,p=1/0,d=1/0,f=e;f<=n-e;f++){var g=a(t,0,f,this.toBBox),y=a(t,f,n,this.toBBox),v=(r=g,o=y,void 0,void 0,void 0,void 0,s=Math.max(r.minX,o.minX),u=Math.max(r.minY,o.minY),h=Math.min(r.maxX,o.maxX),l=Math.min(r.maxY,o.maxY),Math.max(0,h-s)*Math.max(0,l-u)),m=c(g)+c(y);v<p?(p=v,i=f,d=m<d?m:d):v===p&&m<d&&(d=m,i=f)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=a(t,0,e,r),u=a(t,n-e,n,r),h=l(o)+l(u),c=e;c<n-e;c++){var p=t.children[c];s(o,t.leaf?r(p):p),h+=l(o)}for(var d=n-e-1;d>=e;d--){var f=t.children[d];s(u,t.leaf?r(f):f),h+=l(u)}return h},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)s(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()},5029:(t,e,n)=>{"use strict";var i=n(2948),r=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(t){for(var e=[],n=0,a=t.length;n<a;n++){var s=t[n];i(s)?e=r.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},778:(t,e,n)=>{var i=n(1822).parse;i.parseSVG=i,i.makeAbsolute=function(t){var e,n={x:0,y:0},i={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return t.forEach((function(t){for(var r in"moveto"===t.command&&(e=t),t.x0=n.x,t.y0=n.y,i)r in t&&(t[r]+=t.relative?t[i[r]]:0);"x"in t||(t.x=n.x),"y"in t||(t.y=n.y),t.relative=!1,t.code=t.code.toUpperCase(),"closepath"==t.command&&(t.x=e.x,t.y=e.y),n=t})),t},t.exports=i},1822:t=>{"use strict";function e(t,n,i,r){this.message=t,this.expected=n,this.found=i,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(e,Error),e.buildMessage=function(t,e){var n={literal:function(t){return'"'+r(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function i(t){return t.charCodeAt(0).toString(16).toUpperCase()}function r(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}return"Expected "+function(t){var e,i,r,o=new Array(t.length);for(e=0;e<t.length;e++)o[e]=(r=t[e],n[r.type](r));if(o.sort(),o.length>0){for(e=1,i=1;e<o.length;e++)o[e-1]!==o[e]&&(o[i]=o[e],i++);o.length=i}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(t)+" but "+function(t){return t?'"'+r(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:e,parse:function(t,n){n=void 0!==n?n:{};var i,r={},o={svg_path:Z},a=Z,s=function(t,e){return function(t,e){if(!e)return[t];for(var n=[t],i=0,r=e.length;i<r;i++)n[i+1]=e[i][1];return n}(t,e)},u=/^[Mm]/,h=X(["M","m"],!1,!1),c=/^[Zz]/,l=X(["Z","z"],!1,!1),p=/^[Ll]/,d=X(["L","l"],!1,!1),f=function(t,e){return wt(t,e)},g=/^[Hh]/,y=X(["H","h"],!1,!1),v=/^[Vv]/,m=X(["V","v"],!1,!1),b=/^[Cc]/,x=X(["C","c"],!1,!1),S=/^[Ss]/,w=X(["S","s"],!1,!1),E=/^[Qq]/,T=X(["Q","q"],!1,!1),P=/^[Tt]/,C=X(["T","t"],!1,!1),M=/^[Aa]/,k=X(["A","a"],!1,!1),A=/^[01]/,O=X(["0","1"],!1,!1),_=Y(",",!1),N=function(t){return t.join("")},L=Y(".",!1),I=/^[eE]/,R=X(["e","E"],!1,!1),D=/^[+\-]/,B=X(["+","-"],!1,!1),j=/^[0-9]/,F=X([["0","9"]],!1,!1),G=/^[ \t\n\r]/,V=X([" ","\t","\n","\r"],!1,!1),W=0,H=[{line:1,column:1}],z=0,U=[];if("startRule"in n){if(!(n.startRule in o))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=o[n.startRule]}function Y(t,e){return{type:"literal",text:t,ignoreCase:e}}function X(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function q(e){var n,i=H[e];if(i)return i;for(n=e-1;!H[n];)n--;for(i={line:(i=H[n]).line,column:i.column};n<e;)10===t.charCodeAt(n)?(i.line++,i.column=1):i.column++,n++;return H[e]=i,i}function $(t,e){var n=q(t),i=q(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function K(t){W<z||(W>z&&(z=W,U=[]),U.push(t))}function Z(){var t,e,n,i,o;for(t=W,e=[],n=yt();n!==r;)e.push(n),n=yt();if(e!==r)if(n=function(){var t,e,n,i,o,a;if(t=W,(e=J())!==r){for(n=[],i=W,o=[],a=yt();a!==r;)o.push(a),a=yt();for(o!==r&&(a=J())!==r?i=o=[o,a]:(W=i,i=r);i!==r;){for(n.push(i),i=W,o=[],a=yt();a!==r;)o.push(a),a=yt();o!==r&&(a=J())!==r?i=o=[o,a]:(W=i,i=r)}n!==r?t=e=s(e,n):(W=t,t=r)}else W=t,t=r;return t}(),n===r&&(n=null),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r?(e=function(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e=e.concat.apply(e,t[n]);var i=e[0];return i&&"m"==i.code&&(delete i.relative,i.code="M"),e}(n),t=e):(W=t,t=r)}else W=t,t=r;else W=t,t=r;return t}function J(){var e,n,i,o,a,c;if(e=W,n=function(){var e,n,i,o,a,s,c,l,p,d;if(e=W,u.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(h)),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r&&(o=at())!==r?(a=W,(s=ct())===r&&(s=null),s!==r&&(c=tt())!==r?a=s=[s,c]:(W=a,a=r),a===r&&(a=null),a!==r?(p=a,d=wt(l=n,[o]),p&&(d=d.concat(wt("M"==l?"L":"l",p[1]))),e=n=d):(W=e,e=r)):(W=e,e=r)}else W=e,e=r;return e}(),n!==r){for(i=[],o=W,a=[],c=yt();c!==r;)a.push(c),c=yt();for(a!==r&&(c=Q())!==r?o=a=[a,c]:(W=o,o=r);o!==r;){for(i.push(o),o=W,a=[],c=yt();c!==r;)a.push(c),c=yt();a!==r&&(c=Q())!==r?o=a=[a,c]:(W=o,o=r)}i!==r?e=n=s(n,i):(W=e,e=r)}else W=e,e=r;return e}function Q(){var e,n;return c.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(l)),n!==r&&(n=wt("Z")),(e=n)===r&&(e=function(){var e,n,i,o;if(e=W,p.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(d)),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r&&(o=tt())!==r?e=n=f(n,o):(W=e,e=r)}else W=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;if(e=W,g.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(y)),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r&&(o=et())!==r?e=n=wt(n,o.map((function(t){return{x:t}}))):(W=e,e=r)}else W=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;if(e=W,v.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(m)),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r&&(o=et())!==r?e=n=wt(n,o.map((function(t){return{y:t}}))):(W=e,e=r)}else W=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;if(e=W,b.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(x)),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r?(o=function(){var t,e,n,i,o,a;if(t=W,(e=nt())!==r){for(n=[],i=W,(o=ct())===r&&(o=null),o!==r&&(a=nt())!==r?i=o=[o,a]:(W=i,i=r);i!==r;)n.push(i),i=W,(o=ct())===r&&(o=null),o!==r&&(a=nt())!==r?i=o=[o,a]:(W=i,i=r);n!==r?t=e=s(e,n):(W=t,t=r)}else W=t,t=r;return t}(),o!==r?e=n=f(n,o):(W=e,e=r)):(W=e,e=r)}else W=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;if(e=W,S.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(w)),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r?(o=function(){var t,e,n,i,o,a;if(t=W,(e=it())!==r){for(n=[],i=W,(o=ct())===r&&(o=null),o!==r&&(a=it())!==r?i=o=[o,a]:(W=i,i=r);i!==r;)n.push(i),i=W,(o=ct())===r&&(o=null),o!==r&&(a=it())!==r?i=o=[o,a]:(W=i,i=r);n!==r?t=e=s(e,n):(W=t,t=r)}else W=t,t=r;return t}(),o!==r?e=n=f(n,o):(W=e,e=r)):(W=e,e=r)}else W=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;if(e=W,E.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(T)),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r?(o=function(){var t,e,n,i,o,a;if(t=W,(e=rt())!==r){for(n=[],i=W,(o=ct())===r&&(o=null),o!==r&&(a=rt())!==r?i=o=[o,a]:(W=i,i=r);i!==r;)n.push(i),i=W,(o=ct())===r&&(o=null),o!==r&&(a=rt())!==r?i=o=[o,a]:(W=i,i=r);n!==r?t=e=s(e,n):(W=t,t=r)}else W=t,t=r;return t}(),o!==r?e=n=f(n,o):(W=e,e=r)):(W=e,e=r)}else W=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;if(e=W,P.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(C)),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r?(o=function(){var t,e,n,i,o,a;if(t=W,(e=at())!==r){for(n=[],i=W,(o=ct())===r&&(o=null),o!==r&&(a=at())!==r?i=o=[o,a]:(W=i,i=r);i!==r;)n.push(i),i=W,(o=ct())===r&&(o=null),o!==r&&(a=at())!==r?i=o=[o,a]:(W=i,i=r);n!==r?t=e=s(e,n):(W=t,t=r)}else W=t,t=r;return t}(),o!==r?e=n=f(n,o):(W=e,e=r)):(W=e,e=r)}else W=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;if(e=W,M.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(k)),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r?(o=function(){var t,e,n,i,o,a;if(t=W,(e=ot())!==r){for(n=[],i=W,(o=ct())===r&&(o=null),o!==r&&(a=ot())!==r?i=o=[o,a]:(W=i,i=r);i!==r;)n.push(i),i=W,(o=ct())===r&&(o=null),o!==r&&(a=ot())!==r?i=o=[o,a]:(W=i,i=r);n!==r?t=e=s(e,n):(W=t,t=r)}else W=t,t=r;return t}(),o!==r?e=n=f(n,o):(W=e,e=r)):(W=e,e=r)}else W=e,e=r;return e}()),e}function tt(){var t,e,n,i,o,a;if(t=W,(e=at())!==r){for(n=[],i=W,(o=ct())===r&&(o=null),o!==r&&(a=at())!==r?i=o=[o,a]:(W=i,i=r);i!==r;)n.push(i),i=W,(o=ct())===r&&(o=null),o!==r&&(a=at())!==r?i=o=[o,a]:(W=i,i=r);n!==r?t=e=s(e,n):(W=t,t=r)}else W=t,t=r;return t}function et(){var t,e,n,i,o,a;if(t=W,(e=ut())!==r){for(n=[],i=W,(o=ct())===r&&(o=null),o!==r&&(a=ut())!==r?i=o=[o,a]:(W=i,i=r);i!==r;)n.push(i),i=W,(o=ct())===r&&(o=null),o!==r&&(a=ut())!==r?i=o=[o,a]:(W=i,i=r);n!==r?t=e=s(e,n):(W=t,t=r)}else W=t,t=r;return t}function nt(){var t,e,n,i,o,a,s,u,h;return t=W,(e=at())!==r?((n=ct())===r&&(n=null),n!==r&&(i=at())!==r?((o=ct())===r&&(o=null),o!==r&&(a=at())!==r?(u=i,h=a,t=e={x1:(s=e).x,y1:s.y,x2:u.x,y2:u.y,x:h.x,y:h.y}):(W=t,t=r)):(W=t,t=r)):(W=t,t=r),t}function it(){var t,e,n,i,o,a;return t=W,(e=at())!==r?((n=ct())===r&&(n=null),n!==r&&(i=at())!==r?(a=i,t=e={x2:(o=e).x,y2:o.y,x:a.x,y:a.y}):(W=t,t=r)):(W=t,t=r),t}function rt(){var t,e,n,i,o,a;return t=W,(e=at())!==r?((n=ct())===r&&(n=null),n!==r&&(i=at())!==r?(a=i,t=e={x1:(o=e).x,y1:o.y,x:a.x,y:a.y}):(W=t,t=r)):(W=t,t=r),t}function ot(){var t,e,n,i,o,a,s,u,h,c,l,p;return t=W,(e=st())!==r?((n=ct())===r&&(n=null),n!==r&&(i=st())!==r?((o=ct())===r&&(o=null),o!==r&&(a=ut())!==r&&ct()!==r&&(s=ht())!==r?((u=ct())===r&&(u=null),u!==r&&(h=ht())!==r?((c=ct())===r&&(c=null),c!==r&&(l=at())!==r?t=e={rx:e,ry:i,xAxisRotation:a,largeArc:s,sweep:h,x:(p=l).x,y:p.y}:(W=t,t=r)):(W=t,t=r)):(W=t,t=r)):(W=t,t=r)):(W=t,t=r),t}function at(){var t,e,n,i;return t=W,(e=ut())!==r?((n=ct())===r&&(n=null),n!==r&&(i=ut())!==r?t=e={x:e,y:i}:(W=t,t=r)):(W=t,t=r),t}function st(){var t;return W,(t=pt())===r&&(t=gt()),t!==r&&(t*=1),t}function ut(){var t,e,n;return W,t=W,(e=ft())===r&&(e=null),e!==r&&(n=pt())!==r?t=e=[e,n]:(W=t,t=r),t===r&&(t=W,(e=ft())===r&&(e=null),e!==r&&(n=gt())!==r?t=e=[e,n]:(W=t,t=r)),t!==r&&(t=1*t.join("")),t}function ht(){var e;return W,A.test(t.charAt(W))?(e=t.charAt(W),W++):(e=r,K(O)),e!==r&&(e="1"==e),e}function ct(){var t,e,n,i,o;if(t=W,e=[],(n=yt())!==r)for(;n!==r;)e.push(n),n=yt();else e=r;if(e!==r)if((n=lt())===r&&(n=null),n!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r?t=e=[e,n,i]:(W=t,t=r)}else W=t,t=r;else W=t,t=r;if(t===r){if(t=W,e=W,(n=lt())!==r){for(i=[],o=yt();o!==r;)i.push(o),o=yt();i!==r?e=n=[n,i]:(W=e,e=r)}else W=e,e=r;e!==r&&(e=""),t=e}return t}function lt(){var e;return 44===t.charCodeAt(W)?(e=",",W++):(e=r,K(_)),e}function pt(){var e,n,i;return W,e=W,n=function(){var e,n,i,o;return W,e=W,(n=gt())===r&&(n=null),n!==r?(46===t.charCodeAt(W)?(i=".",W++):(i=r,K(L)),i!==r&&(o=gt())!==r?e=n=[n,i,o]:(W=e,e=r)):(W=e,e=r),e===r&&(e=W,(n=gt())!==r?(46===t.charCodeAt(W)?(i=".",W++):(i=r,K(L)),i!==r?e=n=[n,i]:(W=e,e=r)):(W=e,e=r)),e!==r&&(e=N(e)),e}(),n!==r?((i=dt())===r&&(i=null),i!==r?e=n=[n,i]:(W=e,e=r)):(W=e,e=r),e===r&&(e=W,(n=gt())!==r&&(i=dt())!==r?e=n=[n,i]:(W=e,e=r)),e!==r&&(e=N(e)),e}function dt(){var e,n,i,o;return W,e=W,I.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(R)),n!==r?((i=ft())===r&&(i=null),i!==r&&(o=gt())!==r?e=n=[n,i,o]:(W=e,e=r)):(W=e,e=r),e!==r&&(e=N(e)),e}function ft(){var e;return D.test(t.charAt(W))?(e=t.charAt(W),W++):(e=r,K(B)),e}function gt(){var e,n;if(W,e=[],j.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(F)),n!==r)for(;n!==r;)e.push(n),j.test(t.charAt(W))?(n=t.charAt(W),W++):(n=r,K(F));else e=r;return e!==r&&(e=e.join("")),e}function yt(){var e;return W,G.test(t.charAt(W))?(e=t.charAt(W),W++):(e=r,K(V)),e!==r&&(e=""),e}var vt,mt,bt,xt={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var St in xt)xt[St.toUpperCase()]=xt[St];function wt(t,e){e||(e=[{}]);for(var n=e.length;n--;){var i={code:t,command:xt[t]};for(var r in t==t.toLowerCase()&&(i.relative=!0),e[n])i[r]=e[n][r];e[n]=i}return e}if((i=a())!==r&&W===t.length)return i;throw i!==r&&W<t.length&&K({type:"end"}),vt=U,mt=z<t.length?t.charAt(z):null,bt=z<t.length?$(z,z+1):$(z,z),new e(e.buildMessage(vt,mt),vt,mt,bt)}}},3488:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onResult:e,onDone:n}){let i="";return i+=`var _results = new Array(${this.options.taps.length});\n`,i+="var _checkDone = function() {\n",i+="for(var i = 0; i < _results.length; i++) {\n",i+="var item = _results[i];\n",i+="if(item === undefined) return false;\n",i+="if(item.result !== undefined) {\n",i+=e("item.result"),i+="return true;\n",i+="}\n",i+="if(item.error) {\n",i+=t("item.error"),i+="return true;\n",i+="}\n",i+="}\n",i+="return false;\n",i+="}\n",i+=this.callTapsParallel({onError:(t,e,n,i)=>{let r="";return r+=`if(${t} < _results.length && ((_results.length = ${t+1}), (_results[${t}] = { error: ${e} }), _checkDone())) {\n`,r+=i(!0),r+="} else {\n",r+=n(),r+="}\n",r},onResult:(t,e,n,i)=>{let r="";return r+=`if(${t} < _results.length && (${e} !== undefined && (_results.length = ${t+1}), (_results[${t}] = { result: ${e} }), _checkDone())) {\n`,r+=i(!0),r+="} else {\n",r+=n(),r+="}\n",r},onTap:(t,e,n,i)=>{let r="";return t>0&&(r+=`if(${t} >= _results.length) {\n`,r+=n(),r+="} else {\n"),r+=e(),t>0&&(r+="}\n"),r},onDone:n}),i}},a=function(t){return o.setup(this,t),o.create(t)};function s(t=[],e){const n=new i(t,e);return n.constructor=s,n.compile=a,n._call=void 0,n.call=void 0,n}s.prototype=null,t.exports=s},3725:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onDone:e}){return this.callTapsParallel({onError:(e,n,i,r)=>t(n)+r(!0),onDone:e})}},a=function(t){return o.setup(this,t),o.create(t)};function s(t=[],e){const n=new i(t,e);return n.constructor=s,n.compile=a,n._call=void 0,n.call=void 0,n}s.prototype=null,t.exports=s},7801:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onResult:e,resultReturns:n,onDone:i}){return this.callTapsSeries({onError:(e,n,i,r)=>t(n)+r(!0),onResult:(t,n,i)=>`if(${n} !== undefined) {\n${e(n)}\n} else {\n${i()}}\n`,resultReturns:n,onDone:i})}},a=function(t){return o.setup(this,t),o.create(t)};function s(t=[],e){const n=new i(t,e);return n.constructor=s,n.compile=a,n._call=void 0,n.call=void 0,n}s.prototype=null,t.exports=s},7269:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onDone:e}){return this.callTapsSeries({onError:(e,n,i,r)=>t(n)+r(!0),onDone:e})}},a=function(t){return o.setup(this,t),o.create(t)};function s(t=[],e){const n=new i(t,e);return n.constructor=s,n.compile=a,n._call=void 0,n.call=void 0,n}s.prototype=null,t.exports=s},5525:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onDone:e}){return this.callTapsLooping({onError:(e,n,i,r)=>t(n)+r(!0),onDone:e})}},a=function(t){return o.setup(this,t),o.create(t)};function s(t=[],e){const n=new i(t,e);return n.constructor=s,n.compile=a,n._call=void 0,n.call=void 0,n}s.prototype=null,t.exports=s},7708:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onResult:e,onDone:n}){return this.callTapsSeries({onError:(e,n,i,r)=>t(n)+r(!0),onResult:(t,e,n)=>{let i="";return i+=`if(${e} !== undefined) {\n`,i+=`${this._args[0]} = ${e};\n`,i+="}\n",i+=n(),i},onDone:()=>e(this._args[0])})}},a=function(t){return o.setup(this,t),o.create(t)};function s(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const n=new i(t,e);return n.constructor=s,n.compile=a,n._call=void 0,n.call=void 0,n}s.prototype=null,t.exports=s},1548:(t,e,n)=>{"use strict";const i=n(9456).deprecate((()=>{}),"Hook.context is deprecated and will be removed"),r=function(...t){return this.call=this._createCall("sync"),this.call(...t)},o=function(...t){return this.callAsync=this._createCall("async"),this.callAsync(...t)},a=function(...t){return this.promise=this._createCall("promise"),this.promise(...t)};class s{constructor(t=[],e){this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=r,this.call=r,this._callAsync=o,this.callAsync=o,this._promise=a,this.promise=a,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(t){throw new Error("Abstract: should be overridden")}_createCall(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}_tap(t,e,n){if("string"==typeof e)e={name:e.trim()};else if("object"!=typeof e||null===e)throw new Error("Invalid tap options");if("string"!=typeof e.name||""===e.name)throw new Error("Missing name for tap");void 0!==e.context&&i(),e=Object.assign({type:t,fn:n},e),e=this._runRegisterInterceptors(e),this._insert(e)}tap(t,e){this._tap("sync",t,e)}tapAsync(t,e){this._tap("async",t,e)}tapPromise(t,e){this._tap("promise",t,e)}_runRegisterInterceptors(t){for(const e of this.interceptors)if(e.register){const n=e.register(t);void 0!==n&&(t=n)}return t}withOptions(t){const e=e=>Object.assign({},t,"string"==typeof e?{name:e}:e);return{name:this.name,tap:(t,n)=>this.tap(e(t),n),tapAsync:(t,n)=>this.tapAsync(e(t),n),tapPromise:(t,n)=>this.tapPromise(e(t),n),intercept:t=>this.intercept(t),isUsed:()=>this.isUsed(),withOptions:t=>this.withOptions(e(t))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(let e=0;e<this.taps.length;e++)this.taps[e]=t.register(this.taps[e])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(t){let e;this._resetCompilation(),"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let n=0;"number"==typeof t.stage&&(n=t.stage);let i=this.taps.length;for(;i>0;){i--;const t=this.taps[i];this.taps[i+1]=t;const r=t.stage||0;if(e){if(e.has(t.name)){e.delete(t.name);continue}if(e.size>0)continue}if(!(r>n)){i++;break}}this.taps[i]=t}}Object.setPrototypeOf(s.prototype,null),t.exports=s},7497:t=>{"use strict";t.exports=class{constructor(t){this.config=t,this.options=void 0,this._args=void 0}create(t){let e;switch(this.init(t),this.options.type){case"sync":e=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`throw ${t};\n`,onResult:t=>`return ${t};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`_callback(${t});\n`,onResult:t=>`_callback(null, ${t});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let t=!1;const n=this.contentWithInterceptors({onError:e=>(t=!0,`_error(${e});\n`),onResult:t=>`_resolve(${t});\n`,onDone:()=>"_resolve();\n"});let i="";i+='"use strict";\n',i+=this.header(),i+="return new Promise((function(_resolve, _reject) {\n",t&&(i+="var _sync = true;\n",i+="function _error(_err) {\n",i+="if(_sync)\n",i+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",i+="else\n",i+="_reject(_err);\n",i+="};\n"),i+=n,t&&(i+="_sync = false;\n"),i+="}));\n",e=new Function(this.args(),i)}return this.deinit(),e}setup(t,e){t._x=e.taps.map((t=>t.fn))}init(t){this.options=t,this._args=t.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(t){if(this.options.interceptors.length>0){const e=t.onError,n=t.onResult,i=t.onDone;let r="";for(let t=0;t<this.options.interceptors.length;t++){const e=this.options.interceptors[t];e.call&&(r+=`${this.getInterceptor(t)}.call(${this.args({before:e.context?"_context":void 0})});\n`)}return r+=this.content(Object.assign(t,{onError:e&&(t=>{let n="";for(let e=0;e<this.options.interceptors.length;e++)this.options.interceptors[e].error&&(n+=`${this.getInterceptor(e)}.error(${t});\n`);return n+=e(t),n}),onResult:n&&(t=>{let e="";for(let n=0;n<this.options.interceptors.length;n++)this.options.interceptors[n].result&&(e+=`${this.getInterceptor(n)}.result(${t});\n`);return e+=n(t),e}),onDone:i&&(()=>{let t="";for(let e=0;e<this.options.interceptors.length;e++)this.options.interceptors[e].done&&(t+=`${this.getInterceptor(e)}.done();\n`);return t+=i(),t})})),r}return this.content(t)}header(){let t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",this.options.interceptors.length>0&&(t+="var _taps = this.taps;\n",t+="var _interceptors = this.interceptors;\n"),t}needContext(){for(const t of this.options.taps)if(t.context)return!0;return!1}callTap(t,{onError:e,onResult:n,onDone:i,rethrowIfPossible:r}){let o="",a=!1;for(let e=0;e<this.options.interceptors.length;e++){const n=this.options.interceptors[e];n.tap&&(a||(o+=`var _tap${t} = ${this.getTap(t)};\n`,a=!0),o+=`${this.getInterceptor(e)}.tap(${n.context?"_context, ":""}_tap${t});\n`)}o+=`var _fn${t} = ${this.getTapFn(t)};\n`;const s=this.options.taps[t];switch(s.type){case"sync":r||(o+=`var _hasError${t} = false;\n`,o+="try {\n"),o+=n?`var _result${t} = _fn${t}(${this.args({before:s.context?"_context":void 0})});\n`:`_fn${t}(${this.args({before:s.context?"_context":void 0})});\n`,r||(o+="} catch(_err) {\n",o+=`_hasError${t} = true;\n`,o+=e("_err"),o+="}\n",o+=`if(!_hasError${t}) {\n`),n&&(o+=n(`_result${t}`)),i&&(o+=i()),r||(o+="}\n");break;case"async":let a="";a+=n?`(function(_err${t}, _result${t}) {\n`:`(function(_err${t}) {\n`,a+=`if(_err${t}) {\n`,a+=e(`_err${t}`),a+="} else {\n",n&&(a+=n(`_result${t}`)),i&&(a+=i()),a+="}\n",a+="})",o+=`_fn${t}(${this.args({before:s.context?"_context":void 0,after:a})});\n`;break;case"promise":o+=`var _hasResult${t} = false;\n`,o+=`var _promise${t} = _fn${t}(${this.args({before:s.context?"_context":void 0})});\n`,o+=`if (!_promise${t} || !_promise${t}.then)\n`,o+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${t} + ')');\n`,o+=`_promise${t}.then((function(_result${t}) {\n`,o+=`_hasResult${t} = true;\n`,n&&(o+=n(`_result${t}`)),i&&(o+=i()),o+=`}), function(_err${t}) {\n`,o+=`if(_hasResult${t}) throw _err${t};\n`,o+=e(`_err${t}`),o+="});\n"}return o}callTapsSeries({onError:t,onResult:e,resultReturns:n,onDone:i,doneReturns:r,rethrowIfPossible:o}){if(0===this.options.taps.length)return i();const a=this.options.taps.findIndex((t=>"sync"!==t.type)),s=n||r;let u="",h=i,c=0;for(let n=this.options.taps.length-1;n>=0;n--){const r=n;h!==i&&("sync"!==this.options.taps[r].type||c++>20)&&(c=0,u+=`function _next${r}() {\n`,u+=h(),u+="}\n",h=()=>`${s?"return ":""}_next${r}();\n`);const l=h,p=t=>t?"":i(),d=this.callTap(r,{onError:e=>t(r,e,l,p),onResult:e&&(t=>e(r,t,l,p)),onDone:!e&&l,rethrowIfPossible:o&&(a<0||r<a)});h=()=>d}return u+=h(),u}callTapsLooping({onError:t,onDone:e,rethrowIfPossible:n}){if(0===this.options.taps.length)return e();const i=this.options.taps.every((t=>"sync"===t.type));let r="";i||(r+="var _looper = (function() {\n",r+="var _loopAsync = false;\n"),r+="var _loop;\n",r+="do {\n",r+="_loop = false;\n";for(let t=0;t<this.options.interceptors.length;t++){const e=this.options.interceptors[t];e.loop&&(r+=`${this.getInterceptor(t)}.loop(${this.args({before:e.context?"_context":void 0})});\n`)}return r+=this.callTapsSeries({onError:t,onResult:(t,e,n,r)=>{let o="";return o+=`if(${e} !== undefined) {\n`,o+="_loop = true;\n",i||(o+="if(_loopAsync) _looper();\n"),o+=r(!0),o+="} else {\n",o+=n(),o+="}\n",o},onDone:e&&(()=>{let t="";return t+="if(!_loop) {\n",t+=e(),t+="}\n",t}),rethrowIfPossible:n&&i}),r+="} while(_loop);\n",i||(r+="_loopAsync = true;\n",r+="});\n",r+="_looper();\n"),r}callTapsParallel({onError:t,onResult:e,onDone:n,rethrowIfPossible:i,onTap:r=((t,e)=>e())}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:t,onResult:e,onDone:n,rethrowIfPossible:i});let o="";o+="do {\n",o+=`var _counter = ${this.options.taps.length};\n`,n&&(o+="var _done = (function() {\n",o+=n(),o+="});\n");for(let a=0;a<this.options.taps.length;a++){const s=()=>n?"if(--_counter === 0) _done();\n":"--_counter;",u=t=>t||!n?"_counter = 0;\n":"_counter = 0;\n_done();\n";o+="if(_counter <= 0) break;\n",o+=r(a,(()=>this.callTap(a,{onError:e=>{let n="";return n+="if(_counter > 0) {\n",n+=t(a,e,s,u),n+="}\n",n},onResult:e&&(t=>{let n="";return n+="if(_counter > 0) {\n",n+=e(a,t,s,u),n+="}\n",n}),onDone:!e&&(()=>s()),rethrowIfPossible:i})),s,u)}return o+="} while(false);\n",o}args({before:t,after:e}={}){let n=this._args;return t&&(n=[t].concat(n)),e&&(n=n.concat(e)),0===n.length?"":n.join(", ")}getTapFn(t){return`_x[${t}]`}getTap(t){return`_taps[${t}]`}getInterceptor(t){return`_interceptors[${t}]`}}},8258:(t,e,n)=>{"use strict";const i=n(9456),r=(t,e)=>e;class o{constructor(t,e){this._map=new Map,this.name=e,this._factory=t,this._interceptors=[]}get(t){return this._map.get(t)}for(t){const e=this.get(t);if(void 0!==e)return e;let n=this._factory(t);const i=this._interceptors;for(let e=0;e<i.length;e++)n=i[e].factory(t,n);return this._map.set(t,n),n}intercept(t){this._interceptors.push(Object.assign({factory:r},t))}}o.prototype.tap=i.deprecate((function(t,e,n){return this.for(t).tap(e,n)}),"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),o.prototype.tapAsync=i.deprecate((function(t,e,n){return this.for(t).tapAsync(e,n)}),"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),o.prototype.tapPromise=i.deprecate((function(t,e,n){return this.for(t).tapPromise(e,n)}),"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead."),t.exports=o},4949:(t,e,n)=>{"use strict";n(1548);class i{constructor(t,e){this.hooks=t,this.name=e}tap(t,e){for(const n of this.hooks)n.tap(t,e)}tapAsync(t,e){for(const n of this.hooks)n.tapAsync(t,e)}tapPromise(t,e){for(const n of this.hooks)n.tapPromise(t,e)}isUsed(){for(const t of this.hooks)if(t.isUsed())return!0;return!1}intercept(t){for(const e of this.hooks)e.intercept(t)}withOptions(t){return new i(this.hooks.map((e=>e.withOptions(t))),this.name)}}t.exports=i},287:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onResult:e,resultReturns:n,onDone:i,rethrowIfPossible:r}){return this.callTapsSeries({onError:(e,n)=>t(n),onResult:(t,n,i)=>`if(${n} !== undefined) {\n${e(n)};\n} else {\n${i()}}\n`,resultReturns:n,onDone:i,rethrowIfPossible:r})}},a=()=>{throw new Error("tapAsync is not supported on a SyncBailHook")},s=()=>{throw new Error("tapPromise is not supported on a SyncBailHook")},u=function(t){return o.setup(this,t),o.create(t)};function h(t=[],e){const n=new i(t,e);return n.constructor=h,n.tapAsync=a,n.tapPromise=s,n.compile=u,n}h.prototype=null,t.exports=h},4712:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onDone:e,rethrowIfPossible:n}){return this.callTapsSeries({onError:(e,n)=>t(n),onDone:e,rethrowIfPossible:n})}},a=()=>{throw new Error("tapAsync is not supported on a SyncHook")},s=()=>{throw new Error("tapPromise is not supported on a SyncHook")},u=function(t){return o.setup(this,t),o.create(t)};function h(t=[],e){const n=new i(t,e);return n.constructor=h,n.tapAsync=a,n.tapPromise=s,n.compile=u,n}h.prototype=null,t.exports=h},5857:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onDone:e,rethrowIfPossible:n}){return this.callTapsLooping({onError:(e,n)=>t(n),onDone:e,rethrowIfPossible:n})}},a=()=>{throw new Error("tapAsync is not supported on a SyncLoopHook")},s=()=>{throw new Error("tapPromise is not supported on a SyncLoopHook")},u=function(t){return o.setup(this,t),o.create(t)};function h(t=[],e){const n=new i(t,e);return n.constructor=h,n.tapAsync=a,n.tapPromise=s,n.compile=u,n}h.prototype=null,t.exports=h},7183:(t,e,n)=>{"use strict";const i=n(1548),r=n(7497),o=new class extends r{content({onError:t,onResult:e,resultReturns:n,rethrowIfPossible:i}){return this.callTapsSeries({onError:(e,n)=>t(n),onResult:(t,e,n)=>{let i="";return i+=`if(${e} !== undefined) {\n`,i+=`${this._args[0]} = ${e};\n`,i+="}\n",i+=n(),i},onDone:()=>e(this._args[0]),doneReturns:n,rethrowIfPossible:i})}},a=()=>{throw new Error("tapAsync is not supported on a SyncWaterfallHook")},s=()=>{throw new Error("tapPromise is not supported on a SyncWaterfallHook")},u=function(t){return o.setup(this,t),o.create(t)};function h(t=[],e){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const n=new i(t,e);return n.constructor=h,n.tapAsync=a,n.tapPromise=s,n.compile=u,n}h.prototype=null,t.exports=h},8482:(t,e,n)=>{"use strict";e.SyncHook=n(4712),n(287),e.SyncWaterfallHook=n(7183),n(5857),n(3725),n(3488),e.AsyncSeriesHook=n(7269),n(7801),n(5525),e.AsyncSeriesWaterfallHook=n(7708),n(8258),n(4949)},9456:(t,e)=>{"use strict";e.deprecate=(t,e)=>{let n=!0;return function(){return n&&(console.warn("DeprecationWarning: "+e),n=!1),t.apply(this,arguments)}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{"use strict";n.r(i),n.d(i,{Hover:()=>tp,Interaction:()=>Ql,Selection:()=>ep,default:()=>np});var t={};n.r(t),n.d(t,{add:()=>Ut,angle:()=>xe,bezier:()=>pe,ceil:()=>$t,clone:()=>Gt,copy:()=>Ht,create:()=>Ft,cross:()=>he,dist:()=>Ae,distance:()=>ne,div:()=>ke,divide:()=>qt,dot:()=>ue,equals:()=>Te,exactEquals:()=>Ee,floor:()=>Kt,forEach:()=>Le,fromValues:()=>Wt,hermite:()=>le,inverse:()=>ae,len:()=>_e,length:()=>Vt,lerp:()=>ce,max:()=>Jt,min:()=>Zt,mul:()=>Me,multiply:()=>Xt,negate:()=>oe,normalize:()=>se,random:()=>de,rotateX:()=>ve,rotateY:()=>me,rotateZ:()=>be,round:()=>Qt,scale:()=>te,scaleAndAdd:()=>ee,set:()=>zt,sqrDist:()=>Oe,sqrLen:()=>Ne,squaredDistance:()=>ie,squaredLength:()=>re,str:()=>we,sub:()=>Ce,subtract:()=>Yt,transformMat3:()=>ge,transformMat4:()=>fe,transformQuat:()=>ye,zero:()=>Se});var e,r,o,a=n(9311);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function g(t,e){return e.lifecycle===r.Lifecycle.singleton?function(t){return t.inSingletonScope()}(t):function(t){return t.inTransientScope()}(t)}function y(t,e){t.whenTargetNamed(b(e))}function v(t,e){return e.container.bind(x(t))}function m(t,e){var n=e.container.parent,i=n&&n.isBound(x(t));return e.container.isBound(x(t))&&!i?e.container.rebind(x(t)):e.container.bind(x(t))}function b(t){return o.isDefinedToken(t)?t.symbol:t}function x(t){return o.isDefinedToken(t)?t.symbol:t}!function(t){!function(e){var i="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=o(t);function o(t,e){return function(n,i){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:i}),e&&e(n,i)}}void 0===i.Reflect?i.Reflect=t:r=o(i.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!o&&!a,u={create:o?function(){return R(Object.create(null))}:a?function(){return R({__proto__:null})}:function(){return R({})},has:s?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:s?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},h=Object.getPrototypeOf(Function),c="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=c||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[r]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,i)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[r]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function i(t,e){return t}function o(t,e){return e}function a(t,e){return[t,e]}}():Map,p=c||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[r]=function(){return this.keys()},t}():Set,d=new(c||"function"!=typeof WeakMap?function(){var t=u.create(),n=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=r(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=r(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return r(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=r(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var e;do{e="@@WeakMap@@"+a()}while(u.has(t,e));return t[e]=!0,e}function r(t,i){if(!e.call(t,n)){if(!i)return;Object.defineProperty(t,n,{value:u.create()})}return t[n]}function o(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",i=0;i<16;++i){var r=e[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}():WeakMap);function f(t,e,n){var i=d.get(t);if(E(i)){if(!n)return;i=new l,d.set(t,i)}var r=i.get(e);if(E(r)){if(!n)return;r=new l,i.set(e,r)}return r}function g(t,e,n){if(y(t,e,n))return!0;var i=I(e);return!T(i)&&g(t,i,n)}function y(t,e,n){var i=f(e,n,!1);return!E(i)&&!!i.has(t)}function v(t,e,n){if(y(t,e,n))return m(t,e,n);var i=I(e);return T(i)?void 0:v(t,i,n)}function m(t,e,n){var i=f(e,n,!1);if(!E(i))return i.get(t)}function b(t,e,n,i){f(n,i,!0).set(t,e)}function x(t,e){var n=S(t,e),i=I(t);if(null===i)return n;var r=x(i,e);if(r.length<=0)return n;if(n.length<=0)return r;for(var o=new p,a=[],s=0,u=n;s<u.length;s++){var h=u[s];o.has(h)||(o.add(h),a.push(h))}for(var c=0,l=r;c<l.length;c++)h=l[c],o.has(h)||(o.add(h),a.push(h));return a}function S(t,e){var n=[],i=f(t,e,!1);if(E(i))return n;for(var o=function(t){var e=_(t,r);if(!A(e))throw new TypeError;var n=e.call(t);if(!P(n))throw new TypeError;return n}(i.keys()),a=0;;){var s=N(o);if(!s)return n.length=a,n;var u=s.value;try{n[a]=u}catch(t){try{L(o)}finally{throw t}}a++}}function w(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function E(t){return void 0===t}function T(t){return null===t}function P(t){return"object"==typeof t?null!==t:"function"==typeof t}function C(t,e){switch(w(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=_(t,i);if(void 0!==r){var o=r.call(t,n);if(P(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(A(n)&&!P(r=n.call(t)))return r;if(A(i=t.valueOf)&&!P(r=i.call(t)))return r}else{var i;if(A(i=t.valueOf)&&!P(r=i.call(t)))return r;var r,o=t.toString;if(A(o)&&!P(r=o.call(t)))return r}throw new TypeError}(t,"default"===n?"number":n)}function M(t){var e=C(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function k(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function A(t){return"function"==typeof t}function O(t){return"function"==typeof t}function _(t,e){var n=t[e];if(null!=n){if(!A(n))throw new TypeError;return n}}function N(t){var e=t.next();return!e.done&&e}function L(t){var e=t.return;e&&e.call(t)}function I(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===h)return e;if(e!==h)return e;var n=t.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return e;var r=i.constructor;return"function"!=typeof r||r===t?e:r}function R(t){return t.__=void 0,delete t.__,t}t("decorate",(function(t,e,n,i){if(E(n)){if(!k(t))throw new TypeError;if(!O(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var i=(0,t[n])(e);if(!E(i)&&!T(i)){if(!O(i))throw new TypeError;e=i}}return e}(t,e)}if(!k(t))throw new TypeError;if(!P(e))throw new TypeError;if(!P(i)&&!E(i)&&!T(i))throw new TypeError;return T(i)&&(i=void 0),function(t,e,n,i){for(var r=t.length-1;r>=0;--r){var o=(0,t[r])(e,n,i);if(!E(o)&&!T(o)){if(!P(o))throw new TypeError;i=o}}return i}(t,e,n=M(n),i)})),t("metadata",(function(t,e){return function(n,i){if(!P(n))throw new TypeError;if(!E(i)&&!function(t){switch(w(t)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;b(t,e,n,i)}})),t("defineMetadata",(function(t,e,n,i){if(!P(n))throw new TypeError;return E(i)||(i=M(i)),b(t,e,n,i)})),t("hasMetadata",(function(t,e,n){if(!P(e))throw new TypeError;return E(n)||(n=M(n)),g(t,e,n)})),t("hasOwnMetadata",(function(t,e,n){if(!P(e))throw new TypeError;return E(n)||(n=M(n)),y(t,e,n)})),t("getMetadata",(function(t,e,n){if(!P(e))throw new TypeError;return E(n)||(n=M(n)),v(t,e,n)})),t("getOwnMetadata",(function(t,e,n){if(!P(e))throw new TypeError;return E(n)||(n=M(n)),m(t,e,n)})),t("getMetadataKeys",(function(t,e){if(!P(t))throw new TypeError;return E(e)||(e=M(e)),x(t,e)})),t("getOwnMetadataKeys",(function(t,e){if(!P(t))throw new TypeError;return E(e)||(e=M(e)),S(t,e)})),t("deleteMetadata",(function(t,e,n){if(!P(e))throw new TypeError;E(n)||(n=M(n));var i=f(e,n,!1);if(E(i))return!1;if(!i.delete(t))return!1;if(i.size>0)return!0;var r=d.get(e);return r.delete(n),r.size>0||d.delete(e),!0}))}(r)}()}(e||(e={})),function(t){var e;t.defineToken=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{multiple:!0};return new t.DefinedToken(e,n)},t.DefinedToken=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t),this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;var i=n.multiple,r=void 0!==i&&i;this.name=e,this.symbol=Symbol(this.name),this.multiple=r},t.isModule=function(t){return!!t&&"object"===h(t)&&"id"in t&&"registry"in t},function(t){t.singleton="singleton",t.transient="transient"}(e=t.Lifecycle||(t.Lifecycle={})),t.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),t.DefaultOption={lifecycle:e.transient}}(r||(r={})),function(t){t.maybeArrayToArray=function(t){return t instanceof Array?t:void 0!==t?[t]:[]},t.isClass=function(t){return!(!t||"function"!=typeof t||!("prototype"in t))},t.isDefinedToken=function(t){return!!(t&&"object"===h(t)&&"symbol"in t&&"multiple"in t)},t.isInjectOption=function(t){return!(!t||"object"!==h(t)||!("token"in t))},t.isNamedToken=function(t){return!!(t&&"object"===h(t)&&"token"in t&&"named"in t)},t.isMultipleEnabled=function(e){return t.isDefinedToken(e)&&e.multiple}}(o||(o={}));var S=new a.W2;function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,a.b2)();return function(n){Reflect.defineMetadata(r.ClassOptionSymbol,u(u({},t),{},{target:n}),n),e(n)}}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w(u(u({},t),{},{lifecycle:r.Lifecycle.singleton}))}function T(t){return(0,a.f3)(x(t))}var P=Symbol("SyringeOptionSymbol"),C=function(){function t(e,n,i){c(this,t),this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.context=void 0,this.mutiple=void 0,this.context=e,this.token=n,this.option=i,this.rawToken=o.isNamedToken(n)?n.token:n,this.named=o.isNamedToken(n)?n.named:void 0,this.mutiple=!!this.named||o.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return p(t,[{key:"resolve",value:function(){var t,e=this,n=this.context;(t=n)&&"object"===h(t)&&"container"in t&&"inversify"in t&&(this.mutiple?this.resolveMutilple(n):(this.resolveMono(n),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach((function(t){o.isMultipleEnabled(t)?v(t,n).toService(e.generalToken):m(t,n).toService(e.generalToken)}))))}},{key:"resolveMono",value:function(t){var e=this;if("useValue"in this.option)return m(this.generalToken,t).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var n=this.option.useDynamic[this.option.useDynamic.length-1];return g(m(this.generalToken,t).toDynamicValue((function(){return n({container:e.context})})),this.option)}if(this.option.useFactory.length>0){var i=this.option.useFactory[this.option.useFactory.length-1];return m(this.generalToken,t).toFactory((function(){return i({container:e.context})}))}if(this.option.useClass.length>0){var r=this.option.useClass[this.option.useClass.length-1];return g(m(this.generalToken,t).to(r),this.option)}}},{key:"resolveMutilple",value:function(t){var e=this,n=this.option.useClass.map((function(n){return g(v(e.generalToken,t).to(n),e.option)})),i=this.option.useDynamic.map((function(n){return g(v(e.generalToken,t).toDynamicValue((function(){return n({container:e.context})})),e.option)})),r=this.option.useFactory.map((function(n){return v(e.generalToken,t).toFactory((function(){return n({container:e.context})}))})),o="useValue"in this.option?v(this.generalToken,t).toConstantValue(this.option.useValue):void 0;this.named&&(n.forEach((function(t){return e.named&&y(t,e.named)})),i.forEach((function(t){return e.named&&y(t,e.named)})),r.forEach((function(t){return e.named&&y(t,e.named)})),o&&y(o,this.named))}}],[{key:"resolveTarget",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{try{var a=Reflect.getMetadata(P,n);a&&t.resolveOption(e,a)}catch(t){}if(o.isClass(n))if(i.useClass){var s=o.maybeArrayToArray(i.useClass);s.unshift(n),i.useClass=s}else i.useClass=[n];var h;try{h=Reflect.getMetadata(r.ClassOptionSymbol,n)}catch(t){}if((h=u(u({},h||{}),i)).token){var c=o.maybeArrayToArray(h.token);c.unshift(n),h.token=c}else h.token=[n];t.resolveOption(e,h)}catch(t){}}},{key:"resolveOption",value:function(e,n){var i=function(t){var e=o.maybeArrayToArray(t.token),n=o.maybeArrayToArray(t.useClass),i=o.maybeArrayToArray(t.useDynamic),a=o.maybeArrayToArray(t.useFactory),s=o.maybeArrayToArray(t.contrib),u=t.lifecycle||r.Lifecycle.transient,h={token:e,useClass:n,lifecycle:s.length>0?r.Lifecycle.singleton:u,contrib:s,useDynamic:i,useFactory:a};return"useValue"in t&&(h.useValue=t.useValue),h}(u(u({},t.globalConfig),n));(0!==i.useClass.length||0!==i.useDynamic.length||0!==i.useFactory.length||"useValue"in i)&&i.token.forEach((function(n){new t(e,n,u({},i)).resolve()}))}}]),t}();C.globalConfig=r.DefaultOption;var M=function(){function t(e){c(this,t),this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,this.container=e||new a.W2}return p(t,[{key:"load",value:function(t,e){!e&&this.loadedModules.includes(t.id)||(t.registry(this.register.bind(this),this.resolveContext()),this.loadedModules.push(t.id))}},{key:"remove",value:function(t){return this.container.unbind(x(t))}},{key:"get",value:function(t){return this.container.get(x(t))}},{key:"getNamed",value:function(t,e){return this.container.getNamed(x(t),b(e))}},{key:"getAll",value:function(t){return this.container.getAll(x(t))}},{key:"getAllNamed",value:function(t,e){return this.container.getAllNamed(x(t),b(e))}},{key:"isBound",value:function(t){return this.container.isBound(x(t))}},{key:"isBoundNamed",value:function(t,e){return this.container.isBoundNamed(x(t),b(e))}},{key:"createChild",value:function(){var e=new t(this.container.createChild());return e.parent=this,e}},{key:"register",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.isInjectOption(t)?C.resolveOption(this,t):C.resolveTarget(this,t,e)}},{key:"resolveContext",value:function(){return{container:this}}}],[{key:"config",value:function(t){C.globalConfig=t}}]),t}(),k=new M(S),A=(k.register.bind(k),r.defineToken("ContributionProvider")),O=function(){function t(e,n,i){c(this,t),this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=n,this.serviceIdentifier=e,i&&(this.option=u(u({},this.option),i))}return p(t,[{key:"setServices",value:function(t){for(var e=[],n=this.container;n;){if(n.isBound(this.serviceIdentifier)){var i=n.getAll(this.serviceIdentifier);e.push.apply(e,function(t){if(Array.isArray(t))return f(t)}(r=i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}n=t?n.parent:void 0}var r;return e}},{key:"getContributions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=u(u({},this.option),t),n=e.cache,i=e.recursive;return n&&void 0!==this.services||(this.services=this.setServices(!!i)),this.services}}]),t}();function _(t,e){return{token:{token:A,named:t},useDynamic:function(n){return new O(t,n.container,e)},lifecycle:r.Lifecycle.singleton}}function N(t,e,n){t({token:{token:A,named:e},useDynamic:function(t){return new O(e,t.container,n)},lifecycle:r.Lifecycle.singleton})}var L=function(){function t(e){c(this,t),this.id=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,t.moduleId+=1,this.id=t.moduleId,this.baseRegistry=e}return p(t,[{key:"registry",get:function(){var t=this;return function(e,n){t.baseRegistry&&t.baseRegistry(e,n),t.optionCollection&&t.optionCollection.forEach((function(t){return e(t)}))}}},{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){return t.options.push(e)})),this}},{key:"contribution",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){return t.options.push(_(e))})),this}}]),t}();function I(t){return new L(t)}L.moduleId=0;var R,D=function(t){return function(e,n,i){var r;(r=t,(0,a.t6)(b(r)))(e,n,i),T(A)(e,n,i)}};!function(t){t.Provider=A,t.register=N}(R||(R={}));var B=n(666),j=function(t,e){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},j(t,e)};function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var G=function(){return G=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},G.apply(this,arguments)};function V(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function W(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function H(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function z(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))}function U(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Y(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function q(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}Object.create,Object.create;var $=function(){function t(){this.pool={}}return t.prototype.getByEntity=function(t){return this.pool[t]},t.prototype.add=function(t,e){this.pool[t]=e},t.prototype.remove=function(t){delete this.pool[t]},W([E()],t)}(),K={}.toString;const Z=function(t,e){return K.call(t)==="[object "+e+"]"},J=function(t){return Z(t,"Function")},Q=function(t){return Array.isArray?Array.isArray(t):Z(t,"Array")},tt=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e},et=function(t,e){if(t)if(Q(t))for(var n=0,i=t.length;n<i&&!1!==e(t[n],n);n++);else if(tt(t))for(var r in t)if(t.hasOwnProperty(r)&&!1===e(t[r],r))break};Object.keys;const nt=function(t){return"object"==typeof t&&null!==t},it=function(t){if(!nt(t)||!Z(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},rt=function(t){if(Q(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},ot=function(t){if(Q(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])};var at=Array.prototype;at.splice,at.indexOf,Array.prototype.splice;const st=function(t){return Z(t,"String")};Object.prototype.hasOwnProperty;const ut=function(t,e,n){return t<e?e:t>n?n:t},ht=function(t){return Z(t,"Number")};Number.isInteger&&Number.isInteger;const ct=function(t,e){if(Q(t)){for(var n,i=-1/0,r=0;r<t.length;r++){var o=t[r],a=J(e)?e(o):o[e];a>i&&(n=o,i=a)}return n}},lt=function(t,e){if(Q(t)){for(var n,i=1/0,r=0;r<t.length;r++){var o=t[r],a=J(e)?e(o):o[e];a<i&&(n=o,i=a)}return n}};Math.PI,parseInt;var pt=Math.PI/180;const dt=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return et(t,(function(n,i){J(t)&&"prototype"===i||e.push(n)})),e},ft=function(t){return Z(t,"Boolean")},gt=function(t){return null==t};Object.prototype;const yt=function(t){return void 0===t};var vt=function(t){if("object"!=typeof t||null===t)return t;var e;if(Q(t)){e=[];for(var n=0,i=t.length;n<i;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=vt(t[n]):e[n]=t[n]}else for(var r in e={},t)"object"==typeof t[r]&&null!=t[r]?e[r]=vt(t[r]):e[r]=t[r];return e};const mt=vt,bt=function(t,e){if(!J(t))throw new TypeError("Expected a function");var n=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=e?e.apply(this,i):i[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,i);return a.set(o,s),s};return n.cache=new Map,n};function xt(t,e,n,i){for(var r in n=n||0,i=i||5,e)if(e.hasOwnProperty(r)){var o=e[r];null!==o&&it(o)?(it(t[r])||(t[r]={}),n<i?xt(t[r],o,n+1,i):t[r]=e[r]):Q(o)?(t[r]=[],t[r]=t[r].concat(o)):void 0!==o&&(t[r]=o)}}const St=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)xt(t,e[i]);return t};Object.prototype.hasOwnProperty;const wt=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)};var Et=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(st(t)||st(e))return!1;if(wt(t)||wt(e)){if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length&&(n=Et(t[i],e[i]));i++);return n}if(nt(t)||nt(e)){var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(n=!0,i=0;i<r.length&&(n=Et(t[r[i]],e[r[i]]));i++);return n}return!1};const Tt=Et;function Pt(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}const Ct=function(t,e,n){for(var i=0,r=st(e)?e.split("."):e;t&&i<r.length;)t=t[r[i++]];return void 0===t||i<r.length?n:t};var Mt=Object.prototype.hasOwnProperty;const kt=function(t,e){if(null===t||!it(t))return{};var n={};return et(e,(function(e){Mt.call(t,e)&&(n[e]=t[e])})),n},At=function(t,e){return function(t,e,n){if(!Q(t)&&!it(t))return t;var i=n;return et(t,(function(t,n){i=e(i,t,n)})),i}(t,(function(t,n,i){return e.includes(i)||(t[i]=n),t}),{})},Ot=function(t){return t};var _t;bt((function(t,e){void 0===e&&(e={});var n=e.fontSize,i=e.fontFamily,r=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return _t||(_t=document.createElement("canvas").getContext("2d")),_t.font=[o,a,r,n+"px",i].join(" "),_t.measureText(st(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([t],dt(e)).join("")})),function(){function t(){this.map={}}t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length}}();var Nt=1e-6,Lt="undefined"!=typeof Float32Array?Float32Array:Array,It=Math.random;function Rt(){var t=new Lt(9);return Lt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Dt(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],c=e[7],l=e[8],p=n[0],d=n[1],f=n[2],g=n[3],y=n[4],v=n[5],m=n[6],b=n[7],x=n[8];return t[0]=p*i+d*a+f*h,t[1]=p*r+d*s+f*c,t[2]=p*o+d*u+f*l,t[3]=g*i+y*a+v*h,t[4]=g*r+y*s+v*c,t[5]=g*o+y*u+v*l,t[6]=m*i+b*a+x*h,t[7]=m*r+b*s+x*c,t[8]=m*o+b*u+x*l,t}function Bt(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function jt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ft(){var t=new Lt(3);return Lt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Gt(t){var e=new Lt(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Vt(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function Wt(t,e,n){var i=new Lt(3);return i[0]=t,i[1]=e,i[2]=n,i}function Ht(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function zt(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function Ut(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Yt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Xt(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function qt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function $t(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Kt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Zt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Jt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Qt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function te(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ee(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function ne(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.hypot(n,i,r)}function ie(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function re(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function oe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ae(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function se(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function ue(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function he(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=r*u-o*s,t[1]=o*a-i*u,t[2]=i*s-r*a,t}function ce(t,e,n,i){var r=e[0],o=e[1],a=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t}function le(t,e,n,i,r,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,h=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+i[0]*h+r[0]*c,t[1]=e[1]*s+n[1]*u+i[1]*h+r[1]*c,t[2]=e[2]*s+n[2]*u+i[2]*h+r[2]*c,t}function pe(t,e,n,i,r,o){var a=1-o,s=a*a,u=o*o,h=s*a,c=3*o*s,l=3*u*a,p=u*o;return t[0]=e[0]*h+n[0]*c+i[0]*l+r[0]*p,t[1]=e[1]*h+n[1]*c+i[1]*l+r[1]*p,t[2]=e[2]*h+n[2]*c+i[2]*l+r[2]*p,t}function de(t,e){e=e||1;var n=2*It()*Math.PI,i=2*It()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t}function fe(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[3]*i+n[7]*r+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/a,t}function ge(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function ye(t,e,n){var i=n[0],r=n[1],o=n[2],a=n[3],s=e[0],u=e[1],h=e[2],c=r*h-o*u,l=o*s-i*h,p=i*u-r*s,d=r*p-o*l,f=o*c-i*p,g=i*l-r*c,y=2*a;return c*=y,l*=y,p*=y,d*=2,f*=2,g*=2,t[0]=s+c+d,t[1]=u+l+f,t[2]=h+p+g,t}function ve(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function me(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function be(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function xe(t,e){var n=t[0],i=t[1],r=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(o*o+a*a+s*s),h=u&&ue(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}function Se(t){return t[0]=0,t[1]=0,t[2]=0,t}function we(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ee(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Te(t,e){var n=t[0],i=t[1],r=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=Nt*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=Nt*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-s)<=Nt*Math.max(1,Math.abs(r),Math.abs(s))}Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Pe,Ce=Yt,Me=Xt,ke=qt,Ae=ne,Oe=ie,_e=Vt,Ne=re,Le=(Pe=Ft(),function(t,e,n,i,r,o){var a,s;for(e||(e=3),n||(n=0),s=i?Math.min(i*e+n,t.length):t.length,a=n;a<s;a+=e)Pe[0]=t[a],Pe[1]=t[a+1],Pe[2]=t[a+2],r(Pe,Pe,o),t[a]=Pe[0],t[a+1]=Pe[1],t[a+2]=Pe[2];return t});function Ie(){var t=new Lt(4);return Lt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Re(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}function De(){var t=new Lt(4);return Lt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Be(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function je(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=n[0],u=n[1],h=n[2],c=n[3];return t[0]=i*c+a*s+r*h-o*u,t[1]=r*c+a*u+o*s-i*h,t[2]=o*c+a*h+i*u-r*s,t[3]=a*c-i*s-r*u-o*h,t}function Fe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-r*s,t[3]=o*s,t}function Ge(t,e,n,i){var r=.5*Math.PI/180;e*=r,n*=r,i*=r;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),h=Math.sin(i),c=Math.cos(i);return t[0]=o*u*c-a*s*h,t[1]=a*s*c+o*u*h,t[2]=a*u*h-o*s*c,t[3]=a*u*c+o*s*h,t}Ie();var Ve=function(t,e,n,i){var r=new Lt(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r},We=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},He=je;function ze(){var t=new Lt(16);return Lt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Ue(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ye(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],c=e[8],l=e[9],p=e[10],d=e[11],f=e[12],g=e[13],y=e[14],v=e[15],m=n*s-i*a,b=n*u-r*a,x=n*h-o*a,S=i*u-r*s,w=i*h-o*s,E=r*h-o*u,T=c*g-l*f,P=c*y-p*f,C=c*v-d*f,M=l*y-p*g,k=l*v-d*g,A=p*v-d*y,O=m*A-b*k+x*M+S*C-w*P+E*T;return O?(O=1/O,t[0]=(s*A-u*k+h*M)*O,t[1]=(r*k-i*A-o*M)*O,t[2]=(g*E-y*w+v*S)*O,t[3]=(p*w-l*E-d*S)*O,t[4]=(u*C-a*A-h*P)*O,t[5]=(n*A-r*C+o*P)*O,t[6]=(y*x-f*E-v*b)*O,t[7]=(c*E-p*x+d*b)*O,t[8]=(a*k-s*C+h*T)*O,t[9]=(i*C-n*k-o*T)*O,t[10]=(f*w-g*x+v*m)*O,t[11]=(l*x-c*w-d*m)*O,t[12]=(s*P-a*M-u*T)*O,t[13]=(n*M-i*P+r*T)*O,t[14]=(g*b-f*S-y*m)*O,t[15]=(c*S-l*b+p*m)*O,t):null}function qe(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],c=e[7],l=e[8],p=e[9],d=e[10],f=e[11],g=e[12],y=e[13],v=e[14],m=e[15],b=n[0],x=n[1],S=n[2],w=n[3];return t[0]=b*i+x*s+S*l+w*g,t[1]=b*r+x*u+S*p+w*y,t[2]=b*o+x*h+S*d+w*v,t[3]=b*a+x*c+S*f+w*m,b=n[4],x=n[5],S=n[6],w=n[7],t[4]=b*i+x*s+S*l+w*g,t[5]=b*r+x*u+S*p+w*y,t[6]=b*o+x*h+S*d+w*v,t[7]=b*a+x*c+S*f+w*m,b=n[8],x=n[9],S=n[10],w=n[11],t[8]=b*i+x*s+S*l+w*g,t[9]=b*r+x*u+S*p+w*y,t[10]=b*o+x*h+S*d+w*v,t[11]=b*a+x*c+S*f+w*m,b=n[12],x=n[13],S=n[14],w=n[15],t[12]=b*i+x*s+S*l+w*g,t[13]=b*r+x*u+S*p+w*y,t[14]=b*o+x*h+S*d+w*v,t[15]=b*a+x*c+S*f+w*m,t}function $e(t,e,n){var i,r,o,a,s,u,h,c,l,p,d,f,g=n[0],y=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*v+e[12],t[13]=e[1]*g+e[5]*y+e[9]*v+e[13],t[14]=e[2]*g+e[6]*y+e[10]*v+e[14],t[15]=e[3]*g+e[7]*y+e[11]*v+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],c=e[7],l=e[8],p=e[9],d=e[10],f=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h,t[7]=c,t[8]=l,t[9]=p,t[10]=d,t[11]=f,t[12]=i*g+s*y+l*v+e[12],t[13]=r*g+u*y+p*v+e[13],t[14]=o*g+h*y+d*v+e[14],t[15]=a*g+c*y+f*v+e[15]),t}function Ke(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Ze(t,e){var n=e[0],i=e[1],r=e[2],o=e[4],a=e[5],s=e[6],u=e[8],h=e[9],c=e[10];return t[0]=Math.hypot(n,i,r),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,h,c),t}function Je(t,e){var n=new Lt(3);Ze(n,e);var i=1/n[0],r=1/n[1],o=1/n[2],a=e[0]*i,s=e[1]*r,u=e[2]*o,h=e[4]*i,c=e[5]*r,l=e[6]*o,p=e[8]*i,d=e[9]*r,f=e[10]*o,g=a+c+f,y=0;return g>0?(y=2*Math.sqrt(g+1),t[3]=.25*y,t[0]=(l-d)/y,t[1]=(p-u)/y,t[2]=(s-h)/y):a>c&&a>f?(y=2*Math.sqrt(1+a-c-f),t[3]=(l-d)/y,t[0]=.25*y,t[1]=(s+h)/y,t[2]=(p+u)/y):c>f?(y=2*Math.sqrt(1+c-a-f),t[3]=(p-u)/y,t[0]=(s+h)/y,t[1]=.25*y,t[2]=(l+d)/y):(y=2*Math.sqrt(1+f-a-c),t[3]=(s-h)/y,t[0]=(p+u)/y,t[1]=(l+d)/y,t[2]=.25*y),t}function Qe(t,e,n,i,r){var o=e[0],a=e[1],s=e[2],u=e[3],h=o+o,c=a+a,l=s+s,p=o*h,d=o*c,f=o*l,g=a*c,y=a*l,v=s*l,m=u*h,b=u*c,x=u*l,S=i[0],w=i[1],E=i[2],T=r[0],P=r[1],C=r[2],M=(1-(g+v))*S,k=(d+x)*S,A=(f-b)*S,O=(d-x)*w,_=(1-(p+v))*w,N=(y+m)*w,L=(f+b)*E,I=(y-m)*E,R=(1-(p+g))*E;return t[0]=M,t[1]=k,t[2]=A,t[3]=0,t[4]=O,t[5]=_,t[6]=N,t[7]=0,t[8]=L,t[9]=I,t[10]=R,t[11]=0,t[12]=n[0]+T-(M*T+O*P+L*C),t[13]=n[1]+P-(k*T+_*P+I*C),t[14]=n[2]+C-(A*T+N*P+R*C),t[15]=1,t}function tn(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,u=r+r,h=n*a,c=i*a,l=i*s,p=r*a,d=r*s,f=r*u,g=o*a,y=o*s,v=o*u;return t[0]=1-l-f,t[1]=c+v,t[2]=p-y,t[3]=0,t[4]=c-v,t[5]=1-h-f,t[6]=d+g,t[7]=0,t[8]=p+y,t[9]=d-g,t[10]=1-h-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}Ft(),Wt(1,0,0),Wt(0,1,0),De(),De(),Rt();var en,nn=function(){function t(t,e){this.min=Ft(),this.max=Ft(),this.update(t,e)}return t.prototype.update=function(t,e){this.center=Ht(Ft(),t||Ft()),this.halfExtents=Ht(Ft(),e||Wt(0,0,0)),this.min=Ce(this.min,this.center,this.halfExtents),this.max=Ut(this.max,this.center,this.halfExtents)},t.prototype.setMinMax=function(t,e){Ut(this.center,e,t),te(this.center,this.center,.5),Ce(this.halfExtents,e,t),te(this.halfExtents,this.halfExtents,.5),Ht(this.min,t),Ht(this.max,e)},t.prototype.getMin=function(){return this.min},t.prototype.getMax=function(){return this.max},t.prototype.add=function(t){var e=this.center,n=e[0],i=e[1],r=e[2],o=this.halfExtents,a=o[0],s=o[1],u=o[2],h=n-a,c=n+a,l=i-s,p=i+s,d=r-u,f=r+u,g=t.center,y=g[0],v=g[1],m=g[2],b=t.halfExtents,x=b[0],S=b[1],w=b[2],E=y-x,T=y+x,P=v-S,C=v+S,M=m-w,k=m+w;E<h&&(h=E),T>c&&(c=T),P<l&&(l=P),C>p&&(p=C),M<d&&(d=M),k>f&&(f=k),e[0]=.5*(h+c),e[1]=.5*(l+p),e[2]=.5*(d+f),o[0]=.5*(c-h),o[1]=.5*(p-l),o[2]=.5*(f-d),this.min[0]=h,this.min[1]=l,this.min[2]=d,this.max[0]=c,this.max[1]=p,this.max[2]=f},t.prototype.setFromTransformedAABB=function(t,e){var n=this.center,i=this.halfExtents,r=t.center,o=t.halfExtents,a=e[0],s=e[4],u=e[8],h=e[1],c=e[5],l=e[9],p=e[2],d=e[6],f=e[10],g=Math.abs(a),y=Math.abs(s),v=Math.abs(u),m=Math.abs(h),b=Math.abs(c),x=Math.abs(l),S=Math.abs(p),w=Math.abs(d),E=Math.abs(f);zt(n,e[12]+a*r[0]+s*r[1]+u*r[2],e[13]+h*r[0]+c*r[1]+l*r[2],e[14]+p*r[0]+d*r[1]+f*r[2]),zt(i,g*o[0]+y*o[1]+v*o[2],m*o[0]+b*o[1]+x*o[2],S*o[0]+w*o[1]+E*o[2]),this.min=Ce(this.min,n,i),this.max=Ut(this.max,n,i)},t.prototype.intersects=function(t){var e=this.getMax(),n=this.getMin(),i=t.getMax(),r=t.getMin();return n[0]<=i[0]&&e[0]>=r[0]&&n[1]<=i[1]&&e[1]>=r[1]&&n[2]<=i[2]&&e[2]>=r[2]},t.prototype.intersection=function(e){if(!this.intersects(e))return null;var n=new t,i=Jt(Ft(),this.getMin(),e.getMin()),r=Zt(Ft(),this.getMax(),e.getMax());return n.setMinMax(i,r),n},t.prototype.containsPoint=function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])},t.prototype.getNegativeFarPoint=function(t){return 273===t.pnVertexFlag?Ht(Ft(),this.min):272===t.pnVertexFlag?Wt(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?Wt(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?Wt(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?Wt(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?Wt(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?Wt(this.max[0],this.max[1],this.min[2]):Wt(this.max[0],this.max[1],this.max[2])},t.prototype.getPositiveFarPoint=function(t){return 273===t.pnVertexFlag?Ht(Ft(),this.max):272===t.pnVertexFlag?Wt(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?Wt(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?Wt(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?Wt(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?Wt(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?Wt(this.min[0],this.min[1],this.max[2]):Wt(this.min[0],this.min[1],this.min[2])},t}(),rn=Ft(),on=(function(){function t(t,e){this.center=t||Ft(),this.radius=e||.5}t.prototype.containsPoint=function(t){return Ce(rn,t,this.center),Vt(rn)<this.radius*this.radius},t.prototype.intersects=function(t){Ce(rn,t.center,this.center);var e=t.radius+this.radius;return Vt(rn)<=e*e}}(),function(){function t(t,e){this.distance=t||0,this.normal=e||Wt(0,1,0),this.updatePNVertexFlag()}return t.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)},t.prototype.distanceToPoint=function(t){return ue(t,this.normal)-this.distance},t.prototype.normalize=function(){var t=1/_e(this.normal);te(this.normal,this.normal,t),this.distance*=t},t.prototype.intersectsLine=function(t,e,n){var i=this.distanceToPoint(t),r=i/(i-this.distanceToPoint(e)),o=r>=0&&r<=1;return o&&n&&ce(n,t,e,r),o},t}());!function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"}(en||(en={}));var an,sn=function(){function t(t){if(this.planes=[],t)this.planes=t;else for(var e=0;e<6;e++)this.planes.push(new on)}return t.prototype.extractFromVPMatrix=function(t){var e=X(t,16),n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],c=e[8],l=e[9],p=e[10],d=e[11],f=e[12],g=e[13],y=e[14],v=e[15];zt(this.planes[0].normal,o-n,h-a,d-c),this.planes[0].distance=v-f,zt(this.planes[1].normal,o+n,h+a,d+c),this.planes[1].distance=v+f,zt(this.planes[2].normal,o+i,h+s,d+l),this.planes[2].distance=v+g,zt(this.planes[3].normal,o-i,h-s,d-l),this.planes[3].distance=v-g,zt(this.planes[4].normal,o-r,h-u,d-p),this.planes[4].distance=v-y,zt(this.planes[5].normal,o+r,h+u,d+p),this.planes[5].distance=v+y,this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))},t}(),un=Ft(),hn=Ft(),cn=Ft(),ln=Ft(),pn=Ft(),dn=(function(){function t(t,e){this.origin=t||Ft(),this.direction=e||Wt(0,0,-1)}t.prototype.intersectsAABB=function(t,e){return e?this.intersectAABBWithIntersection(t,e):this.intersectsAABBWithoutIntersection(t)},t.prototype.intersectsSphere=function(t,e){var n=Ce(un,this.origin,t.center);se(hn,Ht(hn,this.direction));var i=ue(n,hn),r=ue(n,n)-t.radius*t.radius;if(r>0&&i>0)return null;var o=i*i-r;if(o<0)return!1;var a=Math.abs(-i-Math.sqrt(o));return e&&(Ht(e,this.direction),ee(e,this.origin,e,a)),!0},t.prototype.intersectsPlane=function(t,e){var n=(t.distance-ue(t.normal,this.origin))/ue(t.normal,this.direction),i=n>=0;return i&&e&&ee(e,this.origin,this.direction,n),i},t.prototype.intersectsAABBWithoutIntersection=function(t){var e=un,n=hn,i=cn,r=ln,o=pn,a=this.direction;return Ce(e,this.origin,t.center),zt(r,Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2])),Me(i,e,a),!(r[0]>t.halfExtents[0]&&i[0]>=0||r[1]>t.halfExtents[1]&&i[1]>=0||r[2]>t.halfExtents[2]&&i[2]>=0||(zt(o,Math.abs(a[0]),Math.abs(a[1]),Math.abs(a[2])),he(n,a,e),zt(n,Math.abs(n[0]),Math.abs(n[1]),Math.abs(n[2])),n[0]>t.halfExtents[1]*o[2]+t.halfExtents[2]*o[1]||n[1]>t.halfExtents[0]*o[2]+t.halfExtents[2]*o[0]||n[2]>t.halfExtents[0]*o[1]+t.halfExtents[1]*o[0]))},t.prototype.intersectAABBWithIntersection=function(t,e){var n=Ht(Ft(),t.getMin());Ce(n,n,this.origin);var i=Ht(Ft(),t.getMax());Ce(i,i,this.origin);var r=this.direction;0===r[0]?(n[0]=n[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE,i[0]=i[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(n[0]/=r[0],i[0]/=r[0]),0===r[1]?(n[1]=n[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE,i[1]=i[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(n[1]/=r[1],i[1]/=r[1]),0===r[2]?(n[2]=n[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE,i[2]=i[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(n[2]/=r[2],i[2]/=r[2]);var o=zt(cn,Math.min(n[0],i[0]),Math.min(n[1],i[1]),Math.min(n[2],i[2])),a=zt(ln,Math.max(n[0],i[0]),Math.max(n[1],i[1]),Math.max(n[2],i[2])),s=Math.min(Math.min(a[0],a[1]),a[2]),u=Math.max(Math.max(o[0],o[1]),o[2]),h=s>=u&&u>=0;return h&&(Ht(e,this.direction),ee(e,this.origin,e,u)),h}}(),function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t}()),fn=function(){function t(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i,this.left=t,this.right=t+n,this.top=e,this.bottom=e+i}return t.prototype.toJSON=function(){},t}(),gn=(function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Array.isArray(t[0])?t[0]:t;if("number"!=typeof n[0]){for(var i=[],r=0,o=n.length;r<o;r++)i.push(n[r].x,n[r].y);n=i}this.points=n,this.closeStroke=!0}t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var n=!1,i=this.points.length/2,r=0,o=i-1;r<i;o=r++){var a=this.points[2*r],s=this.points[2*r+1],u=this.points[2*o],h=this.points[2*o+1];s>e!=h>e&&t<(e-s)/(h-s)*(u-a)+a&&(n=!n)}return n}}(),"SceneGraphSelectorFactory"),yn="SceneGraphSelector",vn=function(){function t(){}return t.prototype.selectOne=function(t,e){return t.startsWith("#")?e.find((function(e){return e.id===t.substring(1)})):null},t.prototype.selectAll=function(t,e){return t.startsWith(".")?e.findAll((function(e){return e.className===t.substring(1)})):t.startsWith("#")?e.findAll((function(e){return e.id===t.substring(1)})):t.startsWith("[name=")?e.findAll((function(e){return e.name===t.substring(7,t.length-2)})):e.findAll((function(e){return e.nodeName===t}))},t.prototype.is=function(){return!0},W([E()],t)}();function mn(t,e){var n=Number(t.style.zIndex),i=Number(e.style.zIndex);if(n===i){var r=t.parentNode;if(r){var o=r.childNodes||[];return o.indexOf(t)-o.indexOf(e)}}return n-i}function bn(t,e){void 0===e&&(e=!1);for(var n=t;n;){var i=n.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0),n=n.parentNode}t.emit(an.BOUNDS_CHANGED,{affectChildren:e})}!function(t){t.DESTROY="destroy",t.ATTRIBUTE_CHANGED="attribute-changed",t.INSERTED="inserted",t.CHILD_INSERTED="child-inserted",t.REMOVED="removed",t.CHILD_REMOVED="child-removed",t.MOUNTED="mounted",t.UNMOUNTED="unmounted",t.BOUNDS_CHANGED="bounds-changed"}(an||(an={}));var xn,Sn,wn="SceneGraphService",En=function(){function t(){var t,e,n,i,r,o=this;this.sort=function(t,e){if(!t.parentNode)return-1;if(!e.parentNode)return 1;var n=t.transformable.graphDepth-e.transformable.graphDepth,i=t,r=e;if(n<0){if((r=e.getAncestor(-n))===i)return-1}else if(n>0&&r===(i=t.getAncestor(n)))return 1;for(;i&&r&&i.parentNode!==r.parentNode;)i=i.parentNode,r=r.parentNode;var o=i.parentNode;if(o){var a=o.sortable;if(a)return a.sorted||(a.sorted=o.childNodes.slice()),a.dirty&&(a.sorted=o.childNodes.slice().sort(mn),a.dirty=!1),a.sorted.indexOf(i)-a.sorted.indexOf(r)}return-1},this.rotate=(t=De(),function(e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=0),"number"==typeof n&&(n=Wt(n,i,r));var a=e.transformable;if(null===e.parentNode)o.rotateLocal(e,n);else{var s=De();Ge(s,n[0],n[1],n[2]);var u=o.getRotation(e),h=o.getRotation(e.parentNode);We(t,h),Fe(t,t),je(t,t,s),je(a.localRotation,s,u),function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o;a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=o*a}(a.localRotation,a.localRotation),o.dirtifyLocal(e,a)}}),this.rotateLocal=(e=De(),function(t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=0),"number"==typeof n&&(n=Wt(n,i,r));var a=t.transformable;Ge(e,n[0],n[1],n[2]),He(a.localRotation,a.localRotation,e),o.dirtifyLocal(t,a)}),this.setEulerAngles=(n=De(),function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),"number"==typeof e&&(e=Wt(e,i,r));var a=t.transformable;if(null===t.parentNode)o.setLocalEulerAngles(t,e);else{Ge(a.localRotation,e[0],e[1],e[2]);var s=o.getRotation(t.parentNode);We(n,Fe(De(),s)),He(a.localRotation,a.localRotation,n),o.dirtifyLocal(t,a)}}),this.translateLocal=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),"number"==typeof e&&(e=Wt(e,n,i));var r=t.transformable;Te(e,Ft())||(ye(e,e,r.localRotation),Ut(r.localPosition,r.localPosition,e),o.dirtifyLocal(t,r))},this.setPosition=(i=ze(),function(t,e){var n=t.transformable;if(e=Wt(e[0],e[1],e[2]||n.position[2]),!Te(o.getPosition(t),e)){if(n.position=e,null===t.parentNode)Ht(n.localPosition,e);else{var r=t.parentNode.transformable;Ue(i,r.worldTransform),Xe(i,i),fe(n.localPosition,e,i)}o.dirtifyLocal(t,n)}}),this.translate=(r=Ft(),function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),"number"==typeof e&&(e=Wt(e,n,i)),Te(e,Ft())||(Ut(r,o.getPosition(t),e),o.setPosition(t,r))})}return t.prototype.matches=function(t,e){return this.sceneGraphSelectorFactory().is(t,e)},t.prototype.querySelector=function(t,e){return this.sceneGraphSelectorFactory().selectOne(t,e)},t.prototype.querySelectorAll=function(t,e){return this.sceneGraphSelectorFactory().selectAll(t,e)},t.prototype.attach=function(t,e,n){t.parentNode&&this.detach(t),t.parentNode=e,gt(n)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(n,0,t);var i=e.sortable;i&&(i.dirty=!0),this.updateGraphDepth(t);var r=t.transformable;r&&this.dirtifyWorld(t,r),r.frozen&&this.unfreezeParentToRoot(t)},t.prototype.detach=function(t){if(t.parentNode){var e=t.transformable;if(e){var n=this.getWorldTransform(t,e);Ze(e.localScale,n),Ke(e.localPosition,n),Je(e.localRotation,n),e.localDirtyFlag=!0}var i=t.parentNode.sortable;i&&(i.dirty=!0);var r=t.parentNode.childNodes.indexOf(t);r>-1&&t.parentNode.childNodes.splice(r,1),e&&this.dirtifyWorld(t,e),t.parentNode=null}},t.prototype.getOrigin=function(t){return t.transformable.origin},t.prototype.setOrigin=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),"number"==typeof e&&(e=Wt(e,n,i));var r=t.transformable;if(!Te(e,r.origin)){var o=r.origin;o[0]=e[0],o[1]=e[1],o[2]=e[2]||0,this.dirtifyLocal(t,r)}},t.prototype.setLocalEulerAngles=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),"number"==typeof e&&(e=Wt(e,n,i));var r=t.transformable;Ge(r.localRotation,e[0],e[1],e[2]),this.dirtifyLocal(t,r)},t.prototype.setLocalPosition=function(t,e){var n=t.transformable;e=Wt(e[0],e[1],e[2]||n.localPosition[2]),Te(n.localPosition,e)||(Ht(n.localPosition,e),this.dirtifyLocal(t,n))},t.prototype.scaleLocal=function(t,e){var n=t.transformable;Xt(n.localScale,n.localScale,Wt(e[0],e[1],e[2]||1)),this.dirtifyLocal(t,n)},t.prototype.setLocalScale=function(t,e){var n=t.transformable,i=Wt(e[0],e[1],e[2]||n.localScale[2]);Te(i,n.localScale)||(Ht(n.localScale,i),this.dirtifyLocal(t,n))},t.prototype.dirtifyLocal=function(t,e){e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtifyWorld(t,e))},t.prototype.dirtifyWorld=function(t,e){e.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,e),bn(t,!0)},t.prototype.getPosition=function(t){var e=t.transformable;return Ke(e.position,this.getWorldTransform(t,e))},t.prototype.getRotation=function(t){var e=t.transformable;return Je(e.rotation,this.getWorldTransform(t,e))},t.prototype.getScale=function(t){var e=t.transformable;return Ze(e.scaling,this.getWorldTransform(t,e))},t.prototype.getWorldTransform=function(t,e){return void 0===e&&(e=t.transformable),e.localDirtyFlag||e.dirtyFlag?(t.parentNode&&this.getWorldTransform(t.parentNode),this.sync(t,e),e.worldTransform):e.worldTransform},t.prototype.getLocalPosition=function(t){return t.transformable.localPosition},t.prototype.getLocalRotation=function(t){return t.transformable.localRotation},t.prototype.getLocalScale=function(t){return t.transformable.localScale},t.prototype.getLocalTransform=function(t){var e=t.transformable;return e.localDirtyFlag&&(Qe(e.localTransform,e.localRotation,e.localPosition,e.localScale,e.origin),e.localDirtyFlag=!1),e.localTransform},t.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0])},t.prototype.getTransformedGeometryBounds=function(t,e){void 0===e&&(e=!1);var n=this.getGeometryBounds(t,e);if(n){var i=new nn;return i.setFromTransformedAABB(n,this.getWorldTransform(t)),i}return null},t.prototype.getGeometryBounds=function(t,e){void 0===e&&(e=!1);var n=t.geometry,i=e?n.renderBounds:n.contentBounds||null;return i&&new nn(i.center,i.halfExtents)||null},t.prototype.getBounds=function(t,e){var n=this;void 0===e&&(e=!1);var i=t.renderable;if(!i.boundsDirty&&!e&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&e&&i.renderBounds)return i.renderBounds;var r=this.getTransformedGeometryBounds(t,e);t.childNodes.forEach((function(t){var i=n.getBounds(t,e);i&&(r?r.add(i):(r=new nn).update(i.center,i.halfExtents))}));var o=t.style.clipPath;if(o){var a=this.getTransformedGeometryBounds(o,!0),s=void 0;a&&(s=new nn).setFromTransformedAABB(a,this.getWorldTransform(t)),r?s&&(r=s.intersection(r)):r=s}return r&&(e?i.renderBounds=r:i.bounds=r),e?i.renderBoundsDirty=!1:i.boundsDirty=!1,r||null},t.prototype.getLocalBounds=function(t){if(t.parentNode){var e=ze();t.parentNode.transformable&&(e=Xe(ze(),this.getWorldTransform(t.parentNode)));var n=this.getBounds(t);if(n){var i=new nn;return i.setFromTransformedAABB(n,e),i}}return this.getBounds(t)},t.prototype.getBoundingClientRect=function(t){var e,n,i,r=this.getGeometryBounds(t);r&&(i=new nn).setFromTransformedAABB(r,this.getWorldTransform(t));var o=null===(n=null===(e=t.ownerDocument)||void 0===e?void 0:e.defaultView)||void 0===n?void 0:n.getContextService().getBoundingClientRect();if(i){var a=X(i.getMin(),2),s=a[0],u=a[1],h=X(i.getMax(),2),c=h[0],l=h[1];return new fn(s+((null==o?void 0:o.left)||0),u+((null==o?void 0:o.top)||0),c-s,l-u)}return new fn((null==o?void 0:o.left)||0,(null==o?void 0:o.top)||0,0,0)},t.prototype.dirtifyWorldInternal=function(t,e){var n=this;if(!e.dirtyFlag){e.dirtyFlag=!0,e.frozen=!1,t.childNodes.forEach((function(t){var e=t.transformable;e.dirtyFlag||n.dirtifyWorldInternal(t,e)}));var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0),t.emit(an.ATTRIBUTE_CHANGED,{attributeName:"modelMatrix",oldValue:null,newValue:null})}},t.prototype.syncHierarchy=function(t){var e=t.transformable;if(!e.frozen){e.frozen=!0,(e.localDirtyFlag||e.dirtyFlag)&&this.sync(t,e);for(var n=t.childNodes,i=0;i<n.length;i++)this.syncHierarchy(n[i])}},t.prototype.sync=function(t,e){if(e.localDirtyFlag&&(Qe(e.localTransform,e.localRotation,e.localPosition,e.localScale,e.origin),e.localDirtyFlag=!1),e.dirtyFlag){var n=t.parentNode,i=n&&n.transformable;null!==n&&i?qe(e.worldTransform,i.worldTransform,e.localTransform):Ue(e.worldTransform,e.localTransform),e.dirtyFlag=!1}},t.prototype.updateGraphDepth=function(t){var e=t.transformable;t.parentNode?e.graphDepth=t.parentNode.transformable.graphDepth+1:e.graphDepth=0;for(var n=t.childNodes,i=0;i<n.length;i++)this.updateGraphDepth(n[i])},t.prototype.unfreezeParentToRoot=function(t){for(var e=t.parentNode;e;){var n=e.transformable;n&&(n.frozen=!1),e=e.parentNode}},W([T(gn),H("design:type",Function)],t.prototype,"sceneGraphSelectorFactory",void 0),W([E()],t)}(),Tn="GeometryUpdaterFactory",Pn="GeometryAABBGenerator";(Sn=xn||(xn={})).Group="group",Sn.Circle="circle",Sn.Ellipse="ellipse",Sn.Image="image",Sn.Rect="rect",Sn.Line="line",Sn.Polyline="polyline",Sn.Polygon="polygon",Sn.Text="text",Sn.Path="path",Sn.HTML="html";var Cn,Mn="CanvasConfig",kn=function(){function t(){}return t.prototype.update=function(t){var e=t.r,n=void 0===e?0:e,i=t.x,r=void 0===i?0:i,o=t.y;return{width:2*n,height:2*n,x:r,y:void 0===o?0:o}},W([E({token:{token:Pn,named:xn.Circle}})],t)}(),An=function(){function t(){}return t.prototype.update=function(t){var e=t.rx,n=void 0===e?0:e,i=t.ry,r=void 0===i?0:i,o=t.x,a=void 0===o?0:o,s=t.y;return{width:2*n,height:2*r,x:a,y:void 0===s?0:s}},W([E({token:{token:Pn,named:xn.Ellipse}})],t)}(),On=function(){function t(){}return t.prototype.update=function(t){var e,n,i=t.img,r=t.x,o=void 0===r?0:r,a=t.y,s=void 0===a?0:a,u=t.width,h=void 0===u?0:u,c=t.height,l=void 0===c?0:c;return i&&!st(i)&&(t.width||(e=i.width),t.height||(n=i.height)),{width:e||h,height:n||l,x:o,y:s}},W([E({token:[{token:Pn,named:xn.Rect},{token:Pn,named:xn.Image}]})],t)}(),_n=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Nn=function(){function t(){}return t.prototype.getOrCreateCanvas=function(){if(this.canvas)return this.canvas;try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d"),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}return this.canvas.width=10,this.canvas.height=10,this.canvas},t.prototype.getOrCreateContext=function(){return this.context||this.getOrCreateCanvas(),this.context},W([E()],t)}(),Ln={MetricsString:"|ÉqÅ",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},In=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,Rn=new RegExp(/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/.source+"|"+/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/.source+"|"+/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/.source+"|"+/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/.source),Dn=new RegExp(/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/.source+"|"+/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/.source+"|"+/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/.source+"|"+/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/.source),Bn=function(){function t(){var t=this;this.cache={},this.shouldBreakByKinsokuShorui=function(e,n){return!t.isBreakingSpace(n)&&!(!e||!Dn.exec(n)&&!Rn.exec(e))},this.trimByKinsokuShorui=function(t){var e=q([],X(t),!1),n=e[e.length-2];if(!n)return t;var i=n[n.length-1];return e[e.length-2]=n.slice(0,-1),e[e.length-1]=i+e[e.length-1],e}}return t.prototype.measureFont=function(t){if(this.cache[t])return this.cache[t];var e={ascent:0,descent:0,fontSize:0},n=this.offscreenCanvas.getOrCreateCanvas(),i=this.offscreenCanvas.getOrCreateContext();i.font=t;var r=Ln.MetricsString+Ln.BaselineSymbol,o=Math.ceil(i.measureText(r).width),a=Math.ceil(i.measureText(Ln.BaselineSymbol).width),s=Ln.HeightMultiplier*a;a=a*Ln.BaselineMultiplier|0,n.width=o,n.height=s,i.fillStyle="#f00",i.fillRect(0,0,o,s),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(r,0,a);var u=i.getImageData(0,0,o,s).data,h=u.length,c=4*o,l=0,p=0,d=!1;for(l=0;l<a;++l){for(var f=0;f<c;f+=4)if(255!==u[p+f]){d=!0;break}if(d)break;p+=c}for(e.ascent=a-l,p=h-c,d=!1,l=s;l>a;--l){for(f=0;f<c;f+=4)if(255!==u[p+f]){d=!0;break}if(d)break;p-=c}return e.descent=l-a,e.fontSize=e.ascent+e.descent,this.cache[t]=e,e},t.prototype.measureText=function(t,e){var n=e.fontSize,i=void 0===n?0:n,r=e.wordWrap,o=e.lineHeight,a=void 0===o?0:o,s=e.lineWidth,u=void 0===s?0:s,h=e.textBaseline,c=e.textAlign,l=e.letterSpacing,p=void 0===l?0:l,d=e.dropShadow,f=e.dropShadowDistance,g=void 0===f?0:f,y=e.leading,v=void 0===y?0:y,m=function(t){var e=t.fontSize,n=t.fontFamily,i=t.fontStyle,r=t.fontVariant,o=t.fontWeight,a=ht(e)?e+"px":e,s=n;Array.isArray(n)||(s=n.split(","));for(var u=s.length-1;u>=0;u--){var h=s[u].trim();!/([\"\'])[^\'\"]+\1/.test(h)&&_n.indexOf(h)<0&&(h='"'+h+'"'),s[u]=h}return i+" "+r+" "+o+" "+a+" "+s.join(",")}(e),b=this.measureFont(m);0===b.fontSize&&(b.fontSize=i,b.ascent=i);var x=this.offscreenCanvas.getOrCreateContext();x.font=m;for(var S=(r?this.wordWrap(t,e):t).split(/(?:\r\n|\r|\n)/),w=new Array(S.length),E=0,T=0;T<S.length;T++){var P=x.measureText(S[T]).width+(S[T].length-1)*p;w[T]=P,E=Math.max(E,P)}var C=E+u;d&&(C+=g);var M=a||b.fontSize+u,k=Math.max(M,b.fontSize+u)+(S.length-1)*(M+v);d&&(k+=g);var A=0;return"middle"===h?A=-k/2:"bottom"===h||"alphabetic"===h||"ideographic"===h?A=-k:"top"!==h&&"hanging"!==h||(A=0),{font:m,width:C,height:k,lines:S,lineWidths:w,lineHeight:M+=v,maxLineWidth:E,fontProperties:b,lineMetrics:w.map((function(t,e){var n=0;return"center"===c?n-=t/2:"right"!==c&&"end"!==c||(n-=t),new fn(n-u/2,A+e*M,t+u,M)}))}},t.prototype.wordWrap=function(t,e){var n=this,i=e.wordWrapWidth,r=void 0===i?0:i,o=e.letterSpacing,a=void 0===o?0:o,s=this.offscreenCanvas.getOrCreateContext(),u=r+a,h=[],c=0,l=0,p={},d=function(t){return n.getFromCache(t,a,p,s)};return Array.from(t).forEach((function(e,i){var r=t[i-1],o=t[i+1],a=d(e);if(n.isNewline(e))return c++,l=0,void(h[c]="");if(l>0&&l+a>u){if(c++,l=0,h[c]="",n.isBreakingSpace(e))return;n.canBreakInLastChar(e)||(h=n.trimToBreakable(h),l=n.sumTextWidthByCache(h[c]||"",p)),n.shouldBreakByKinsokuShorui(e,o)&&(h=n.trimByKinsokuShorui(h),l+=d(r||""))}l+=a,h[c]=(h[c]||"")+e})),h.join("\n")},t.prototype.isBreakingSpace=function(t){return"string"==typeof t&&Ln.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},t.prototype.isNewline=function(t){return"string"==typeof t&&Ln.Newlines.indexOf(t.charCodeAt(0))>=0},t.prototype.trimToBreakable=function(t){var e=q([],X(t),!1),n=e[e.length-2],i=this.findBreakableIndex(n);if(-1===i||!n)return e;var r=n.slice(i,i+1),o=i+1,a=i+(this.isBreakingSpace(r)?0:1);return e[e.length-1]+=n.slice(o,n.length),e[e.length-2]=n.slice(0,a),e},t.prototype.canBreakInLastChar=function(t){return!t||!In.test(t)},t.prototype.sumTextWidthByCache=function(t,e){return t.split("").reduce((function(t,n){if(!e[n])throw Error("cannot count the word without cache");return t+e[n]}),0)},t.prototype.findBreakableIndex=function(t){for(var e=t.length-1;e>=0;e--)if(!In.test(t[e]))return e;return-1},t.prototype.getFromCache=function(t,e,n,i){var r=n[t];if("number"!=typeof r){var o=t.length*e;r=i.measureText(t).width+o,n[t]=r}return r},W([T(Nn),H("design:type",Nn)],t.prototype,"offscreenCanvas",void 0),W([E()],t)}(),jn=function(){function t(){}return t.prototype.update=function(t){var e=t.text,n=void 0===e?"":e,i=t.textAlign,r=t.lineWidth,o=void 0===r?0:r,a=t.textBaseline,s=t.x,u=void 0===s?0:s,h=t.y,c=void 0===h?0:h,l=this.textService.measureText(n,t);t.metrics=l;var p=l.width,d=l.height,f=l.lineHeight,g=l.fontProperties,y=Wt(p/2,d/2,0),v=[0,1],m=0;"center"===i?(m=o/2,v=[.5,1]):"right"!==i&&"end"!==i||(m=o,v=[1,1]),t.anchor=v;var b=0;return"middle"===a?b=y[1]:"top"===a||"hanging"===a?b=2*y[1]:"alphabetic"===a?b=f-g.ascent:"bottom"!==a&&"ideographic"!==a||(b=0),{width:2*y[0],height:2*y[1],x:u,y:c,offsetX:m,offsetY:b}},W([T(Bn),H("design:type",Bn)],t.prototype,"textService",void 0),W([E({token:{token:Pn,named:xn.Text}})],t)}(),Fn=function(){function t(){}return t.prototype.update=function(t){var e=t.x1,n=t.y1,i=t.x2,r=t.y2,o=Math.min(e,i),a=Math.max(e,i),s=Math.min(n,r);return{width:a-o,height:Math.max(n,r)-s,x:o,y:s}},W([E({token:{token:Pn,named:xn.Line}})],t)}(),Gn=function(){function t(){}return t.prototype.update=function(t){var e=t.points.points,n=Math.min.apply(Math,q([],X(e.map((function(t){return t[0]}))),!1)),i=Math.max.apply(Math,q([],X(e.map((function(t){return t[0]}))),!1)),r=Math.min.apply(Math,q([],X(e.map((function(t){return t[1]}))),!1));return{width:i-n,height:Math.max.apply(Math,q([],X(e.map((function(t){return t[1]}))),!1))-r,x:n,y:r}},W([E({token:[{token:Pn,named:xn.Polyline},{token:Pn,named:xn.Polygon}]})],t)}(),Vn=function(){function t(){}return t.prototype.update=function(t){var e=t.path.rect,n=e.x,i=e.y;return{width:e.width,height:e.height,x:n,y:i}},W([E({token:{token:Pn,named:xn.Path}})],t)}(),Wn=r.defineToken("ContextService",{multiple:!1});!function(t){t[t.CameraChanged=0]="CameraChanged",t[t.DisplayObjectChanged=1]="DisplayObjectChanged",t[t.DisplayObjectRemoved=2]="DisplayObjectRemoved",t[t.None=3]="None"}(Cn||(Cn={}));var Hn,zn="RenderingContext",Un=n(8482),Yn=r.defineToken("RenderingPluginContribution"),Xn=function(){function t(){this.inited=!1,this.stats={total:0,rendered:0},this.hooks={init:new Un.AsyncSeriesHook,prepare:new Un.SyncWaterfallHook(["object"]),beginFrame:new Un.SyncHook([]),beforeRender:new Un.SyncHook(["objectToRender"]),render:new Un.SyncHook(["objectToRender"]),afterRender:new Un.SyncHook(["objectToRender"]),endFrame:new Un.SyncHook([]),destroy:new Un.SyncHook([]),pick:new Un.AsyncSeriesWaterfallHook(["result"]),pointerDown:new Un.SyncHook(["event"]),pointerUp:new Un.SyncHook(["event"]),pointerMove:new Un.SyncHook(["event"]),pointerOut:new Un.SyncHook(["event"]),pointerOver:new Un.SyncHook(["event"]),pointerWheel:new Un.SyncHook(["event"])}}return t.prototype.init=function(){return z(this,void 0,void 0,(function(){var t=this;return U(this,(function(e){switch(e.label){case 0:return this.renderingPluginProvider.getContributions({cache:!1}).forEach((function(e){e.apply(t)})),[4,this.hooks.init.promise()];case 1:return e.sent(),this.inited=!0,[2]}}))}))},t.prototype.getStats=function(){return this.stats},t.prototype.render=function(){this.stats.total=0,this.stats.rendered=0,this.sceneGraphService.syncHierarchy(this.renderingContext.root),this.renderingContext.renderReasons.size&&this.inited&&(this.renderDisplayObject(this.renderingContext.root),this.renderingContext.dirty?(this.hooks.endFrame.call(),this.renderingContext.dirty=!1):this.renderingContext.renderReasons.has(Cn.DisplayObjectRemoved)&&(this.hooks.beginFrame.call(),this.hooks.endFrame.call()),this.renderingContext.renderReasons.clear())},t.prototype.renderDisplayObject=function(t){var e=this,n=this.hooks.prepare.call(t);this.stats.total++,n&&(this.stats.rendered++,this.renderingContext.dirty||(this.renderingContext.dirty=!0,this.hooks.beginFrame.call()),this.hooks.beforeRender.call(n),this.hooks.render.call(n),this.hooks.afterRender.call(n),t.renderable.dirty=!1);var i=t.sortable;i.dirty&&(i.sorted=t.childNodes.slice().sort(mn),i.dirty=!1),(i.sorted||t.childNodes).forEach((function(t){e.renderDisplayObject(t)}))},t.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call()},t.prototype.dirtify=function(){this.renderingContext.renderReasons.add(Cn.DisplayObjectChanged)},W([D(Yn),H("design:type",Object)],t.prototype,"renderingPluginProvider",void 0),W([T(zn),H("design:type",Object)],t.prototype,"renderingContext",void 0),W([T(wn),H("design:type",Object)],t.prototype,"sceneGraphService",void 0),W([E()],t)}(),qn=function(){function t(){}return t.tag="c-geometry",t}(),$n=function(){function t(){this.boundsDirty=!0,this.renderBoundsDirty=!0,this.dirty=!1}return t.tag="c-renderable",t}(),Kn=function(){function t(){this.dirtyFlag=!1,this.localDirtyFlag=!1,this.frozen=!1,this.graphDepth=0,this.localPosition=Wt(0,0,0),this.localRotation=Ve(0,0,0,1),this.localScale=Wt(1,1,1),this.localTransform=ze(),this.position=Wt(0,0,0),this.rotation=Ve(0,0,0,1),this.scaling=Wt(1,1,1),this.worldTransform=ze(),this.origin=Wt(0,0,0)}return t.tag="c-transform",t}();!function(t){t[t.Standard=0]="Standard"}(Hn||(Hn={}));var Zn=function(){function t(){this.strategy=Hn.Standard,this.visibilityPlaneMask=-1,this.visible=!0,this.enable=!0}return t.prototype.isCulled=function(){return this.enable&&!this.visible},t.tag="c-cullable",t}(),Jn=function(){function t(){this.dirty=!1}return t.tag="c-sortable",t}(),Qn=function(){function t(e){this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new dn,this.page=new dn,this.canvas=new dn,this.viewport=new dn,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalEvent",{get:function(){return this.nativeEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),t.prototype.composedPath=function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(t.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},t.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.initEvent=function(){},t.prototype.initUIEvent=function(){},t}(),ti=function(t){function e(e,n){var i=t.call(this,null)||this;return i.type=e,i.detail=n,Object.assign(i,n),i}return F(e,t),e}(Qn),ei=function(){function t(){this.emitter=new B.EventEmitter}return t.prototype.on=function(t,e,n){return this.addEventListener(t,e,n),this},t.prototype.addEventListener=function(t,e,n){var i=ft(n)&&n||tt(n)&&n.capture,r=tt(n)&&n.once,o=J(e)?void 0:e,a=!1,s="";if(t.indexOf(":")>-1){var u=X(t.split(":"),2),h=u[0];t=u[1],s=h,a=!0}if(t=i?t+"capture":t,e=J(e)?e:e.handleEvent,a){var c=e;e=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(null===(t=e[0].target)||void 0===t?void 0:t.name)===s&&c.apply(void 0,q([],X(e),!1))}}return r?this.emitter.once(t,e,o):this.emitter.on(t,e,o),this},t.prototype.off=function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this},t.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},t.prototype.removeEventListener=function(t,e,n){var i=ft(n)&&n||tt(n)&&n.capture,r=J(e)?void 0:e;return t=i?t+"capture":t,e=J(e)?e:e.handleEvent,this.emitter.off(t,e,r),this},t.prototype.emit=function(t,e){this.dispatchEvent(new ti(t,e))},t.prototype.dispatchEvent=function(t){var e,n;if(!(t instanceof Qn))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var i=this.ownerDocument||this.document;return i&&(t.manager=(null===(e=i.defaultView)||void 0===e?void 0:e.getEventService())||null,t.defaultPrevented=!1,t.path=[],t.target=this,null===(n=t.manager)||void 0===n||n.dispatchEvent(t)),!t.defaultPrevented},t}(),ni=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.textContent=null,e.parentNode=null,e}return F(e,t),e.isNode=function(t){return!!t.childNodes},e.prototype.getRootNode=function(){for(var t=this;t.parentNode;)t=t.parentNode;return t},e.prototype.hasChildNodes=function(){return this.childNodes.length>0},e.prototype.isDefaultNamespace=function(t){throw new Error("Method not implemented.")},e.prototype.compareDocumentPosition=function(t){throw new Error("Method not implemented.")},e.prototype.lookupNamespaceURI=function(t){throw new Error("Method not implemented.")},e.prototype.lookupPrefix=function(t){throw new Error("Method not implemented.")},e.prototype.normalize=function(){throw new Error("Method not implemented.")},e.prototype.isEqualNode=function(t){return this===t},e.prototype.isSameNode=function(t){return this.isEqualNode(t)},Object.defineProperty(e.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),e.prototype.contain=function(t){return this.contains(t)},e.prototype.contains=function(t){for(var e=t;e&&this!==e;)e=e.parentNode;return!!e},e.prototype.getAncestor=function(t){for(var e=this;t>0&&e;)e=e.parentNode,t--;return e},e.prototype.forEach=function(t){t(this)||this.childNodes.forEach((function(e){e.forEach(t)}))},e}(ei),ii=0,ri=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneGraphService=La.get(wn),e.entity=ii++,e.renderable=new $n,e.cullable=new Zn,e.transformable=new Kn,e.sortable=new Jn,e.geometry=new qn,e.scrollLeft=0,e.scrollTop=0,e.destroyed=!1,e.style={},e.parsedStyle={},e.attributes={},e}return F(e,t),e.isElement=function(t){return!!t.getAttribute},Object.defineProperty(e.prototype,"classList",{get:function(){return this.className.split(" ")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){throw new Error("Method not implemented.")},e.prototype.appendChild=function(t,e){return this.sceneGraphService.attach(t,this,e),this.emit(an.CHILD_INSERTED,{child:t}),t.emit(an.INSERTED,{parent:this}),t},e.prototype.insertBefore=function(t,e){if(e){var n=this.childNodes.indexOf(e);this.appendChild(t,n-1)}else this.appendChild(t);return t},e.prototype.replaceChild=function(t,e,n){var i=this.childNodes.indexOf(e);return this.removeChild(e,n),this.appendChild(t,i),e},e.prototype.removeChild=function(t,e){return void 0===e&&(e=!0),t.emit(an.REMOVED,{parent:this}),e&&(t.emit(an.DESTROY,{}),t.destroyed=!0),this.emit(an.CHILD_REMOVED,{child:t}),this.sceneGraphService.detach(t),e&&t.emitter.removeAllListeners(),t},e.prototype.removeChildren=function(t){var e=this;void 0===t&&(t=!0),this.childNodes.slice().forEach((function(n){e.removeChild(n,t)}))},e.prototype.matches=function(t){return this.sceneGraphService.matches(t,this)},e.prototype.getElementById=function(t){return this.sceneGraphService.querySelector("#"+t,this)},e.prototype.getElementsByName=function(t){return this.sceneGraphService.querySelectorAll('[name="'+t+'"]',this)},e.prototype.getElementsByClassName=function(t){return this.sceneGraphService.querySelectorAll("."+t,this)},e.prototype.getElementsByTagName=function(t){return this.sceneGraphService.querySelectorAll(t,this)},e.prototype.querySelector=function(t){return this.sceneGraphService.querySelector(t,this)},e.prototype.querySelectorAll=function(t){return this.sceneGraphService.querySelectorAll(t,this)},e.prototype.find=function(t){var e=this,n=null;return this.forEach((function(i){return!(i===e||!t(i)||(n=i,0))})),n},e.prototype.findAll=function(t){var e=this,n=[];return this.forEach((function(i){i!==e&&t(i)&&n.push(i)})),n},e.prototype.after=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.parentNode){var i=this.parentNode.childNodes.indexOf(this);e.forEach((function(e,n){var r;return null===(r=t.parentNode)||void 0===r?void 0:r.appendChild(e,i+n+1)}))}},e.prototype.before=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.parentNode){var i=this.parentNode.childNodes.indexOf(this),r=X(e),o=r[0],a=r.slice(1);this.parentNode.appendChild(o,i),(t=o).after.apply(t,q([],X(a),!1))}},e.prototype.replaceWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.after.apply(this,q([],X(t),!1)),this.remove()},e.prototype.append=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){return t.appendChild(e)}))},e.prototype.prepend=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e,n){return t.appendChild(e,n)}))},e.prototype.replaceChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,q([],X(t),!1))},e.prototype.remove=function(t){return void 0===t&&(t=!0),this.parentNode?this.parentNode.removeChild(this,t):this},e.prototype.destroy=function(){this.emit(an.DESTROY,{}),this.remove(!1),this.emitter.removeAllListeners(),this.destroyed=!0},e.prototype.getGeometryBounds=function(){return this.sceneGraphService.getGeometryBounds(this)},e.prototype.getRenderBounds=function(){return this.sceneGraphService.getBounds(this,!0)},e.prototype.getBounds=function(){return this.sceneGraphService.getBounds(this)},e.prototype.getLocalBounds=function(){return this.sceneGraphService.getLocalBounds(this)},e.prototype.getBoundingClientRect=function(){return this.sceneGraphService.getBoundingClientRect(this)},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.getAttribute=function(t){var e=this.attributes[t];return gt(e)?void 0:e},e.prototype.removeAttribute=function(t){delete this.attributes[t]},e.prototype.setAttribute=function(t,e,n){void 0===n&&(n=!1),this.attributes[t]=e},e}(ni),oi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.client=new dn,e.movement=new dn,e.offset=new dn,e.global=new dn,e.screen=new dn,e}return F(e,t),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),e.prototype.getModifierState=function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)},e.prototype.initMouseEvent=function(){throw new Error("Method not implemented.")},e}(Qn),ai=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.height=0,e.isPrimary=!1,e}return F(e,t),e.prototype.getCoalescedEvents=function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]},e.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},e}(oi),si=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DOM_DELTA_LINE=0,e.DOM_DELTA_PAGE=1,e.DOM_DELTA_PIXEL=2,e}return F(e,t),e}(oi),ui=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cursor="default",e.mappingTable={},e.mappingState={trackingData:{}},e.eventPool=new Map,e.onPointerDown=function(t){return z(e,void 0,void 0,(function(){var e,n;return U(this,(function(i){switch(i.label){case 0:return t instanceof ai?[4,this.createPointerEvent(t)]:[2];case 1:return e=i.sent(),this.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType?this.dispatchEvent(e,"touchstart"):"mouse"!==e.pointerType&&"pen"!==e.pointerType||(n=2===e.button,this.dispatchEvent(e,n?"rightdown":"mousedown")),this.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e),[2]}}))}))},e.onPointerUp=function(t){return z(e,void 0,void 0,(function(){var e,n,i,r,o,a,s,u,h;return U(this,(function(c){switch(c.label){case 0:return t instanceof ai?(e=performance.now(),[4,this.createPointerEvent(t)]):[2];case 1:if(n=c.sent(),this.dispatchEvent(n,"pointerup"),"touch"===n.pointerType?this.dispatchEvent(n,"touchend"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||(s=2===n.button,this.dispatchEvent(n,s?"rightup":"mouseup")),i=this.trackingData(t.pointerId),r=this.findMountedTarget(i.pressTargetsByButton[t.button]),o=r,r&&!n.composedPath().includes(r)){for(a=r;a&&!n.composedPath().includes(a);)n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||(s=2===n.button,this.notifyTarget(n,s?"rightupoutside":"mouseupoutside")),ni.isNode(a)&&(a=a.parentNode);delete i.pressTargetsByButton[t.button],o=a}return o&&((u=this.clonePointerEvent(n,"click")).target=o,u.path=[],i.clicksByButton[t.button]||(i.clicksByButton[t.button]={clickCount:0,target:u.target,timeStamp:e}),(h=i.clicksByButton[t.button]).target===u.target&&e-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=u.target,h.timeStamp=e,u.detail=h.clickCount,"mouse"===u.pointerType?this.dispatchEvent(u,"click"):"touch"===u.pointerType?this.dispatchEvent(u,"tap"):this.dispatchEvent(u,"pointertap"),this.freeEvent(u)),this.freeEvent(n),[2]}}))}))},e.onPointerMove=function(t){return z(e,void 0,void 0,(function(){var e,n,i,r,o,a,s,u,h,c,l;return U(this,(function(p){switch(p.label){case 0:return t instanceof ai?[4,this.createPointerEvent(t)]:[2];case 1:return e=p.sent(),n="mouse"===e.pointerType||"pen"===e.pointerType,i=this.trackingData(t.pointerId),r=this.findMountedTarget(i.overTargets),i.overTargets&&r!==e.target?(o="mousemove"===t.type?"mouseout":"pointerout",[4,this.createPointerEvent(t,o,r||void 0)]):[3,5];case 2:return a=p.sent(),this.dispatchEvent(a,"pointerout"),n&&this.dispatchEvent(a,"mouseout"),e.composedPath().includes(r)?[3,4]:[4,this.createPointerEvent(t,"pointerleave",r||void 0)];case 3:for((s=p.sent()).eventPhase=s.AT_TARGET;s.target&&!e.composedPath().includes(s.target);)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseleave"),ni.isNode(s.target)&&(s.target=s.target.parentNode);this.freeEvent(s),p.label=4;case 4:this.freeEvent(a),p.label=5;case 5:if(r!==e.target){for(u="mousemove"===t.type?"mouseover":"pointerover",h=this.clonePointerEvent(e,u),this.dispatchEvent(h,"pointerover"),n&&this.dispatchEvent(h,"mouseover"),c=r&&ni.isNode(r)&&r.parentNode;c&&c!==(ni.isNode(this.rootTarget)&&this.rootTarget.parentNode)&&c!==e.target;)c=c.parentNode;if(!c||c===(ni.isNode(this.rootTarget)&&this.rootTarget.parentNode)){for((l=this.clonePointerEvent(e,"pointerenter")).eventPhase=l.AT_TARGET;l.target&&l.target!==r&&l.target!==(ni.isNode(this.rootTarget)&&this.rootTarget.parentNode);)l.currentTarget=l.target,this.notifyTarget(l),n&&this.notifyTarget(l,"mouseenter"),ni.isNode(l.target)&&(l.target=l.target.parentNode);this.freeEvent(l)}this.freeEvent(h)}return this.dispatchEvent(e,"pointermove"),"touch"===e.pointerType&&this.dispatchEvent(e,"touchmove"),n&&(this.dispatchEvent(e,"mousemove"),this.cursor=this.getCursor(e.target)),i.overTargets=e.composedPath(),this.freeEvent(e),[2]}}))}))},e.onPointerOut=function(t){return z(e,void 0,void 0,(function(){var e,n,i,r,o;return U(this,(function(a){switch(a.label){case 0:return t instanceof ai?(e=this.trackingData(t.pointerId)).overTargets?(n="mouse"===t.pointerType||"pen"===t.pointerType,i=this.findMountedTarget(e.overTargets),[4,this.createPointerEvent(t,"pointerout",i||void 0)]):[3,3]:[2];case 1:return r=a.sent(),this.dispatchEvent(r),n&&this.dispatchEvent(r,"mouseout"),[4,this.createPointerEvent(t,"pointerleave",i||void 0)];case 2:for((o=a.sent()).eventPhase=o.AT_TARGET;o.target&&o.target!==(ni.isNode(this.rootTarget)&&this.rootTarget.parentNode);)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),ni.isNode(o.target)&&(o.target=o.target.parentNode);e.overTargets=null,this.freeEvent(r),this.freeEvent(o),a.label=3;case 3:return this.cursor=null,[2]}}))}))},e.onPointerOver=function(t){return z(e,void 0,void 0,(function(){var e,n,i,r;return U(this,(function(o){switch(o.label){case 0:return t instanceof ai?(e=this.trackingData(t.pointerId),[4,this.createPointerEvent(t)]):[2];case 1:for(n=o.sent(),i="mouse"===n.pointerType||"pen"===n.pointerType,this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(this.cursor=this.getCursor(n.target)),(r=this.clonePointerEvent(n,"pointerenter")).eventPhase=r.AT_TARGET;r.target&&r.target!==(ni.isNode(this.rootTarget)&&this.rootTarget.parentNode);)r.currentTarget=r.target,this.notifyTarget(r),i&&this.notifyTarget(r,"mouseenter"),ni.isNode(r.target)&&(r.target=r.target.parentNode);return e.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(r),[2]}}))}))},e.onPointerUpOutside=function(t){return z(e,void 0,void 0,(function(){var e,n,i,r;return U(this,(function(o){switch(o.label){case 0:return t instanceof ai?(e=this.trackingData(t.pointerId),n=this.findMountedTarget(e.pressTargetsByButton[t.button]),[4,this.createPointerEvent(t)]):[2];case 1:if(i=o.sent(),n){for(r=n;r;)i.currentTarget=r,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType?this.notifyTarget(i,"touchendoutside"):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),ni.isNode(r)&&(r=r.parentNode);delete e.pressTargetsByButton[t.button]}return this.freeEvent(i),[2]}}))}))},e.onWheel=function(t){return z(e,void 0,void 0,(function(){var e;return U(this,(function(n){switch(n.label){case 0:return t instanceof si?[4,this.createWheelEvent(t)]:[2];case 1:return e=n.sent(),this.dispatchEvent(e),this.freeEvent(e),[2]}}))}))},e}return F(e,t),e.prototype.init=function(){this.rootTarget=this.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)},e.prototype.client2Viewport=function(t){var e=this.contextService.getBoundingClientRect();return new dn(t.x-((null==e?void 0:e.left)||0),t.y-((null==e?void 0:e.top)||0))},e.prototype.viewport2Client=function(t){var e=this.contextService.getBoundingClientRect();return new dn(t.x+((null==e?void 0:e.left)||0),t.y+((null==e?void 0:e.top)||0))},e.prototype.viewport2Canvas=function(t){var e=t.x,n=t.y,i=this.rootTarget.defaultView.getCamera(),r=this.canvasConfig,o=r.width,a=r.height,s=i.getPerspectiveInverse(),u=i.getWorldTransform(),h=qe(ze(),u,s),c=Wt(e/o*2-1,2*(1-n/a)-1,0);return fe(c,c,h),new dn(c[0],c[1])},e.prototype.canvas2Viewport=function(t){var e=this.rootTarget.defaultView.getCamera(),n=e.getPerspective(),i=e.getViewTransform(),r=qe(ze(),n,i),o=Wt(t.x,t.y,0);fe(o,o,r);var a=this.canvasConfig,s=a.width,u=a.height;return new dn((o[0]+1)/2*s,(1-(o[1]+1)/2)*u)},e.prototype.setPickHandler=function(t){this.pickHandler=t},e.prototype.addEventMapping=function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((function(t,e){return t.priority-e.priority}))},e.prototype.mapEvent=function(t){if(this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,i=e.length;n<i;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for "+t.type)}},e.prototype.dispatchEvent=function(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.emit(e||t.type,t)},e.prototype.propagate=function(t,e){if(t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var i=n.length-1;i>=1;i--)if(t.currentTarget=n[i],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped)for(t.eventPhase=t.BUBBLING_PHASE,i=1;i<n.length;i++)if(t.currentTarget=n[i],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}},e.prototype.propagationPath=function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)return e.unshift(n.document),e;for(var i=0;i<2048&&t!==this.rootTarget;i++)ni.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);return n&&e.push(n),e},e.prototype.hitTest=function(t){return z(this,void 0,void 0,(function(){var e,n,i,r,o;return U(this,(function(a){switch(a.label){case 0:return e=t.viewportX,n=t.viewportY,i=this.canvasConfig,r=i.width,o=i.height,e<0||n<0||e>r||n>o?[2,null]:[4,this.pickHandler(t)];case 1:return[2,a.sent()||this.rootTarget||null]}}))}))},e.prototype.createPointerEvent=function(t,e,n){return z(this,void 0,void 0,(function(){var i,r,o;return U(this,(function(a){switch(a.label){case 0:return i=this.allocateEvent(ai),this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i._originalEvent=t,r=i,null==n?[3,1]:(o=n,[3,3]);case 1:return[4,this.hitTest({clientX:i.clientX,clientY:i.clientY,viewportX:i.viewportX,viewportY:i.viewportY,x:i.global.x,y:i.global.y})];case 2:o=a.sent(),a.label=3;case 3:return r.target=o,"string"==typeof e&&(i.type=e),[2,i]}}))}))},e.prototype.createWheelEvent=function(t){return z(this,void 0,void 0,(function(){var e,n;return U(this,(function(i){switch(i.label){case 0:return e=this.allocateEvent(si),this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e._originalEvent=t,n=e,[4,this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.global.x,y:e.global.y})];case 1:return n.target=i.sent(),[2,e]}}))}))},e.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.prototype.clonePointerEvent=function(t,e){var n=this.allocateEvent(ai);return n.nativeEvent=t.nativeEvent,n._originalEvent=t._originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=null!=e?e:n.type,n},e.prototype.copyPointerData=function(t,e){t instanceof ai&&e instanceof ai&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)},e.prototype.copyMouseData=function(t,e){t instanceof oi&&e instanceof oi&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset))},e.prototype.copyWheelData=function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ},e.prototype.copyData=function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)},e.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=[],e.target=null,e},e.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)},e.prototype.notifyTarget=function(t,e){e=null!=e?e:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?e+"capture":e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)},e.prototype.notifyListeners=function(t,e){var n=t.currentTarget.emitter,i=n._events[e];if(i)if("fn"in i)i.once&&n.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(var r=0;r<i.length&&!t.propagationImmediatelyStopped;r++)i[r].once&&n.removeListener(e,i[r].fn,void 0,!0),i[r].fn.call(i[r].context,t)},e.prototype.findMountedTarget=function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;n>=0;n--){var i=t[n];if(!(i===this.rootTarget||ni.isNode(i)&&i.parentNode===e))break;e=t[n]}return e},e.prototype.getCursor=function(t){for(var e=t;e;){var n=ri.isElement(e)&&e.getAttribute("cursor");if(n)return n;e=ni.isNode(e)&&e.parentNode}},W([T(zn),H("design:type",Object)],e.prototype,"renderingContext",void 0),W([T(Wn),H("design:type",Object)],e.prototype,"contextService",void 0),W([T(Mn),H("design:type",Object)],e.prototype,"canvasConfig",void 0),W([(0,a.zY)(),H("design:type",Function),H("design:paramtypes",[]),H("design:returntype",void 0)],e.prototype,"init",null),W([E()],e)}(B.EventEmitter);function hi(t){return void 0===t?0:t>360||t<-360?t%360:t}function ci(t,e,n){return ht(t)?Wt(t,e,n):3===t.length?Gt(t):Wt(t[0],t[1],t[2]||0)}function li(t){return t*(180/Math.PI)}function pi(t,e){return 16===e.length?function(t,e){var n,i,r=.5*Math.PI,o=X(Ze(Ft(),e),3),a=o[0],s=o[1],u=o[2],h=Math.asin(-e[2]/a);return h<r?h>-r?(n=Math.atan2(e[6]/s,e[10]/u),i=Math.atan2(e[1]/a,e[0]/a)):(i=0,n=-Math.atan2(e[4]/s,e[5]/s)):(i=0,n=Math.atan2(e[4]/s,e[5]/s)),t[0]=n,t[1]=h,t[2]=i,t}(t,e):function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=i*i,s=r*r,u=o*o,h=n*n+a+s+u,c=n*o-i*r;return c>.499995*h?(t[0]=Math.PI/2,t[1]=2*Math.atan2(i,n),t[2]=0):c<-.499995*h?(t[0]=-Math.PI/2,t[1]=2*Math.atan2(i,n),t[2]=0):(t[0]=Math.asin(2*(n*r-o*i)),t[1]=Math.atan2(2*(n*o+i*r),1-2*(s+u)),t[2]=Math.atan2(2*(n*i+r*o),1-2*(a+s))),t}(t,e)}function di(t,e,n,i,r){var o,a,s,u,h,c,l,p=Math.cos(t),d=Math.sin(t);return o=i*p,a=r*d,0,s=-i*d,u=r*p,0,h=e,c=n,1,(l=new Lt(9))[0]=o,l[1]=a,l[2]=0,l[3]=s,l[4]=u,l[5]=0,l[6]=h,l[7]=c,l[8]=1,l}var fi=.1,gi="function"==typeof Float32Array,yi=function(t,e){return 1-3*e+3*t},vi=function(t,e){return 3*e-6*t},mi=function(t){return 3*t},bi=function(t,e,n){return((yi(e,n)*t+vi(e,n))*t+mi(e))*t},xi=function(t,e,n){return 3*yi(e,n)*t*t+2*vi(e,n)*t+mi(e)},Si=function(t,e,n,i){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===i)return function(t){return t};for(var r=gi?new Float32Array(11):new Array(11),o=0;o<11;++o)r[o]=bi(o*fi,t,n);return function(o){return 0===o||1===o?o:bi(function(e){for(var i=0,o=1;10!==o&&r[o]<=e;++o)i+=fi;--o;var a=i+(e-r[o])/(r[o+1]-r[o])*fi,s=xi(a,t,n);return s>=.001?function(t,e,n,i){for(var r=0;r<4;++r){var o=xi(e,n,i);if(0===o)return e;e-=(bi(e,n,i)-t)/o}return e}(e,a,t,n):0===s?a:function(t,e,n,i,r){var o,a,s=0;do{(o=bi(a=e+(n-e)/2,i,r)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++s<10);return a}(e,i,i+fi,t,n)}(o),e,i)}},wi=function(t,e,n){return Math.min(Math.max(t,e),n)},Ei=function(t){return Math.pow(t,2)},Ti=function(t){return Math.pow(t,3)},Pi=function(t){return Math.pow(t,4)},Ci=function(t){return Math.pow(t,5)},Mi=function(t){return Math.pow(t,6)},ki=function(t){return 1-Math.cos(t*Math.PI/2)},Ai=function(t){return 1-Math.sqrt(1-t*t)},Oi=function(t){return t*t*(3*t-2)},_i=function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)},Ni=function(t,e){void 0===e&&(e=[]);var n=X(e,2),i=n[0],r=void 0===i?1:i,o=n[1],a=void 0===o?.5:o,s=wi(Number(r),1,10),u=wi(Number(a),.1,2);return 0===t||1===t?t:-s*Math.pow(2,10*(t-1))*Math.sin((t-1-u/(2*Math.PI)*Math.asin(1/s))*(2*Math.PI)/u)},Li=function(t,e,n){void 0===e&&(e=[]);var i=X(e,4),r=i[0],o=void 0===r?1:r,a=i[1],s=void 0===a?100:a,u=i[2],h=void 0===u?10:u,c=i[3],l=void 0===c?0:c;o=wi(o,.1,1e3),s=wi(s,.1,1e3),h=wi(h,.1,1e3),l=wi(l,.1,1e3);var p=Math.sqrt(s/o),d=h/(2*Math.sqrt(s*o)),f=d<1?p*Math.sqrt(1-d*d):0,g=d<1?(d*p-l)/f:-l+p,y=n?n*t/1e3:t;return y=d<1?Math.exp(-y*d*p)*(1*Math.cos(f*y)+g*Math.sin(f*y)):(1+g*y)*Math.exp(-y*p),0===t||1===t?t:1-y},Ii=(new Map,function(t,e){void 0===e&&(e=[]);var n=X(e,2),i=n[0],r=void 0===i?10:i;return("start"==n[1]?Math.ceil:Math.floor)(wi(t,0,1)*r)/r}),Ri=function(t,e){void 0===e&&(e=[]);var n=X(e,4),i=n[0],r=n[1],o=n[2],a=n[3];return Si(i,r,o,a)(t)},Di=Si(.42,0,1,1),Bi=function(t){return function(e,n,i){return void 0===n&&(n=[]),1-t(1-e,n,i)}},ji=function(t){return function(e,n,i){return void 0===n&&(n=[]),e<.5?t(2*e,n,i)/2:1-t(-2*e+2,n,i)/2}},Fi=function(t){return function(e,n,i){return void 0===n&&(n=[]),e<.5?(1-t(1-2*e,n,i))/2:(t(2*e-1,n,i)+1)/2}},Gi={steps:Ii,"step-start":function(t){return Ii(t,[1,"start"])},"step-end":function(t){return Ii(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":Ri,ease:function(t){return Ri(t,[.25,.1,.25,1])},in:Di,out:Bi(Di),"in-out":ji(Di),"out-in":Fi(Di),"in-quad":Ei,"out-quad":Bi(Ei),"in-out-quad":ji(Ei),"out-in-quad":Fi(Ei),"in-cubic":Ti,"out-cubic":Bi(Ti),"in-out-cubic":ji(Ti),"out-in-cubic":Fi(Ti),"in-quart":Pi,"out-quart":Bi(Pi),"in-out-quart":ji(Pi),"out-in-quart":Fi(Pi),"in-quint":Ci,"out-quint":Bi(Ci),"in-out-quint":ji(Ci),"out-in-quint":Fi(Ci),"in-expo":Mi,"out-expo":Bi(Mi),"in-out-expo":ji(Mi),"out-in-expo":Fi(Mi),"in-sine":ki,"out-sine":Bi(ki),"in-out-sine":ji(ki),"out-in-sine":Fi(ki),"in-circ":Ai,"out-circ":Bi(Ai),"in-out-circ":ji(Ai),"out-in-circ":Fi(Ai),"in-back":Oi,"out-back":Bi(Oi),"in-out-back":ji(Oi),"out-in-back":Fi(Oi),"in-bounce":_i,"out-bounce":Bi(_i),"in-out-bounce":ji(_i),"out-in-bounce":Fi(_i),"in-elastic":Ni,"out-elastic":Bi(Ni),"in-out-elastic":ji(Ni),"out-in-elastic":Fi(Ni),spring:Li,"spring-in":Li,"spring-out":Bi(Li),"spring-in-out":ji(Li),"spring-out-in":Fi(Li)},Vi=function(t){return t};function Wi(t,e){return function(n){if(n>=1)return 1;var i=1/t;return(n+=e*i)-n%i}}var Hi="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",zi=new RegExp("cubic-bezier\\("+Hi+","+Hi+","+Hi+","+Hi+"\\)"),Ui=/steps\(\s*(\d+)\s*\)/,Yi=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Xi(t){var e=zi.exec(t);if(e)return Si.apply(void 0,q([],X(e.slice(1).map(Number)),!1));var n=Ui.exec(t);if(n)return Wi(Number(n[1]),0);var i=Yi.exec(t);return i?Wi(Number(i[1]),{start:1,middle:.5,end:0}[i[2]]):Gi[function(t){return(e=t,"-"===(e=e.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))).charAt(0)?e.substr(1):e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim();var e}(t)]||Gi.linear}function qi(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}function $i(t,e,n,i){var r=e,o=n,a=Ia[t],s=Da[t];a&&(r=a(e,i),o=a(n,i));var u=s&&s(r,o,i);if(u){var h=Zi.apply(void 0,q([],X(u),!1));return function(t){return 0===t?e:1===t?n:h(t)}}return Zi(!1,!0,(function(t){return t?n:e}))}function Ki(t,e,n){if("number"==typeof t&&"number"==typeof e)return t*(1-n)+e*n;if("boolean"==typeof t&&"boolean"==typeof e||"string"==typeof t&&"string"==typeof e)return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length){for(var i=[],r=0;r<t.length;r++)i.push(Ki(t[r],e[r],n));return i}throw new Error("Mismatched interpolation arguments "+t+":"+e)}Object.keys({in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"});var Zi=function(t,e,n){return function(i){return n(Ki(t,e,i))}};function Ji(t,e,n,i){var r=t-n,o=e-i;return Math.sqrt(r*r+o*o)}function Qi(t,e){return Math.abs(t-e)<.001}function tr(t,e){var n=ot(t),i=ot(e);return{x:n,y:i,width:rt(t)-n,height:rt(e)-i}}function er(t){return(t+2*Math.PI)%(2*Math.PI)}function nr(t,e){var n=new Lt(2);return n[0]=t,n[1]=e,n}function ir(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function rr(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function or(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function ar(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function sr(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.hypot(n,i)}function ur(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t}function hr(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}function cr(t,e,n,i){var r=e[0]-n[0],o=e[1]-n[1],a=Math.sin(i),s=Math.cos(i);return t[0]=r*s-o*a+n[0],t[1]=r*a+o*s+n[1],t}var lr,pr=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};lr=new Lt(2),Lt!=Float32Array&&(lr[0]=0,lr[1]=0);const dr=function(t,e,n,i){return Ji(t,e,n,i)},fr=function(t,e,n,i,r){return{x:(1-r)*t+r*n,y:(1-r)*e+r*i}},gr=function(t,e,n,i,r,o){var a=[n-t,i-e];if(function(t,e){return t[0]===e[0]&&t[1]===e[1]}(a,[0,0]))return Math.sqrt((r-t)*(r-t)+(o-e)*(o-e));var s=[-a[1],a[0]];ur(s,s);var u=[r-t,o-e];return Math.abs(function(t,e){return t[0]*e[0]+t[1]*e[1]}(u,s))};function yr(t,e,n,i,r,o){var a=-1,s=1/0,u=[n,i],h=20;o&&o>200&&(h=o/10);for(var c=1/h,l=c/10,p=0;p<=h;p++){var d=p*c,f=[r.apply(null,t.concat([d])),r.apply(null,e.concat([d]))];(m=Ji(u[0],u[1],f[0],f[1]))<s&&(a=d,s=m)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var g=t.length;return{x:t[g-1],y:e[g-1]}}for(s=1/0,p=0;p<32&&!(l<1e-4);p++){var y=a-l,v=a+l,m=(f=[r.apply(null,t.concat([y])),r.apply(null,e.concat([y]))],Ji(u[0],u[1],f[0],f[1]));if(y>=0&&m<s)a=y,s=m;else{var b=[r.apply(null,t.concat([v])),r.apply(null,e.concat([v]))],x=Ji(u[0],u[1],b[0],b[1]);v<=1&&x<s?(a=v,s=x):l*=.5}}return{x:r.apply(null,t.concat([a])),y:r.apply(null,e.concat([a]))}}function vr(t,e,n,i){var r=1-i;return r*r*t+2*i*r*e+i*i*n}function mr(t,e,n){var i=t+n-2*e;if(Qi(i,0))return[.5];var r=(t-e)/i;return r<=1&&r>=0?[r]:[]}function br(t,e,n,i){return 2*(1-i)*(e-t)+2*i*(n-e)}function xr(t,e,n,i,r,o,a){var s=vr(t,n,r,a),u=vr(e,i,o,a),h=fr(t,e,n,i,a),c=fr(n,i,r,o,a);return[[t,e,h.x,h.y,s,u],[s,u,c.x,c.y,r,o]]}function Sr(t,e,n,i,r,o,a){if(0===a)return(Ji(t,e,n,i)+Ji(n,i,r,o)+Ji(t,e,r,o))/2;var s=xr(t,e,n,i,r,o,.5),u=s[0],h=s[1];return u.push(a-1),h.push(a-1),Sr.apply(null,u)+Sr.apply(null,h)}const wr={box:function(t,e,n,i,r,o){var a=mr(t,n,r)[0],s=mr(e,i,o)[0],u=[t,r],h=[e,o];return void 0!==a&&u.push(vr(t,n,r,a)),void 0!==s&&h.push(vr(e,i,o,s)),tr(u,h)},length:function(t,e,n,i,r,o){return Sr(t,e,n,i,r,o,3)},nearestPoint:function(t,e,n,i,r,o,a,s){return yr([t,n,r],[e,i,o],a,s,vr)},pointDistance:function(t,e,n,i,r,o,a,s){var u=this.nearestPoint(t,e,n,i,r,o,a,s);return Ji(u.x,u.y,a,s)},interpolationAt:vr,pointAt:function(t,e,n,i,r,o,a){return{x:vr(t,n,r,a),y:vr(e,i,o,a)}},divide:function(t,e,n,i,r,o,a){return xr(t,e,n,i,r,o,a)},tangentAngle:function(t,e,n,i,r,o,a){var s=br(t,n,r,a),u=br(e,i,o,a);return er(Math.atan2(u,s))}};function Er(t,e,n,i,r){var o=1-r;return o*o*o*t+3*e*r*o*o+3*n*r*r*o+i*r*r*r}function Tr(t,e,n,i,r){var o=1-r;return 3*(o*o*(e-t)+2*o*r*(n-e)+r*r*(i-n))}function Pr(t,e,n,i){var r,o,a,s=-3*t+9*e-9*n+3*i,u=6*t-12*e+6*n,h=3*e-3*t,c=[];if(Qi(s,0))Qi(u,0)||(r=-h/u)>=0&&r<=1&&c.push(r);else{var l=u*u-4*s*h;Qi(l,0)?c.push(-u/(2*s)):l>0&&(o=(-u-(a=Math.sqrt(l)))/(2*s),(r=(-u+a)/(2*s))>=0&&r<=1&&c.push(r),o>=0&&o<=1&&c.push(o))}return c}function Cr(t,e,n,i,r,o,a,s,u){var h=Er(t,n,r,a,u),c=Er(e,i,o,s,u),l=fr(t,e,n,i,u),p=fr(n,i,r,o,u),d=fr(r,o,a,s,u),f=fr(l.x,l.y,p.x,p.y,u),g=fr(p.x,p.y,d.x,d.y,u);return[[t,e,l.x,l.y,f.x,f.y,h,c],[h,c,g.x,g.y,d.x,d.y,a,s]]}function Mr(t,e,n,i,r,o,a,s,u){if(0===u)return function(t,e){for(var n=0,i=t.length,r=0;r<i;r++)n+=Ji(t[r],e[r],t[(r+1)%i],e[(r+1)%i]);return n/2}([t,n,r,a],[e,i,o,s]);var h=Cr(t,e,n,i,r,o,a,s,.5),c=q(q([],X(h[0]),!1),[u-1],!1),l=q(q([],X(h[1]),!1),[u-1],!1);return Mr.apply(null,c)+Mr.apply(null,l)}const kr={extrema:Pr,box:function(t,e,n,i,r,o,a,s){for(var u=[t,a],h=[e,s],c=Pr(t,n,r,a),l=Pr(e,i,o,s),p=0;p<c.length;p++)u.push(Er(t,n,r,a,c[p]));for(p=0;p<l.length;p++)h.push(Er(e,i,o,s,l[p]));return tr(u,h)},length:function(t,e,n,i,r,o,a,s){return Mr(t,e,n,i,r,o,a,s,3)},nearestPoint:function(t,e,n,i,r,o,a,s,u,h,c){return yr([t,n,r,a],[e,i,o,s],u,h,Er,c)},pointDistance:function(t,e,n,i,r,o,a,s,u,h,c){var l=this.nearestPoint(t,e,n,i,r,o,a,s,u,h,c);return Ji(l.x,l.y,u,h)},interpolationAt:Er,pointAt:function(t,e,n,i,r,o,a,s,u){return{x:Er(t,n,r,a,u),y:Er(e,i,o,s,u)}},divide:function(t,e,n,i,r,o,a,s,u){return Cr(t,e,n,i,r,o,a,s,u)},tangentAngle:function(t,e,n,i,r,o,a,s,u){var h=Tr(t,n,r,a,u),c=Tr(e,i,o,s,u);return er(Math.atan2(c,h))}};const Ar=function(t){return function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var i=t[n],r=t[n+1];e+=Ji(i[0],i[1],r[0],r[1])}return e}(t)};function Or(t,e,n){var i=t[0],r=t[1];return[i+(e[0]-i)*n,r+(e[1]-r)*n]}function _r(t){return t.map((function(t,e,n){var i=e&&n[e-1].slice(-2).concat(t.slice(1)),r=e?kr.length.apply(kr,q([],X(i),!1)):0;return{s:t,ss:e?r?function(t,e){void 0===e&&(e=.5);var n=t.slice(0,2),i=t.slice(2,4),r=t.slice(4,6),o=t.slice(6,8),a=Or(n,i,e),s=Or(i,r,e),u=Or(r,o,e),h=Or(a,s,e),c=Or(s,u,e),l=Or(h,c,e);return[["C"].concat(a,h,l),["C"].concat(c,u,o)]}(i):[t,t]:[t],l:r}}))}function Nr(t,e,n){var i=_r(t),r=_r(e),o=i.length,a=r.length,s=i.filter((function(t){return t.l})).length,u=r.filter((function(t){return t.l})).length,h=i.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/s||0,c=r.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/u||0,l=n||Math.max(o,a),p=[h,c],d=[l-o,l-a],f=0,g=[i,r].map((function(t,e){return t.l===l?t.map((function(t){return t.s})):t.map((function(t,n){return f=n&&d[e]&&t.l>=p[e],d[e]-=f?1:0,f?t.ss:[t.s]})).flat()}));return g[0].length===g[1].length?g:Nr(g[0],g[1],l)}function Lr(t){return function(t){var e=0,n=0,i=0,r=0,o=0;return t.map((function(t){var a;switch(t[0]){case"M":case"Z":return i="M"===t[0]?t[1]:i,r="M"===t[0]?t[2]:r,e=i,n=r,0;default:return o=Ir.apply(0,[e,n].concat(t.slice(1))),a=X(t.slice(-2),2),e=a[0],n=a[1],o}})).reduce((function(t,e){return t+e}),0)}(t)>=0}function Ir(t,e,n,i,r,o,a,s){return 3*((s-e)*(n+r)-(a-t)*(i+o)+i*(t-r)-n*(e-o)+s*(r+t/3)-a*(o+e/3))/20}function Rr(t){return t.map((function(t){return Array.isArray(t)?Rr(t):Number.isNaN(+t)?t:+t}))}function Dr(e,n,i){var r=i.getGeometryBounds();if(r){var o=i.geometry;if(o&&o.contentBounds){var a=Xt(Ft(),Wt.apply(t,q([],X(r.halfExtents.map((function(t){return 2*t}))),!1)),Yt(Ft(),ci(n||Ft()),ci(e||Ft())));o.contentBounds.update(Yt(o.contentBounds.center,o.contentBounds.center,a),o.contentBounds.halfExtents),o.renderBounds.update(Yt(o.renderBounds.center,o.renderBounds.center,a),o.renderBounds.halfExtents),bn(i)}}}function Br(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function jr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Fr(){}var Gr,Vr=.7,Wr=1/Vr,Hr="\\s*([+-]?\\d+)\\s*",zr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ur="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yr=/^#([0-9a-f]{3,8})$/,Xr=new RegExp("^rgb\\("+[Hr,Hr,Hr]+"\\)$"),qr=new RegExp("^rgb\\("+[Ur,Ur,Ur]+"\\)$"),$r=new RegExp("^rgba\\("+[Hr,Hr,Hr,zr]+"\\)$"),Kr=new RegExp("^rgba\\("+[Ur,Ur,Ur,zr]+"\\)$"),Zr=new RegExp("^hsl\\("+[zr,Ur,Ur]+"\\)$"),Jr=new RegExp("^hsla\\("+[zr,Ur,Ur,zr]+"\\)$"),Qr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function to(){return this.rgb().formatHex()}function eo(){return this.rgb().formatRgb()}function no(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Yr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?io(e):3===n?new ao(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ro(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ro(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Xr.exec(t))?new ao(e[1],e[2],e[3],1):(e=qr.exec(t))?new ao(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=$r.exec(t))?ro(e[1],e[2],e[3],e[4]):(e=Kr.exec(t))?ro(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Zr.exec(t))?co(e[1],e[2]/100,e[3]/100,1):(e=Jr.exec(t))?co(e[1],e[2]/100,e[3]/100,e[4]):Qr.hasOwnProperty(t)?io(Qr[t]):"transparent"===t?new ao(NaN,NaN,NaN,0):null}function io(t){return new ao(t>>16&255,t>>8&255,255&t,1)}function ro(t,e,n,i){return i<=0&&(t=e=n=NaN),new ao(t,e,n,i)}function oo(t){return t instanceof Fr||(t=no(t)),t?new ao((t=t.rgb()).r,t.g,t.b,t.opacity):new ao}function ao(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function so(){return"#"+ho(this.r)+ho(this.g)+ho(this.b)}function uo(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ho(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function co(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new po(t,e,n,i)}function lo(t){if(t instanceof po)return new po(t.h,t.s,t.l,t.opacity);if(t instanceof Fr||(t=no(t)),!t)return new po;if(t instanceof po)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,u=(o+r)/2;return s?(a=e===o?(n-i)/s+6*(n<i):n===o?(i-e)/s+2:(e-n)/s+4,s/=u<.5?o+r:2-o-r,a*=60):s=u>0&&u<1?0:a,new po(a,s,u,t.opacity)}function po(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function fo(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Br(Fr,no,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:to,formatHex:to,formatHsl:function(){return lo(this).formatHsl()},formatRgb:eo,toString:eo}),Br(ao,(function(t,e,n,i){return 1===arguments.length?oo(t):new ao(t,e,n,null==i?1:i)}),jr(Fr,{brighter:function(t){return t=null==t?Wr:Math.pow(Wr,t),new ao(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Vr:Math.pow(Vr,t),new ao(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:so,formatHex:so,formatRgb:uo,toString:uo})),Br(po,(function(t,e,n,i){return 1===arguments.length?lo(t):new po(t,e,n,null==i?1:i)}),jr(Fr,{brighter:function(t){return t=null==t?Wr:Math.pow(Wr,t),new po(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Vr:Math.pow(Vr,t),new po(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ao(fo(t>=240?t-240:t+120,r,i),fo(t,r,i),fo(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}})),function(t){t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t[t.Pattern=3]="Pattern"}(Gr||(Gr={}));var go=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,yo=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,vo=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,mo=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function bo(t){if(void 0===t&&(t=""),"transparent"===t)return{type:Gr.Constant,value:[0,0,0,0],formatted:"rgba(0,0,0,0)"};var e=t[0];if("("===t[1]||"("===t[2])if("l"===e){var n=function(t){var e,n=go.exec(t);if(n){var i=parseFloat(n[1])%360*(Math.PI/180),r=(null===(e=n[2].match(mo))||void 0===e?void 0:e.map((function(t){return t.split(":")})))||[],o=X([1,1],2),a=o[0],s=o[1],u=X([0,0],2),h=u[0],c=u[1],l=void 0,p=void 0;i>=0&&i<.5*Math.PI?(l={x:h,y:c},p={x:a,y:s}):.5*Math.PI<=i&&i<Math.PI?(l={x:a,y:c},p={x:h,y:s}):Math.PI<=i&&i<1.5*Math.PI?(l={x:a,y:s},p={x:h,y:c}):(l={x:h,y:s},p={x:a,y:c});var d=Math.tan(i),f=d*d,g=(p.x-l.x+d*(p.y-l.y))/(f+1)+l.x,y=d*(p.x-l.x+d*(p.y-l.y))/(f+1)+l.y;return{x0:l.x,y0:l.y,x1:g,y1:y,steps:r,hash:t}}return null}(t);if(n)return{type:Gr.LinearGradient,value:n,formatted:""}}else if("r"===e){var i=function(t){var e,n=yo.exec(t);if(n){var i=parseFloat(n[1]),r=parseFloat(n[2]),o=parseFloat(n[3]),a=(null===(e=n[4].match(mo))||void 0===e?void 0:e.map((function(t){return t.split(":")})))||[];if(0===o){var s=n[4].match(mo);return s[s.length-1].split(":")[1]}return{x0:i,y0:r,r0:0,x1:.5,y1:.5,r1:o,steps:a,hash:t}}return null}(t);if(i){if(!st(i))return{type:Gr.RadialGradient,value:i,formatted:""};t=i}}else if("p"===e){var r=function(t){var e=vo.exec(t);if(e){var n=e[1],i=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat"}return{src:i,repetition:n,hash:t}}return null}(t);if(r)return{type:Gr.Pattern,value:r,formatted:""}}var o=no(t),a=[0,0,0,0];return null!==o&&(a[0]=o.r/255,a[1]=o.g/255,a[2]=o.b/255,a[3]=o.opacity),{type:Gr.Constant,value:a,formatted:o&&"rgba("+o.r+","+o.g+","+o.b+","+o.opacity+")"||"rgba(0,0,0,0)"}}function xo(t,e){if(t.type===Gr.Constant&&e.type===Gr.Constant)return[t.value,e.value,function(t){var e=t.slice();if(e[3])for(var n=0;n<3;n++)e[n]=Math.round(ut(255*e[n],0,255));return e[3]=ut(e[3],0,1),"rgba("+e.join(",")+")"}]}function So(t,e,n){var i=La.get(Tn)(n.nodeName);if(i){var r=n.geometry;r.contentBounds||(r.contentBounds=new nn),r.renderBounds||(r.renderBounds=new nn);var o=i.update(n.parsedStyle,n),a=o.width,s=o.height,u=o.depth,h=void 0===u?0:u,c=o.x,l=void 0===c?0:c,p=o.y,d=void 0===p?0:p,f=o.offsetX,g=void 0===f?0:f,y=o.offsetY,v=void 0===y?0:y,m=o.offsetZ,b=void 0===m?0:m;n.parsedStyle.width=a,n.parsedStyle.height=s,n.parsedStyle.depth=h,n.nodeName===xn.Line||n.nodeName===xn.Polyline||n.nodeName===xn.Polygon||n.nodeName===xn.Path?(n.parsedStyle.offsetX=l-(n.parsedStyle.defX||0),n.parsedStyle.offsetY=d-(n.parsedStyle.defY||0),n.parsedStyle.defX=l,n.parsedStyle.defY=d,n.translateLocal(n.parsedStyle.offsetX,n.parsedStyle.offsetY),n.parsedStyle.x=n.style.x,n.parsedStyle.y=n.style.y):(n.parsedStyle.x=l,n.parsedStyle.y=d);var x=Wt(a/2,s/2,h/2),S=n.parsedStyle,w=S.lineWidth,E=void 0===w?0:w,T=S.anchor,P=void 0===T?[0,0]:T,C=S.shadowColor,M=S.filter,k=void 0===M?[]:M;n.nodeName===xn.Text&&delete n.parsedStyle.anchor;var A=Wt((1-2*P[0])*x[0]+g,(1-2*P[1])*x[1]+v,(1-2*(P[2]||0))*x[2]+b);if(r.contentBounds.update(A,x),E&&Ut(x,x,Wt(E/2,E/2,0)),r.renderBounds.update(A,x),C&&C.type===Gr.Constant){var O=r.renderBounds,_=O.min,N=O.max,L=n.parsedStyle,I=L.shadowBlur,R=void 0===I?0:I,D=L.shadowOffsetX,B=void 0===D?0:D,j=L.shadowOffsetY,F=void 0===j?0:j,G=_[0]-R+B,V=N[0]+R+B,W=_[1]-R+F,H=N[1]+R+F;_[0]=Math.min(_[0],G),N[0]=Math.max(N[0],V),_[1]=Math.min(_[1],W),N[1]=Math.max(N[1],H),r.renderBounds.setMinMax(_,N)}k.forEach((function(t){var e=t.name,n=t.params;if("blur"===e){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,Ut(r.renderBounds.halfExtents,r.renderBounds.halfExtents,Wt(i,i,0)))}else if("drop-shadow"===e){var o=n[0].value,a=n[1].value,s=n[2].value,u=r.renderBounds,h=u.min,c=u.max,l=h[0]-s+o,p=c[0]+s+o,d=h[1]-s+a,f=c[1]+s+a;h[0]=Math.min(h[0],l),c[0]=Math.max(c[0],p),h[1]=Math.min(h[1],d),c[1]=Math.max(c[1],f),r.renderBounds.setMinMax(h,c)}})),bn(n)}}function wo(t,e,n){var i=n.parsedStyle,r=i.x,o=void 0===r?0:r,a=i.y,s=void 0===a?0:a;n.setLocalPosition(o,s)}function Eo(t){return t.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function To(t){return"number"==typeof t?t:/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?Number(t):0}function Po(t,e){return[t,e,Eo]}function Co(t,e){return function(n,i){return[n,i,function(n){return Eo(ut(n,t,e))}]}}function Mo(t,e){if(t.length==e.length)return[t,e,function(t){return t}]}function ko(t,e,n){if(t&&t!==e&&t.style.offsetPathTargets){var i=t.style.offsetPathTargets.indexOf(n);t.style.offsetPathTargets.splice(i,1)}e&&(e.style.offsetPathTargets||(e.style.offsetPathTargets=[]),e.style.offsetPathTargets.push(n))}function Ao(t,e,n){if(n.attributes.offsetPath){var i=n.attributes.offsetPath.nodeName;if(i===xn.Line||i===xn.Path||i===xn.Polyline){var r=n.attributes.offsetPath.getPoint(e);r&&n.setLocalPosition(r.x,r.y)}}}function Oo(t,e,n){if(t&&t!==e&&t.style.clipPathTargets){var i=t.style.clipPathTargets.indexOf(n);t.style.clipPathTargets.splice(i,1)}e&&(e.style.clipPathTargets||(e.style.clipPathTargets=[]),e.style.clipPathTargets.push(n)),bn(n)}function _o(t,e,n){if(n.parentNode){var i=n.parentNode,r=i.renderable,o=i.sortable;r&&(r.dirty=!0),o&&(o.dirty=!0)}}function No(t){return"px"===t||"%"===t}function Lo(t){return"deg"===t||"rad"===t||"turn"===t}function Io(t,e){if("0"===(e=e.trim().toLowerCase())){if("px".search(t)>=0)return{unit:"px",value:0};if("%".search(t)>=0)return{unit:"%",value:0}}if(n=Number(e),ht(n)&&isFinite(n))return{unit:"",value:Number(e)};var n,i=[];e=e.replace(t,(function(t){return i.push(t),"U"+t}));var r="U("+t.source+")";return i.map((function(t){return{unit:t,value:Number(e.replace(new RegExp("U"+t,"g"),"").replace(new RegExp(r,"g"),"*0"))}}))[0]}function Ro(t,e,n,i,r){void 0===i&&(i=null),void 0===r&&(r=0);var o=t.unit,a=t.value||0,s=e.value||0;return(No(t.unit)||No(e.unit))&&(a=Fo(t,r,i),s=Fo(e,r,i),o="px"),(Lo(t.unit)||Lo(e.unit))&&(a=Go(t),s=Go(e),o="deg"),[a,s,function(t){return n&&(t=Math.max(t,0)),Eo(t)+o}]}var Do=Io.bind(null,new RegExp("px","g")),Bo=Io.bind(null,new RegExp("px|%","g")),jo=Io.bind(null,/deg|rad|grad|turn/g);function Fo(t,e,n){if("px"===t.unit)return Number(t.value);if("%"===t.unit&&n){var i=n.getBounds(),r=0;return i&&(r=2*i.halfExtents[e]),Number(t.value)/100*r}return 0}function Go(t){var e=0;return"deg"===t.unit?e=Number(t.value):"rad"===t.unit?e=li(Number(t.value)):"turn"===t.unit&&(e=360*Number(t.value)),e}function Vo(t,e,n){n.setOrigin(e[0],e[1],e[2])}function Wo(t,e,n){var i,r,o=e.split(" ");if(1===o.length&&("top"===o[0]||"bottom"===o[0]?(o[1]=o[0],o[0]="center"):o[1]="center"),2===o.length){var a=Bo(Ho(o[0])),s=Bo(Ho(o[1]));a&&(i=Fo(a,0,n)),s&&(r=Fo(s,1,n))}gt(i)||gt(r)||n.setOrigin([i,r])}function Ho(t){return"center"===t?"50%":"left"===t||"top"===t?"0":"right"===t||"bottom"===t?"100%":t}var zo=null,Uo={unit:"px",value:0},Yo={unit:"deg",value:0};function Xo(t){return function(e){var n=0;return t.map((function(t){return t===zo?e[n++]:t}))}}function qo(t){return t}var $o={rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],scale:["Nn",Xo([zo,zo,1]),qo],scalex:["N",Xo([zo,1,1]),Xo([zo,1])],scaley:["N",Xo([1,zo,1]),Xo([1,zo])],scalez:["N",Xo([1,1,zo])],scale3d:["NNN",qo],translate:["Tt",Xo([zo,zo,Uo]),qo],translatex:["T",Xo([zo,Uo,Uo]),Xo([zo,Uo])],translatey:["T",Xo([Uo,zo,Uo]),Xo([Uo,zo])],translatez:["L",Xo([Uo,Uo,zo])],translate3d:["TTL",qo]};function Ko(t){if("none"===(t=t.toLowerCase().trim()))return[];for(var e,n=/\s*(\w+)\(([^)]*)\)/g,i=[],r=0;e=n.exec(t);){if(e.index!==r)return[];r=e.index+e[0].length;var o=e[1],a=$o[o];if(!a)return[];var s=e[2].split(","),u=a[0];if(u.length<s.length)return[];for(var h=[],c=0;c<u.length;c++){var l,p=s[c],d=u[c];if(void 0===(l=p?{A:function(t){return"0"===t.trim()?Yo:jo(t)},N:To,T:Bo,L:Do}[d.toUpperCase()](p):{a:Yo,n:h[0],t:Uo}[d]))return[];h.push(l)}if(i.push({t:o,d:h}),n.lastIndex===t.length)return i}return[]}function Zo(t){return t.replace(/[xy]/,"")}function Jo(t){return t.replace(/(x|y|z|3d)?$/,"3d")}function Qo(t,e,n){var i=!1;if(!t.length||!e.length){t.length||(i=!0,t=e,e=[]);for(var r=function(n){var i=t[n],r=i.t,o=i.d,a="scale"===r.substr(0,5)?1:0;e.push({t:r,d:o.map((function(t){return"number"==typeof t?a:{unit:t.unit,value:a}}))})},o=0;o<t.length;o++)r(o)}var a,s,u=[],h=[],c=[];if(t.length!==e.length);else for(o=0;o<t.length;o++){var l=t[o].t,p=e[o].t,d=t[o].d,f=e[o].d,g=$o[l],y=$o[p],v=void 0;if(s=p,("perspective"!==(a=l)||"perspective"!==s)&&("matrix"!==a&&"matrix3d"!==a||"matrix"!==s&&"matrix3d"!==s)){if(l===p)v=l;else if(g[2]&&y[2]&&Zo(l)===Zo(p))v=Zo(l),d=g[2](d),f=y[2](f);else{if(!g[1]||!y[1]||Jo(l)!==Jo(p))break;v=Jo(l),d=g[1](d),f=y[1](f)}for(var m=[],b=[],x=[],S=0;S<d.length;S++){var w=("number"==typeof d[S]?Po:Ro)(d[S],f[S],!1,n,S);m[S]=w[0],b[S]=w[1],x.push(w[2])}u.push(m),h.push(b),c.push([v,x])}}if(i){var E=u;u=h,h=E}return[u,h,function(t){return t.map((function(t,e){var n=t.map((function(t,n){return c[e][1][n](t)})).join(",");return"matrix"===c[e][0]&&16===n.split(",").length&&(c[e][0]="matrix3d"),c[e][0]+"("+n+")"})).join(" ")}]}function ta(t,e,n){var i=function(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var o=t[i];e.has(o)||(n.push(o),e.set(o,!0))}return n}(q(q([],X((t||[]).map((function(t){return t.t}))),!1),X((e||[]).map((function(t){return t.t}))),!1));i.forEach((function(i){var r=(e||[]).find((function(t){return t.t===i})),o=(t||[]).find((function(t){return t.t===i}));if("scale"===i){var a=r&&r.d||[1,1],s=o&&o.d||[1,1];n.scaleLocal(a[0]/s[0],a[1]/s[1],1)}else if("scalex"===i)a=r&&r.d||[1],s=o&&o.d||[1],n.scaleLocal(a[0]/s[0],1,1);else if("scaley"===i)a=r&&r.d||[1],s=o&&o.d||[1],n.scaleLocal(1,a[0]/s[0],1);else if("scalez"===i)a=r&&r.d||[1],s=o&&o.d||[1],n.scaleLocal(1,1,a[0]/s[0]);else if("scale3d"===i)a=r&&r.d||[1,1,1],s=o&&o.d||[1,1,1],n.scaleLocal(a[0]/s[0],a[1]/s[1],a[2]/s[2]);else if("translate"===i){var u=r&&r.d||[Uo,Uo],h=o&&o.d||[Uo,Uo];n.translateLocal(u[0].value-h[0].value,u[1].value-h[1].value,0)}else if("translatex"===i)u=r&&r.d||[Uo],h=o&&o.d||[Uo],n.translateLocal(u[0].value-h[0].value,0,0);else if("translatey"===i)u=r&&r.d||[Uo],h=o&&o.d||[Uo],n.translateLocal(0,u[0].value-h[0].value,0);else if("translatez"===i)u=r&&r.d||[Uo],h=o&&o.d||[Uo],n.translateLocal(0,0,u[0].value-h[0].value);else if("translate3d"===i)u=r&&r.d||[Uo,Uo,Uo],h=o&&o.d||[Uo,Uo,Uo],n.translateLocal(u[0].value-h[0].value,u[1].value-h[1].value,u[2].value-h[2].value);else if("rotate"===i){var c=r&&r.d||[Yo],l=o&&o.d||[Yo];n.rotateLocal(0,0,c[0].value-l[0].value)}else"rotatex"===i?(c=r&&r.d||[Yo],l=o&&o.d||[Yo],n.rotateLocal(c[0].value-l[0].value,0,0)):"rotatey"===i?(c=r&&r.d||[Yo],l=o&&o.d||[Yo],n.rotateLocal(0,c[0].value-l[0].value,0)):"rotatez"===i&&(c=r&&r.d||[Yo],l=o&&o.d||[Yo],n.rotateLocal(0,0,c[0].value-l[0].value))}))}var ea=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,na=/[^\s\,]+/gi;var ia="\t\n\v\f\r   ᠎             　\u2028\u2029",ra=new RegExp("([a-z])["+ia+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+ia+"]*,?["+ia+"]*)+)","ig"),oa=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+ia+"]*,?["+ia+"]*","ig"),aa=/[a-z]/;function sa(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function ua(t){var e=function(t){if(!t)return null;if(Q(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(ra,(function(t,i,r){var o=[],a=i.toLowerCase();if(r.replace(oa,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([i].concat(o.splice(0,2))),a="l",i="m"===i?"l":"L"),"o"===a&&1===o.length&&n.push([i,o[0]]),"r"===a)n.push([i].concat(o));else for(;o.length>=e[a]&&(n.push([i].concat(o.splice(0,e[a]))),e[a]););return""})),n}(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,i=0;i<e.length;i++){var r=e[i][0];if(aa.test(r)||["V","H","T","S"].indexOf(r)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,u=0,h=0,c=0,l=e[0];"M"!==l[0]&&"m"!==l[0]||(u=a=+l[1],h=s=+l[2],c++,o[0]=["M",a,s]),i=c;for(var p=e.length;i<p;i++){var d=e[i],f=o[i-1],g=[],y=(r=d[0]).toUpperCase();if(r!==y)switch(g[0]=y,y){case"A":g[1]=d[1],g[2]=d[2],g[3]=d[3],g[4]=d[4],g[5]=d[5],g[6]=+d[6]+a,g[7]=+d[7]+s;break;case"V":g[1]=+d[1]+s;break;case"H":g[1]=+d[1]+a;break;case"M":u=+d[1]+a,h=+d[2]+s,g[1]=u,g[2]=h;break;default:for(var v=1,m=d.length;v<m;v++)g[v]=+d[v]+(v%2?a:s)}else g=e[i];switch(y){case"Z":a=+u,s=+h;break;case"H":g=["L",a=g[1],s];break;case"V":g=["L",a,s=g[1]];break;case"T":a=g[1],s=g[2];var b=sa([f[1],f[2]],[f[3],f[4]]);g=["Q",b[0],b[1],a,s];break;case"S":a=g[g.length-2],s=g[g.length-1];var x=f.length,S=sa([f[x-4],f[x-3]],[f[x-2],f[x-1]]);g=["C",S[0],S[1],g[1],g[2],a,s];break;case"M":u=g[g.length-2],h=g[g.length-1];break;default:a=g[g.length-2],s=g[g.length-1]}o.push(g)}return o}var ha=2*Math.PI,ca=function(t,e,n,i,r,o,a){var s=t.x,u=t.y;return{x:i*(s*=e)-r*(u*=n)+o,y:r*s+i*u+a}},la=function(t,e){var n=1.5707963267948966===e?.551915024494:-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),i=Math.cos(t),r=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:i-r*n,y:r+i*n},{x:o+a*n,y:a-o*n},{x:o,y:a}]},pa=function(t,e,n,i){var r=t*n+e*i;return r>1&&(r=1),r<-1&&(r=-1),(t*i-e*n<0?-1:1)*Math.acos(r)};function da(t,e,n,i,r,o,a,s,u){return function(t){var e=t.px,n=t.py,i=t.cx,r=t.cy,o=t.rx,a=t.ry,s=t.xAxisRotation,u=void 0===s?0:s,h=t.largeArcFlag,c=void 0===h?0:h,l=t.sweepFlag,p=void 0===l?0:l,d=[];if(0===o||0===a)return[{x1:0,y1:0,x2:0,y2:0,x:i,y:r}];var f=Math.sin(u*ha/360),g=Math.cos(u*ha/360),y=g*(e-i)/2+f*(n-r)/2,v=-f*(e-i)/2+g*(n-r)/2;if(0===y&&0===v)return[{x1:0,y1:0,x2:0,y2:0,x:i,y:r}];o=Math.abs(o),a=Math.abs(a);var m=Math.pow(y,2)/Math.pow(o,2)+Math.pow(v,2)/Math.pow(a,2);m>1&&(o*=Math.sqrt(m),a*=Math.sqrt(m));var b=function(t,e,n,i,r,o,a,s,u,h,c,l){var p=Math.pow(r,2),d=Math.pow(o,2),f=Math.pow(c,2),g=Math.pow(l,2),y=p*d-p*g-d*f;y<0&&(y=0),y/=p*g+d*f;var v=(y=Math.sqrt(y)*(a===s?-1:1))*r/o*l,m=y*-o/r*c,b=h*v-u*m+(t+n)/2,x=u*v+h*m+(e+i)/2,S=(c-v)/r,w=(l-m)/o,E=(-c-v)/r,T=(-l-m)/o,P=pa(1,0,S,w),C=pa(S,w,E,T);return 0===s&&C>0&&(C-=ha),1===s&&C<0&&(C+=ha),[b,x,P,C]}(e,n,i,r,o,a,c,p,f,g,y,v),x=b[0],S=b[1],w=b[2],E=b[3],T=Math.abs(E)/(ha/4);Math.abs(1-T)<1e-7&&(T=1);var P=Math.max(Math.ceil(T),1);E/=P;for(var C=0;C<P;C++)d.push(la(w,E)),w+=E;return d.map((function(t){var e=ca(t[0],o,a,g,f,x,S),n=e.x,i=e.y,r=ca(t[1],o,a,g,f,x,S),s=r.x,u=r.y,h=ca(t[2],o,a,g,f,x,S);return{x1:n,y1:i,x2:s,y2:u,x:h.x,y:h.y}}))}({px:t,py:e,cx:s,cy:u,rx:n,ry:i,xAxisRotation:r,largeArcFlag:o,sweepFlag:a}).reduce((function(t,e){var n=e.x1,i=e.y1,r=e.x2,o=e.y2,a=e.x,s=e.y;return t.push(n,i,r,o,a,s),t}),[])}function fa(t,e,n,i,r,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*i,a*r+s*n,a*o+s*i,r,o]}function ga(t,e,n,i){return[t,e,n,i,n,i]}function ya(t,e){"TQ".indexOf(t[0])<0&&(e.qx=null,e.qy=null);var n=t.slice(1),i=n[0],r=n[1];switch(t[0]){case"M":return e.x=i,e.y=r,t;case"A":return["C"].concat(da.apply(0,[e.x1,e.y1].concat(t.slice(1))));case"Q":return e.qx=i,e.qy=r,["C"].concat(fa.apply(0,[e.x1,e.y1].concat(t.slice(1))));case"L":return["C"].concat(ga(e.x1,e.y1,t[1],t[2]));case"H":return["C"].concat(ga(e.x1,e.y1,t[1],e.y1));case"V":return["C"].concat(ga(e.x1,e.y1,e.x1,t[1]));case"Z":return["C"].concat(ga(e.x1,e.y1,e.x,e.y))}return t}function va(t,e,n){if(t[n].length>7){t[n].shift();for(var i=t[n],r=n;i.length;)e[n]="A",t.splice(r+=1,0,["C"].concat(i.splice(0,6)));t.splice(n,1)}}function ma(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ba(t,e){return ma(t)*ma(e)?(t[0]*e[0]+t[1]*e[1])/(ma(t)*ma(e)):1}function xa(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(ba(t,e))}function Sa(t,e){return t[0]===e[0]&&t[1]===e[1]}function wa(t,e){var n,i,r,o=e[1],a=e[2],s=(r=e[3],n=pt*r,i=2*Math.PI,(n%i+i)%i),u=e[4],h=e[5],c=t[0],l=t[1],p=e[6],d=e[7],f=Math.cos(s)*(c-p)/2+Math.sin(s)*(l-d)/2,g=-1*Math.sin(s)*(c-p)/2+Math.cos(s)*(l-d)/2,y=f*f/(o*o)+g*g/(a*a);y>1&&(o*=Math.sqrt(y),a*=Math.sqrt(y));var v=o*o*(g*g)+a*a*(f*f),m=v?Math.sqrt((o*o*(a*a)-v)/v):1;u===h&&(m*=-1),isNaN(m)&&(m=0);var b=a?m*o*g/a:0,x=o?m*-a*f/o:0,S=(c+p)/2+Math.cos(s)*b-Math.sin(s)*x,w=(l+d)/2+Math.sin(s)*b+Math.cos(s)*x,E=[(f-b)/o,(g-x)/a],T=[(-1*f-b)/o,(-1*g-x)/a],P=xa([1,0],E),C=xa(E,T);return ba(E,T)<=-1&&(C=Math.PI),ba(E,T)>=1&&(C=0),0===h&&C>0&&(C-=2*Math.PI),1===h&&C<0&&(C+=2*Math.PI),{cx:S,cy:w,rx:Sa(t,[p,d])?0:o,ry:Sa(t,[p,d])?0:a,startAngle:P,endAngle:P+C,xRotation:s,arcFlag:u,sweepFlag:h}}function Ea(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}var Ta=function(){function t(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i,this.left=t,this.right=t+n,this.top=e,this.bottom=e+i,this.width=n,this.height=i,this.x=t,this.y=e}return t.prototype.toJSON=function(){},t}();function Pa(t){var e=ua(t),n=function(t){for(var e=!1,n=t.length,i=0;i<n;i++){var r=t[i][0];if("C"===r||"A"===r||"Q"===r){e=!0;break}}return e}(e),i=e.slice(),r=function(t){for(var e=[],n=[],i=[],r=0;r<t.length;r++){var o=t[r],a=o[0];"M"===a?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):"Z"===a?i.length&&(e.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:e,polylines:n}}(i),o=r.polygons,a=r.polylines,s=X(function(t,e){void 0===e&&(e=!1);for(var n,i,r=ua(t),o={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},a=[],s="",u=r.length,h=[],c=0;c<u;c+=1)r[c]&&(s=r[c][0]),a[c]=s,r[c]=ya(r[c],o),va(r,a,c),u=r.length,"Z"===s&&h.push(c),i=(n=r[c]).length,o.x1=+n[i-2],o.y1=+n[i-1],o.x2=+n[i-4]||o.x1,o.y2=+n[i-3]||o.y1;return e?[r,h]:r}(i,!0),2),u=s[0],h=s[1],c=function(t){for(var e=[],n=null,i=null,r=null,o=0,a=(t=function(t){var e=t||[];return Q(e)?e:st(e)?(e=e.match(ea),et(e,(function(t,n){if((t=t.match(na))[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}et(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0}(t)).length,s=0;s<a;s++){var u=t[s];i=t[s+1];var h=u[0],c={command:h,prePoint:n,params:u,startTangent:null,endTangent:null};switch(h){case"M":r=[u[1],u[2]],o=s;break;case"A":var l=wa(n,u);c.arcParams=l}if("Z"===h)n=r,i=t[o+1];else{var p=u.length;n=[u[p-2],u[p-1]]}i&&"Z"===i[0]&&(i=t[o],e[o]&&(e[o].prePoint=n)),c.currentPoint=n,e[o]&&Sa(n,e[o].currentPoint)&&(e[o].prePoint=c.prePoint);var d=i?[i[i.length-2],i[i.length-1]]:null;c.nextPoint=d;var f=c.prePoint;if(["L","H","V"].includes(h))c.startTangent=[f[0]-n[0],f[1]-n[1]],c.endTangent=[n[0]-f[0],n[1]-f[1]];else if("Q"===h){var g=[u[1],u[2]];c.startTangent=[f[0]-g[0],f[1]-g[1]],c.endTangent=[n[0]-g[0],n[1]-g[1]]}else if("T"===h)g=Ea((m=e[s-1]).currentPoint,f),"Q"===m.command?(c.command="Q",c.startTangent=[f[0]-g[0],f[1]-g[1]],c.endTangent=[n[0]-g[0],n[1]-g[1]]):(c.command="TL",c.startTangent=[f[0]-n[0],f[1]-n[1]],c.endTangent=[n[0]-f[0],n[1]-f[1]]);else if("C"===h){var y=[u[1],u[2]],v=[u[3],u[4]];c.startTangent=[f[0]-y[0],f[1]-y[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[y[0]-v[0],y[1]-v[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[v[0]-y[0],v[1]-y[1]])}else if("S"===h){var m;y=Ea((m=e[s-1]).currentPoint,f),v=[u[1],u[2]],"C"===m.command?(c.command="C",c.startTangent=[f[0]-y[0],f[1]-y[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]):(c.command="SQ",c.startTangent=[f[0]-v[0],f[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]])}else if("A"===h){var b=.001,x=c.arcParams||{},S=x.cx,w=void 0===S?0:S,E=x.cy,T=void 0===E?0:E,P=x.rx,C=void 0===P?0:P,M=x.ry,k=void 0===M?0:M,A=x.sweepFlag,O=void 0===A?0:A,_=x.startAngle,N=void 0===_?0:_,L=x.endAngle,I=void 0===L?0:L;0===O&&(b*=-1);var R=C*Math.cos(N-b)+w,D=k*Math.sin(N-b)+T;c.startTangent=[R-r[0],D-r[1]];var B=C*Math.cos(N+I+b)+w,j=k*Math.sin(N+I-b)+T;c.endTangent=[f[0]-B,f[1]-j]}e.push(c)}return e}(i),l=function(t){var e,n,i,r,o=0,a=0,s=[];return t?(t.forEach((function(e,n){i=t[n+1],r=e.length,i&&(o+=kr.length(e[r-2],e[r-1],i[1],i[2],i[3],i[4],i[5],i[6])||0)})),0===o?{curveSegments:[],totalLength:o}:(t.forEach((function(u,h){i=t[h+1],r=u.length,i&&((e=[])[0]=a/o,n=kr.length(u[r-2],u[r-1],i[1],i[2],i[3],i[4],i[5],i[6]),a+=n||0,e[1]=a/o,s.push(e))})),{curveSegments:s,totalLength:o})):{curveSegments:[],totalLength:o}}(u);return{absolutePath:e,hasArc:n,segments:c,polygons:o,polylines:a,curve:u,totalLength:l.totalLength,curveSegments:l.curveSegments,zCommandIndexes:h,rect:Ca(u)}}function Ca(t){var e=0,n=0,i=[],r=[];t.forEach((function(t){var o=X(t.slice(-2),2),a=o[0],s=o[1];if("M"===t[0])e=a,n=s,i.push(a),r.push(s);else if("C"===t[0]){var u=kr.box.apply(kr,q([],X([e,n].concat(t.slice(1))),!1));i=i.concat(u.x,u.x+u.width),r=r.concat(u.y,u.y+u.height),e=a,n=s}}));var o=Math.min.apply(0,i),a=Math.min.apply(0,r),s=Math.max.apply(0,i),u=Math.max.apply(0,r);return new Ta(o,a,s-o,u-a)}function Ma(t,e){var n=t.curve,i=e.curve,r=[n,i];n.length!==i.length&&(r=Nr(n,i));var o,a,s,u,h,c,l,p,d=Lr(r[0])!==Lr(r[1])?(a=(o=r[0]).slice(1).map((function(t,e,n){return e?n[e-1].slice(-2).concat(t.slice(1)):o[0].slice(1).concat(t.slice(1))})).map((function(t){return t.map((function(e,n){return t[t.length-n-2*(1-n%2)]}))})).reverse(),[["M"].concat(a[0].slice(0,2))].concat(a.map((function(t){return["C"].concat(t.slice(2))})))):Rr(r[0]);return[d,(s=r[1],u=d,h=s.length-1,c=[],l=0,p=function(t){var e=t.length,n=e-1;return t.map((function(i,r){return t.map((function(i,o){var a,s=r+o;return 0===o||t[s]&&"M"===t[s][0]?(a=t[s],["M"].concat(a.slice(-2))):(s>=e&&(s-=n),t[s])}))}))}(s),p.forEach((function(t,e){s.slice(1).forEach((function(t,n){l+=function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}(s[(e+n)%h].slice(-2),u[n%h].slice(-2))})),c[e]=l,l=0})),p[c.indexOf(Math.min.apply(null,c))]),function(t){return t}]}function ka(t){var e,n,i=[],r=0,o=Ar(t);return t.forEach((function(a,s){t[s+1]&&((e=[0,0])[0]=r/o,n=dr(a[0],a[1],t[s+1][0],t[s+1][1]),r+=n,e[1]=r/o,i.push(e))})),{points:t,totalLength:o,segments:i}}var Aa=Io.bind(null,/deg|rad|grad|turn|px|%/g),Oa=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function _a(t){if(void 0===t&&(t=""),"none"===(t=t.toLowerCase().trim()))return[];for(var e,n=/\s*([\w-]+)\(([^)]*)\)/g,i=[],r=0;e=n.exec(t);){if(e.index!==r)return[];if(r=e.index+e[0].length,Oa.indexOf(e[1])>-1&&i.push({name:e[1],params:e[2].split(" ").map((function(t){return Aa(t)||bo(t)}))}),n.lastIndex===t.length)return i}return[]}function Na(t){return t&&1===t.length?[t[0],t[0]]:[t[0],t[1]]}var La=k,Ia={},Ra={},Da={},Ba=I((function(t){function e(t,e,n,i){e&&(Ia[t]=e),n&&(Da[t]=n),i&&(Ra[t]||(Ra[t]=[]),Ra[t].push(i))}function n(t,n,i,r){for(var o=0;o<t.length;o++)e(t[o],n,i,r)}(0,a.GW)(w(),B.EventEmitter),t($),t({token:yn,useClass:vn}),t({token:gn,useFactory:function(t){return function(){return t.container.get(yn)}}}),t({token:wn,useClass:En}),t(Nn),t(Bn),t(kn),t(An),t(On),t(jn),t(Fn),t(Gn),t(Vn),t({token:Tn,useFactory:function(t){var e={};return function(n){return e[n]||t.container.isBoundNamed(Pn,n)&&(e[n]=t.container.getNamed(Pn,n)),e[n]}}}),n(["opacity","fillOpacity","strokeOpacity","offsetDistance"],To,Co(0,1),void 0),n(["r","rx","ry","lineWidth","width","height","shadowBlur"],To,Co(0,1/0),void 0),n(["lineDash"],Na,Mo,void 0),n(["x1","x2","y1","y2","lineDashOffset","shadowOffsetX","shadowOffsetY"],To,Po,void 0),n(["x1","x2","y1","y2","r","rx","ry","width","height","path","points","text","shadowBlur","shadowOffsetX","shadowOffsetY","lineWidth","filter","font","fontSize","fontFamily","fontStyle","fontWeight","fontVariant","lineHeight","letterSpacing","padding","wordWrap","wordWrapWidth","leading","textBaseline","textAlign","whiteSpace"],void 0,void 0,So),n(["fill","stroke","shadowColor"],bo,xo,void 0),e("clipPath",void 0,void 0,Oo),e("zIndex",void 0,void 0,_o),e("offsetPath",void 0,void 0,ko),e("offsetDistance",void 0,void 0,Ao),e("origin",void 0,void 0,Vo),e("transformOrigin",void 0,void 0,Wo),e("transform",Ko,Qo,ta),e("path",Pa,Ma,void 0),e("points",ka,void 0,void 0),n(["x","y","points","path","x1","x2","y1","y2"],void 0,void 0,wo),e("filter",_a,void 0,void 0),e("anchor",void 0,void 0,Dr)})),ja=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.currentTime=i,o.timelineTime=r,o.target=n,o.type="finish",o.bubbles=!1,o.currentTarget=n,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=i,o.timelineTime=r,o}return F(e,t),e}(Qn),Fa=0,Ga=function(){function t(t,e){this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=e,this.id=""+Fa++,this._inEffect=!!this.effect.update(0),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(t.prototype,"pending",{get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise((function(e,n){t.resolveReadyPromise=function(){e(t)},t.rejectReadyPromise=function(){n(new Error)}})),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise((function(e,n){t.resolveFinishedPromise=function(){e(t)},t.rejectFinishedPromise=function(){n(new Error)}})),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var e;t=Number(t),isNaN(t)||(this.timeline.restart(),this._paused||null===this._startTime||(this._startTime=Number(null===(e=this.timeline)||void 0===e?void 0:e.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),t=Number(t),isNaN(t))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var e=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==e&&(this.currentTime=e),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this.totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDuration",{get:function(){var t;return Number(null===(t=this.effect)||void 0===t?void 0:t.getComputedTiming().activeDuration)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_needsTick",{get:function(){return this.pending||"running"===this.playState||!this._finishedFlag},enumerable:!1,configurable:!0}),t.prototype.updatePromises=function(){var t=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==t&&("idle"===e?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===t?this.resolveReadyPromise():"pending"===e&&(this.readyPromise=void 0)),this.finishedPromise&&e!==t&&("idle"===e?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===e?this.resolveFinishedPromise():"finished"===t&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise},t.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()},t.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()},t.prototype.finish=function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this.totalDuration:0,this._startTime=this.totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},t.prototype.cancel=function(){this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises())},t.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()},t.prototype.updatePlaybackRate=function(t){this.playbackRate=t},t.prototype.targetAnimations=function(){var t;return(null===(t=this.effect)||void 0===t?void 0:t.target).getAnimations()},t.prototype.markTarget=function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)},t.prototype.unmarkTarget=function(){var t=this.targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)},t.prototype.tick=function(t,e){this._idle||this._paused||(null===this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))},t.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this.totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this.totalDuration}},t.prototype.persist=function(){throw new Error("Method not implemented.")},t.prototype.addEventListener=function(t,e,n){throw new Error("Method not implemented.")},t.prototype.removeEventListener=function(t,e,n){throw new Error("Method not implemented.")},t.prototype.dispatchEvent=function(t){throw new Error("Method not implemented.")},t.prototype.commitStyles=function(){throw new Error("Method not implemented.")},t.prototype.ensureAlive=function(){var t,e;this.playbackRate<0&&0===this.currentTime?this._inEffect=!!(null===(t=this.effect)||void 0===t?void 0:t.update(-1)):this._inEffect=!!(null===(e=this.effect)||void 0===e?void 0:e.update(this.currentTime)),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))},t.prototype.tickCurrentTime=function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=this._playbackRate>0?this.totalDuration:0),this.ensureAlive())},t.prototype.fireEvents=function(t){var e=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new ja(null,this,this.currentTime,t);setTimeout((function(){e.onfinish&&e.onfinish(n)}))}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var i=new ja(null,this,this.currentTime,t);this.onframe(i)}this._finishedFlag=!1}},t}();function Va(t){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Va(t)}function Wa(t){return("object"===("undefined"==typeof window?"undefined":Va(window))&&window.requestAnimationFrame?window.requestAnimationFrame:function(t){return setTimeout(t,16)})(t)}function Ha(t){return("object"===("undefined"==typeof window?"undefined":Va(window))&&window.cancelAnimationFrame?window.cancelAnimationFrame:clearTimeout)(t)}function za(t,e){return Number(t.id)-Number(e.id)}var Ua=function(){function t(){var t=this;this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(e){t.currentTime=e,t.discardAnimations(),0===t.animations.length?t.timelineTicking=!1:t.requestAnimationFrame(t.webAnimationsNextTick)},this.processRafCallbacks=function(e){var n=t.rafCallbacks;t.rafCallbacks=[],e<Number(t.currentTime)&&(e=Number(t.currentTime)),t.animations.sort(za),t.animations=t.tick(e,!0,t.animations)[0],n.forEach((function(t){t[1](e)})),t.applyPendingEffects()}}return t.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},t.prototype.isTicking=function(){return this.inTick},t.prototype.play=function(t){var e=new Ga(t,this);return this.animations.push(e),this.restartWebAnimationsNextTick(),e.updatePromises(),e.play(),e.updatePromises(),e},t.prototype.applyDirtiedAnimation=function(t){var e=this;if(!this.inTick){t.markTarget();var n=t.targetAnimations();n.sort(za),this.tick(Number(this.currentTime),!1,n.slice())[1].forEach((function(t){var n=e.animations.indexOf(t);-1!==n&&e.animations.splice(n,1)})),this.applyPendingEffects()}},t.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame((function(){})),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},t.prototype.destroy=function(){Ha(this.frameId)},t.prototype.applyPendingEffects=function(){this.pendingEffects.forEach((function(t){null==t||t.applyInterpolations()})),this.pendingEffects=[]},t.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter((function(t){return t.updatePromises()}))},t.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter((function(t){return"finished"!==t.playState&&"idle"!==t.playState}))},t.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},t.prototype.rAF=function(t){var e=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=Wa(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e},t.prototype.requestAnimationFrame=function(t){var e=this;return this.rAF((function(n){e.updateAnimationsPromises(),t(n),e.updateAnimationsPromises()}))},t.prototype.tick=function(t,e,n){var i,r,o=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var a=[],s=[],u=[],h=[];return n.forEach((function(n){n.tick(t,e),n._inEffect?(s.push(n.effect),n.markTarget()):(a.push(n.effect),n.unmarkTarget()),n._needsTick&&(o.ticking=!0);var i=n._inEffect||n._needsTick;n._inTimeline=i,i?u.push(n):h.push(n)})),(i=this.pendingEffects).push.apply(i,q([],X(a),!1)),(r=this.pendingEffects).push.apply(r,q([],X(s),!1)),this.ticking&&this.requestAnimationFrame((function(){})),this.inTick=!1,[u,h]},t}(),Ya=function(){function t(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=Vi,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(t.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=Xi(t),this._easing=t},enumerable:!1,configurable:!0}),t}();function Xa(t,e){if(null===t)return[];Array.isArray(t)||(t=function(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var i=t[n];Array.isArray(i)||(i=[i]);for(var r=i.length,o=0;o<r;o++){if(!e[o]){var a={};"offset"in t&&(a.offset=Number(t.offset)),"easing"in t&&(a.easing=t.easing),"composite"in t&&(a.composite=t.composite),e[o]=a}void 0!==i[o]&&null!==i[o]&&(e[o][n]=i[o])}}return e.sort((function(t,e){return(t.computedOffset||0)-(e.computedOffset||0)})),e}(t));for(var n=t.map((function(t){var n={};for(var i in(null==e?void 0:e.composite)&&(n.composite="auto"),t){var r=t[i];if("offset"===i){if(null!==r){if(r=Number(r),!isFinite(r))throw new Error("Keyframe offsets must be numbers.");if(r<0||r>1)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=r}}else if("composite"===i&&-1===["replace","add","accumulate","auto"].indexOf(r))throw new Error(r+" compositing is not supported");n[i]=r}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null==e?void 0:e.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n})),i=!0,r=-1/0,o=0;o<n.length;o++){var a=n[o].offset;if(null!=a){if(a<r)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");r=a}else i=!1}return n=n.filter((function(t){return Number(t.offset)>=0&&Number(t.offset)<=1})),i||function(){var t,e,i=n.length;n[i-1].computedOffset=Number(null!==(t=n[i-1].offset)&&void 0!==t?t:1),i>1&&(n[0].computedOffset=Number(null!==(e=n[0].offset)&&void 0!==e?e:0));for(var r=0,o=Number(n[0].computedOffset),a=1;a<i;a++){var s=Number(n[a].computedOffset);if(null!=s&&null!=o){for(var u=1;u<a-r;u++)n[r+u].computedOffset=o+(s-o)*u/(a-r);r=a,o=s}}}(),n}var qa="backwards|forwards|both|none".split("|"),$a="reverse|alternate|alternate-reverse".split("|");var Ka,Za,Ja,Qa=function(){function t(t,e,n){var i,r=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=function(t,e){return function(t,e){var n=new Ya;return e&&(n.fill="both",n.duration="auto"),"number"!=typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach((function(e){if(void 0!==t[e]&&null!==t[e]&&"auto"!==t[e]){if(("number"==typeof n[e]||"duration"===e)&&("number"!=typeof t[e]||isNaN(t[e])))return;if("fill"===e&&-1===qa.indexOf(t[e]))return;if("direction"===e&&-1===$a.indexOf(t[e]))return;n[e]=t[e]}})):n.duration=t,n}(t=function(t){return"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t}),t}(null!=t?t:{duration:"auto"}),e)}(n,!1),this.timing.effect=this,this.timing.activeDuration=(i=this.timing,Math.abs(function(t){var e;return 0===t.duration||0===t.iterations?0:("auto"===t.duration?0:Number(t.duration))*(null!==(e=t.iterations)&&void 0!==e?e:1)}(i)/(i.playbackRate||1))),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=Xa(e,this.timing),this.interpolations=function(t,e,n){var i=function(t,e){for(var n={},i=0;i<t.length;i++)for(var r in t[i])if(qi(r)){var o={offset:t[i].offset,computedOffset:t[i].computedOffset,easing:t[i].easing,easingFunction:Xi(t[i].easing)||e.easingFunction,value:t[i][r]};n[r]=n[r]||[],n[r].push(o)}return n}(t,e),r=function(t,e){var n=[];for(var i in t)for(var r=t[i],o=0;o<r.length-1;o++){var a=o,s=o+1,u=r[a].computedOffset,h=r[s].computedOffset,c=u,l=h;0===o&&(c=-1/0,0===h&&(s=a)),o===r.length-2&&(l=1/0,1===u&&(a=s)),n.push({applyFrom:c,applyTo:l,startOffset:r[a].computedOffset,endOffset:r[s].computedOffset,easingFunction:r[a].easingFunction,property:i,interpolation:$i(i,r[a].value,r[s].value,e)})}return n.sort((function(t,e){return t.startOffset-e.startOffset})),n}(i,n);return function(t,e){if(null!==e)r.filter((function(t){return e>=t.applyFrom&&e<t.applyTo})).forEach((function(n){var i=e-n.startOffset,r=n.endOffset-n.startOffset,o=0===r?0:n.easingFunction(i/r);t.style[n.property]=n.interpolation(o)}));else for(var n in i)qi(n)&&(t.style[n]=null)}}(this.normalizedKeyframes,this.timing,this.target),this.computedTiming=new Proxy(this.timing,{get:function(t,e){return"duration"===e?"auto"===t.duration?0:t.duration:"fill"===e?"auto"===t.fill?"none":t.fill:"localTime"===e?r.animation&&r.animation.currentTime||null:"currentIteration"===e?r.animation&&"running"===r.animation.playState?t.currentIteration||0:null:"progress"===e?r.animation&&"running"===r.animation.playState?t.progress||0:null:t[e]},set:function(){return!0}})}return t.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},t.prototype.update=function(t){return null!==t&&(this.timeFraction=function(t,e,n){var i=function(t,e,n){if(null===e)return 0;var i=n.delay+t+n.endDelay;return e<Math.min(n.delay,i)?1:e>=Math.min(n.delay+t,i)?2:3}(t,e,n),r=function(t,e,n,i,r){switch(i){case 1:return"backwards"===e||"both"===e?0:null;case 3:return n-r;case 2:return"forwards"===e||"both"===e?t:null;case 0:return null}}(t,n.fill,e,i,n.delay);if(null===r)return null;var o="auto"===n.duration?0:n.duration,a=function(t,e,n,i,r){var o=r;return 0===t?1!==e&&(o+=n):o+=i/t,o}(o,i,n.iterations,r,n.iterationStart),s=function(t,e,n,i,r,o){var a=t===1/0?e%1:t%1;return 0!==a||2!==n||0===i||0===r&&0!==o||(a=1),a}(a,n.iterationStart,i,n.iterations,r,o),u=function(t,e,n,i){return 2===t&&e===1/0?1/0:1===n?Math.floor(i)-1:Math.floor(i)}(i,n.iterations,s,a),h=function(t,e,n){var i=t;if("normal"!==t&&"reverse"!==t){var r=e;"alternate-reverse"===t&&(r+=1),i="normal",r!==1/0&&r%2!=0&&(i="reverse")}return"normal"===i?n:1-n}(n.direction,u,s);return n.currentIteration=u,n.progress=h,n.easingFunction(h)}(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)},t.prototype.getKeyframes=function(){return this.normalizedKeyframes},t.prototype.setKeyframes=function(t){this.normalizedKeyframes=Xa(t)},t.prototype.getComputedTiming=function(){return this.computedTiming},t.prototype.getTiming=function(){return this.timing},t.prototype.updateTiming=function(t){var e=this;Object.keys(t||{}).forEach((function(n){e.timing=t[n]}))},t}(),ts={anchor:[0,0,0],origin:[0,0,0],opacity:1,fillOpacity:1,strokeOpacity:1},es=function(t){function e(e){var n,i,r,o=t.call(this)||this;return o.activeAnimations=[],o.config=e,o.config.interactive=null!==(n=o.config.capture)&&void 0!==n?n:o.config.interactive,o.id=o.config.id||"",o.name=o.config.name||"",o.className=o.config.className||"",o.interactive=null===(i=o.config.interactive)||void 0===i||i,o.nodeName=o.config.type||xn.Group,o.config.style=G(G(G(G({},ts),{zIndex:null!==(r=o.config.zIndex)&&void 0!==r?r:0,visibility:!1===o.config.visible?"hidden":"visible"}),o.config.style),o.config.attrs),o.style=new Proxy(o.attributes,{get:function(t,e){return o.getAttribute(e)},set:function(t,e,n){return o.setAttribute(e,n),!0}}),o.initAttributes(o.config.style),La.get($).add(o.entity,o),o}return F(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),La.get($).remove(this.entity),this.getAnimations().forEach((function(t){t.cancel()}))},e.prototype.cloneNode=function(t){var e=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:G({},this.style)});return t&&this.children.forEach((function(n){var i=n.cloneNode(t);e.appendChild(i)})),e},e.prototype.initAttributes=function(t){var e=this;void 0===t&&(t={});var n=this.renderable;for(var i in t){var r=t[i];this.attributes[i]=r,this.parseStyleProperty(i,r)}var o={x:1e3,y:1e3};Object.keys(t).sort((function(t,e){return(o[t]||0)-(o[e]||0)})).forEach((function(t){e.updateStyleProperty(t,void 0,e.parsedStyle[t])})),n.dirty=!0},e.prototype.setAttribute=function(e,n,i){void 0===i&&(i=!1),!i&&Tt(n,this.attributes[e])&&"transformOrigin"!==e&&"visibility"!==e||("visibility"===e?this.forEach((function(t){t.changeAttribute(e,n)})):this.changeAttribute(e,n),t.prototype.setAttribute.call(this,e,n))},e.prototype.parseStyleProperty=function(t,e){var n=Ia[t];this.parsedStyle[t]=n?n(e,this):e},e.prototype.updateStyleProperty=function(t,e,n){var i=this,r=Ra[t];r&&r.forEach((function(t){t(e,n,i,i.sceneGraphService)}))},e.prototype.changeAttribute=function(t,e){var n=this,i=this.renderable,r=this.attributes[t],o=this.parsedStyle[t];this.attributes[t]=e,this.parseStyleProperty(t,e),this.updateStyleProperty(t,o,this.parsedStyle[t]),this.attributes.clipPathTargets&&this.attributes.clipPathTargets.length&&this.attributes.clipPathTargets.forEach((function(t){bn(t),t.emit(an.ATTRIBUTE_CHANGED,{attributeName:"clipPath",oldValue:n,newValue:n})})),i.dirty=!0,this.emit(an.ATTRIBUTE_CHANGED,{attributeName:t,oldValue:r,newValue:e})},e.prototype.setOrigin=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.sceneGraphService.setOrigin(this,ci(t,e,n)),this.attributes.origin=this.getOrigin(),this},e.prototype.getOrigin=function(){return this.sceneGraphService.getOrigin(this)},e.prototype.setPosition=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.sceneGraphService.setPosition(this,ci(t,e,n)),this.syncLocalPosition(),this},e.prototype.setLocalPosition=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.sceneGraphService.setLocalPosition(this,ci(t,e,n)),this.syncLocalPosition(),this},e.prototype.translate=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.sceneGraphService.translate(this,ci(t,e,n)),this.syncLocalPosition(),this},e.prototype.translateLocal=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.sceneGraphService.translateLocal(this,ci(t,e,n)),this.syncLocalPosition(),this},e.prototype.getPosition=function(){return this.sceneGraphService.getPosition(this)},e.prototype.getLocalPosition=function(){return this.sceneGraphService.getLocalPosition(this)},e.prototype.scale=function(t,e,n){return this.scaleLocal(t,e,n)},e.prototype.scaleLocal=function(t,e,n){return"number"==typeof t&&(t=ci(t,e=e||t,n=n||t)),this.sceneGraphService.scaleLocal(this,t),this},e.prototype.setLocalScale=function(t,e,n){return"number"==typeof t&&(t=ci(t,e=e||t,n=n||t)),this.sceneGraphService.setLocalScale(this,t),this},e.prototype.getLocalScale=function(){return this.sceneGraphService.getLocalScale(this)},e.prototype.getScale=function(){return this.sceneGraphService.getScale(this)},e.prototype.getEulerAngles=function(){var t=X(pi(Ft(),this.sceneGraphService.getWorldTransform(this)),3);return t[0],t[1],li(t[2])},e.prototype.getLocalEulerAngles=function(){var t=X(pi(Ft(),this.sceneGraphService.getLocalRotation(this)),3);return t[0],t[1],li(t[2])},e.prototype.setEulerAngles=function(t){return this.sceneGraphService.setEulerAngles(this,0,0,t),this},e.prototype.setLocalEulerAngles=function(t){return this.sceneGraphService.setLocalEulerAngles(this,0,0,t),this},e.prototype.rotateLocal=function(t,e,n){return gt(e)&&gt(n)?this.sceneGraphService.rotateLocal(this,0,0,t):this.sceneGraphService.rotateLocal(this,t,e,n),this},e.prototype.rotate=function(t,e,n){return gt(e)&&gt(n)?this.sceneGraphService.rotate(this,0,0,t):this.sceneGraphService.rotate(this,t,e,n),this},e.prototype.getRotation=function(){return this.sceneGraphService.getRotation(this)},e.prototype.getLocalRotation=function(){return this.sceneGraphService.getLocalRotation(this)},e.prototype.getLocalTransform=function(){return this.sceneGraphService.getLocalTransform(this)},e.prototype.getWorldTransform=function(){return this.sceneGraphService.getWorldTransform(this)},e.prototype.resetLocalTransform=function(){this.sceneGraphService.resetLocalTransform(this)},e.prototype.syncLocalPosition=function(){var t=this.getLocalPosition();this.attributes.x=t[0],this.attributes.y=t[1]},e.prototype.getAnimations=function(){return this.activeAnimations},e.prototype.animate=function(t,e){var n,i,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return this.attributes.clipPathTargets&&this.attributes.clipPathTargets.length&&(r=null===(i=this.attributes.clipPathTargets[0].ownerDocument)||void 0===i?void 0:i.timeline),this.parsedStyle.transform=void 0,r?r.play(new Qa(this,t,e)):null},e.prototype.show=function(){this.style.visibility="visible"},e.prototype.hide=function(){this.style.visibility="hidden"},e.prototype.isVisible=function(){var t=this.cullable;return"visible"===this.style.visibility&&(!t||t&&!t.isCulled())},e.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,q([],X(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))),!1))+1),this},e.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,q([],X(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))),!1))-1),this},e.prototype.getCount=function(){return this.childElementCount},e.prototype.getParent=function(){return this.parentElement},e.prototype.getChildren=function(){return this.children},e.prototype.getFirst=function(){return this.firstElementChild},e.prototype.getLast=function(){return this.lastElementChild},e.prototype.getChildByIndex=function(t){return this.children[t]||null},e.prototype.add=function(t,e){return this.appendChild(t,e)},e.prototype.setClip=function(t){this.style.clipPath=t},e.prototype.getClip=function(){return this.style.clipPath||null},e.prototype.set=function(t,e){this.config[t]=e},e.prototype.get=function(t){return this.config[t]},e.prototype.getConfig=function(){return this.config},e.prototype.attr=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=X(e,2),r=i[0],o=i[1];return r?tt(r)?(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),this):2===e.length?(this.setAttribute(r,o),this):this.attributes[r]:this.attributes},e.prototype.moveTo=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.setPosition(t,e,n),this},e.prototype.move=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.setPosition(t,e,n),this},e.prototype.setZIndex=function(t){return this.style.zIndex=t,this},e.prototype.getMatrix=function(){var t=this.getWorldTransform(),e=X(Ke(Ft(),t),2),n=e[0],i=e[1],r=X(Ze(Ft(),t),2),o=r[0],a=r[1],s=Je(De(),t),u=X(pi(Ft(),s),3),h=u[0],c=(u[1],u[2]);return di(h||c,n,i,o,a)},e.prototype.setMatrix=function(t){var e=t[0],n=t[3],i=t[1],r=t[4],o=Math.sqrt(e*e+n*n),a=Math.sqrt(i*i+r*r);e*r-n*i<0&&(e<r?o=-o:a=-a),o&&(e*=1/o,n*=1/o),a&&(i*=1/a,r*=1/a);var s=Math.atan2(n,e);this.setEulerAngles(s).setPosition(t[6],t[7]).setLocalScale(o,a)},e}(ri),ns=function(t){function e(e){var n=e||{},i=n.style,r=V(n,["style"]);return t.call(this,G({type:xn.Group,style:G({},i)},r))||this}return F(e,t),e}(es),is=function(t){function e(){var e=t.call(this)||this;return e.defaultView=null,e.ownerDocument=null,e.nodeName="document",e.timeline=new Ua,e.documentElement=new ns({id:"g-root"}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e}return F(e,t),Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),e.prototype.createElement=function(t,e){return new(this.defaultView.customElements.get(t))(e)},e.prototype.cloneNode=function(t){throw new Error("Method not implemented.")},e.prototype.destroy=function(){try{this.documentElement.destroy()}catch(t){}this.timeline.destroy()},e.prototype.appendChild=function(t,e){throw new Error("Use document.documentElement instead.")},e.prototype.insertBefore=function(t,e){throw new Error("Use document.documentElement instead.")},e.prototype.removeChild=function(t,e){throw new Error("Use document.documentElement instead.")},e.prototype.replaceChild=function(t,e,n){throw new Error("Use document.documentElement instead.")},e.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Use document.documentElement instead.")},e.prototype.prepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Use document.documentElement instead.")},e.prototype.getElementById=function(t){return this.documentElement.getElementById(t)},e.prototype.getElementsByName=function(t){return this.documentElement.getElementsByName(t)},e.prototype.getElementsByTagName=function(t){return this.documentElement.getElementsByTagName(t)},e.prototype.getElementsByClassName=function(t){return this.documentElement.getElementsByClassName(t)},e.prototype.querySelector=function(t){return this.documentElement.querySelector(t)},e.prototype.querySelectorAll=function(t){return this.documentElement.querySelectorAll(t)},e.prototype.find=function(t){return this.documentElement.find(t)},e.prototype.findAll=function(t){return this.documentElement.findAll(t)},e}(ni),rs=function(t){function e(e){var n=t.call(this,e)||this;return n.handleMounted=function(t){t.target===t.currentTarget&&n.connectedCallback&&n.connectedCallback()},n.handleUnmounted=function(t){t.target===t.currentTarget&&n.disconnectedCallback&&n.disconnectedCallback()},n.handleAttributeChanged=function(t){if(t.target===n){var e=t.detail,i=e.attributeName,r=e.oldValue,o=e.newValue;n.attributeChangedCallback&&n.attributeChangedCallback(i,r,o)}},n.attributeChangedCallback&&n.addEventListener(an.ATTRIBUTE_CHANGED,n.handleAttributeChanged),n.connectedCallback&&n.addEventListener(an.MOUNTED,n.handleMounted),n.disconnectedCallback&&n.addEventListener(an.UNMOUNTED,n.handleUnmounted),n}return F(e,t),e}(es),os=function(t){function e(e){var n=e.style,i=V(e,["style"]);return t.call(this,G({type:xn.Circle,style:G({r:0,anchor:[.5,.5]},n)},i))||this}return F(e,t),e}(es),as=function(t){function e(e){var n=e.style,i=V(e,["style"]);return t.call(this,G({type:xn.Ellipse,style:G({rx:0,ry:0,anchor:[.5,.5]},n)},i))||this}return F(e,t),e}(es),ss=function(t){function e(e){var n=e.style,i=V(e,["style"]);return t.call(this,G({type:xn.Image,style:G({img:""},n)},i))||this}return F(e,t),e}(es),us=function(t){function e(e){var n=e.style,i=V(e,["style"]);return t.call(this,G({type:xn.Line,style:G({x1:0,y1:0,x2:0,y2:0,lineJoin:"miter",lineCap:"butt",lineWidth:1},n)},i))||this}return F(e,t),e.prototype.getPoint=function(t){var e=this.parsedStyle,n=e.x1,i=e.y1,r=e.x2,o=e.y2,a=fr(n,i,r,o,t);return new dn(a.x,a.y)},e.prototype.getTotalLength=function(){var t=this.parsedStyle,e=t.x1,n=t.y1,i=t.x2,r=t.y2;return dr(e,n,i,r)},e}(es),hs=function(t){function e(e){var n=e.style,i=V(e,["style"]);return t.call(this,G({type:xn.Path,style:G({path:"",lineJoin:"miter",lineCap:"butt",lineWidth:1},n)},i))||this}return F(e,t),e.prototype.getTotalLength=function(){return this.parsedStyle.path.totalLength},e.prototype.getPoint=function(t){var e=0,n=0,i=this.parsedStyle.path.curve;if(!this.parsedStyle.path.curveSegments.length)return i?new dn(i[0][1],i[0][2]):null;this.parsedStyle.path.curveSegments.forEach((function(i,r){t>=i[0]&&t<=i[1]&&(e=(t-i[0])/(i[1]-i[0]),n=r)}));var r=i[n];if(gt(r)||gt(n))return null;var o=r.length,a=i[n+1],s=kr.pointAt(r[o-2],r[o-1],a[1],a[2],a[3],a[4],a[5],a[6],e),u=s.x,h=s.y;return new dn(u,h)},e.prototype.getStartTangent=function(){var t=this.parsedStyle.path.segments,e=[];if(t.length>1){var n=t[0].currentPoint,i=t[1].currentPoint,r=t[1].startTangent;e=[],r?(e.push([n[0]-r[0],n[1]-r[1]]),e.push([n[0],n[1]])):(e.push([i[0],i[1]]),e.push([n[0],n[1]]))}return e},e.prototype.getEndTangent=function(){var t=this.parsedStyle.path.segments,e=t.length,n=[];if(e>1){var i=t[e-2].currentPoint,r=t[e-1].currentPoint,o=t[e-1].endTangent;n=[],o?(n.push([r[0]-o[0],r[1]-o[1]]),n.push([r[0],r[1]])):(n.push([i[0],i[1]]),n.push([r[0],r[1]]))}return n},e}(es),cs=function(t){function e(e){var n=e.style,i=V(e,["style"]);return t.call(this,G({type:xn.Polygon,style:G({points:[]},n)},i))||this}return F(e,t),e}(es),ls=function(t){function e(e){var n=e.style,i=V(e,["style"]);return t.call(this,G({type:xn.Polyline,style:G({points:[],lineJoin:"miter",lineCap:"butt",lineWidth:1},n)},i))||this}return F(e,t),e.prototype.getTotalLength=function(){return this.parsedStyle.points.totalLength},e.prototype.getPoint=function(t){var e=this.parsedStyle.points,n=e.points,i=e.segments,r=0,o=0;i.forEach((function(e,n){t>=e[0]&&t<=e[1]&&(r=(t-e[0])/(e[1]-e[0]),o=n)}));var a=fr(n[o][0],n[o][1],n[o+1][0],n[o+1][1],r),s=a.x,u=a.y;return new dn(s,u)},e.prototype.getStartTangent=function(){var t=this.parsedStyle.points.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.parsedStyle.points.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(es),ps=function(t){function e(e){var n=e.style,i=V(e,["style"]);return t.call(this,G({type:xn.Rect,style:G({width:0,height:0},n)},i))||this}return F(e,t),e}(es),ds=function(t){function e(e){var n=e.style,i=V(e,["style"]);return t.call(this,G({type:xn.Text,style:G({text:"",fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"alphabetic",dropShadow:!1,dropShadowDistance:5,fill:"#000",letterSpacing:0,lineHeight:0,lineJoin:"miter",lineCap:"butt",lineWidth:0,miterLimit:10,padding:0,stroke:"#000",whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},n)},i))||this}return F(e,t),e.prototype.getLineBoundingRects=function(){var t;return(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.lineMetrics)||[]},e}(es),fs=function(t){function e(e){var n=e.style,i=V(e,["style"]),r=t.call(this,G({type:xn.HTML,style:G({innerHTML:"",className:"",style:""},n)},i))||this;return r.cullable.enable=!1,r}return F(e,t),e.prototype.getDomElement=function(){return this.parsedStyle.$el},e.prototype.getBoundingClientRect=function(){return this.parsedStyle.$el.getBoundingClientRect()},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.getBounds=function(){var t,e,n=this.getBoundingClientRect(),i=null===(e=null===(t=this.ownerDocument)||void 0===t?void 0:t.defaultView)||void 0===e?void 0:e.getContextService().getBoundingClientRect();if(i){var r=n.left-i.left,o=n.top-i.top,a=new nn;return a.setMinMax(Wt(r,o,0),Wt(r+n.width,o+n.height,0)),a}return null},e.prototype.getLocalBounds=function(){if(this.parentNode){var t=Xe(ze(),this.parentNode.getWorldTransform()),e=this.getBounds();if(e){var n=new nn;return n.setFromTransformedAABB(e,t),n}}return this.getBounds()},e}(es),gs=function(){function t(){this.registry={},this.define(xn.Circle,os),this.define(xn.Ellipse,as),this.define(xn.Rect,ps),this.define(xn.Image,ss),this.define(xn.Line,us),this.define(xn.Group,ns),this.define(xn.Path,hs),this.define(xn.Polygon,cs),this.define(xn.Polyline,ls),this.define(xn.Text,ds),this.define(xn.HTML,fs)}return t.prototype.define=function(t,e){this.registry[t]=e},t.prototype.get=function(t){return this.registry[t]},t}(),ys=function(){function t(t){this.plugins=[],this.config=G({enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableTAA:!1},t)}return t.prototype.registerPlugin=function(t){this.plugins.push(t)},t.prototype.getPlugins=function(){return this.plugins},t.prototype.getConfig=function(){return this.config},t.prototype.setConfig=function(t){Object.assign(this.config,t)},t}(),vs={},ms=0,bs=function(){function t(t,e){var n,i;this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=t,this.matrix=(n=e.matrix,(i=new Lt(16))[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i),this.right=Gt(e.right),this.up=Gt(e.up),this.forward=Gt(e.forward),this.position=Gt(e.position),this.focalPoint=Gt(e.focalPoint),this.distanceVector=Gt(e.distanceVector),this.azimuth=e.azimuth,this.elevation=e.elevation,this.roll=e.roll,this.relAzimuth=e.relAzimuth,this.relElevation=e.relElevation,this.relRoll=e.relRoll,this.dollyingStep=e.dollyingStep,this.distance=e.distance}return t.prototype.getPosition=function(){return this.position},t.prototype.getFocalPoint=function(){return this.focalPoint},t.prototype.getRoll=function(){return this.roll},t.prototype.retrieve=function(t){t.matrix=Ue(t.matrix,this.matrix),t.right=Ht(t.right,this.right),t.up=Ht(t.up,this.up),t.forward=Ht(t.forward,this.forward),t.position=Ht(t.position,this.position),t.focalPoint=Ht(t.focalPoint,this.focalPoint),t.distanceVector=Ht(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance},t}(),xs="DefaultCamera";!function(t){t.ORBITING="ORBITING",t.EXPLORING="EXPLORING",t.TRACKING="TRACKING"}(Ka||(Ka={})),function(t){t.DEFAULT="DEFAULT",t.ROTATIONAL="ROTATIONAL",t.TRANSLATIONAL="TRANSLATIONAL",t.CINEMATIC="CINEMATIC"}(Za||(Za={})),function(t){t.ORTHOGRAPHIC="ORTHOGRAPHIC",t.PERSPECTIVE="PERSPECTIVE"}(Ja||(Ja={}));var Ss="updated",ws=Math.PI/180,Es=180/Math.PI,Ts=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.matrix=ze(),e.right=Wt(1,0,0),e.up=Wt(0,1,0),e.forward=Wt(0,0,1),e.position=Wt(0,0,1),e.focalPoint=Wt(0,0,0),e.distanceVector=Wt(0,0,0),e.distance=1,e.azimuth=0,e.elevation=0,e.roll=0,e.relAzimuth=0,e.relElevation=0,e.relRoll=0,e.dollyingStep=0,e.maxDistance=1/0,e.minDistance=-1/0,e.zoom=1,e.rotateWorld=!1,e.fov=30,e.near=.1,e.far=1e4,e.aspect=1,e.projectionMatrix=ze(),e.projectionMatrixInverse=ze(),e.jitteredProjectionMatrix=void 0,e.following=void 0,e.type=Ka.EXPLORING,e.trackingMode=Za.DEFAULT,e.projectionMode=Ja.PERSPECTIVE,e.frustum=new sn,e.landmarks=[],e.orthoMatrix=ze(),e}return F(e,t),e.prototype.clone=function(){var t=new e;return t.setType(this.type,void 0),t},e.prototype.getProjectionMode=function(){return this.projectionMode},e.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},e.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},e.prototype.getFrustum=function(){return this.frustum},e.prototype.getPosition=function(){return this.position},e.prototype.getFocalPoint=function(){return this.focalPoint},e.prototype.getNear=function(){return this.near},e.prototype.getFar=function(){return this.far},e.prototype.getZoom=function(){return this.zoom},e.prototype.getOrthoMatrix=function(){return this.orthoMatrix},e.prototype.setType=function(t,e){return this.type=t,this.type===Ka.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ka.TRACKING&&void 0!==e&&this.setTrackingMode(e),this},e.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},e.prototype.setTrackingMode=function(t){if(this.type!==Ka.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},e.prototype.setWorldRotation=function(t){this.rotateWorld=t,this._getAngles()},e.prototype.getViewTransform=function(){return Xe(ze(),this.matrix)},e.prototype.getWorldTransform=function(){return this.matrix},e.prototype.jitterProjectionMatrix=function(t,e){var n,i,r=(i=[t,e,0],(n=ze())[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n);this.jitteredProjectionMatrix=qe(ze(),r,this.projectionMatrix)},e.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},e.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},e.prototype.setFov=function(t){this.setPerspective(this.near,this.far,t,this.aspect)},e.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},e.prototype.setNear=function(t){return this.projectionMode===Ja.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},e.prototype.setFar=function(t){return this.projectionMode===Ja.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},e.prototype.setViewOffset=function(t,e,n,i,r,o){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.projectionMode===Ja.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.clearViewOffset=function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Ja.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===Ja.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Ja.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},e.prototype.setPerspective=function(t,e,n,i){this.projectionMode=Ja.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=i;var r=this.near*Math.tan(.5*ws*this.fov)/this.zoom,o=2*r,a=this.aspect*o,s=-.5*a;if(void 0!==this.view&&this.view.enabled){var u=this.view.fullWidth,h=this.view.fullHeight;s+=this.view.offsetX*a/u,r-=this.view.offsetY*o/h,a*=this.view.width/u,o*=this.view.height/h}return function(t,e,n,i,r,o,a){var s=2*o/(n-e),u=2*o/(i-r),h=(n+e)/(n-e),c=(i+r)/(i-r),l=-(a+o)/(a-o),p=-2*a*o/(a-o);t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=h,t[9]=c,t[10]=l,t[11]=-1,t[12]=0,t[13]=0,t[14]=p,t[15]=0}(this.projectionMatrix,s,s+a,r-o,r,t,this.far),Xe(this.projectionMatrixInverse,this.projectionMatrix),this.emit(Ss),this},e.prototype.setOrthographic=function(t,e,n,i,r,o){this.projectionMode=Ja.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=i,this.near=r,this.far=o;var a=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,h=(this.top+this.bottom)/2,c=u-a,l=u+a,p=h+s,d=h-s;if(void 0!==this.view&&this.view.enabled){var f=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l=(c+=f*this.view.offsetX)+f*this.view.width,d=(p-=g*this.view.offsetY)-g*this.view.height}return function(t,e,n,i,r,o,a){var s=1/(e-n),u=1/(i-r),h=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*u,t[14]=(a+o)*h,t[15]=1}(this.projectionMatrix,c,l,d,p,r,o),Xe(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.emit(Ss),this},e.prototype.setPosition=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this._setPosition(t,e,n),this.setFocalPoint(this.focalPoint),this},e.prototype.setFocalPoint=function(t,e,n){var i,r,o,a,s,u,h,c,l,p,d,f,g,y=Wt(0,1,0);if(this.focalPoint=ci(t,e,n),this.trackingMode===Za.CINEMATIC){var v=Yt(Ft(),this.focalPoint,this.position);t=v[0],e=v[1],n=v[2];var m=Vt(v),b=Math.asin(e/m)*Es,x=90+Math.atan2(n,t)*Es,S=ze();i=S,r=S,o=x*ws,a=Math.sin(o),s=Math.cos(o),u=r[0],h=r[1],c=r[2],l=r[3],p=r[8],d=r[9],f=r[10],g=r[11],r!==i&&(i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15]),i[0]=u*s-p*a,i[1]=h*s-d*a,i[2]=c*s-f*a,i[3]=l*s-g*a,i[8]=u*a+p*s,i[9]=h*a+d*s,i[10]=c*a+f*s,i[11]=l*a+g*s,function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],h=e[8],c=e[9],l=e[10],p=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+h*i,t[5]=a*r+c*i,t[6]=s*r+l*i,t[7]=u*r+p*i,t[8]=h*r-o*i,t[9]=c*r-a*i,t[10]=l*r-s*i,t[11]=p*r-u*i}(S,S,b*ws),y=fe(Ft(),[0,1,0],S)}return Xe(this.matrix,function(t,e,n,i){var r,o,a,s,u,h,c,l,p,d,f=e[0],g=e[1],y=e[2],v=i[0],m=i[1],b=i[2],x=n[0],S=n[1],w=n[2];return Math.abs(f-x)<Nt&&Math.abs(g-S)<Nt&&Math.abs(y-w)<Nt?Ye(t):(c=f-x,l=g-S,p=y-w,r=m*(p*=d=1/Math.hypot(c,l,p))-b*(l*=d),o=b*(c*=d)-v*p,a=v*l-m*c,(d=Math.hypot(r,o,a))?(r*=d=1/d,o*=d,a*=d):(r=0,o=0,a=0),s=l*a-p*o,u=p*r-c*a,h=c*o-l*r,(d=Math.hypot(s,u,h))?(s*=d=1/d,u*=d,h*=d):(s=0,u=0,h=0),t[0]=r,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=l,t[7]=0,t[8]=a,t[9]=h,t[10]=p,t[11]=0,t[12]=-(r*f+o*g+a*y),t[13]=-(s*f+u*g+h*y),t[14]=-(c*f+l*g+p*y),t[15]=1,t)}(ze(),this.position,this.focalPoint,y)),this._getAxes(),this._getDistance(),this._getAngles(),this},e.prototype.setDistance=function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=Ft();t=this.distance;var n=this.forward,i=this.focalPoint;return e[0]=t*n[0]+i[0],e[1]=t*n[1]+i[1],e[2]=t*n[2]+i[2],this._setPosition(e),this}},e.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},e.prototype.setMinDistance=function(t){return this.minDistance=t,this},e.prototype.changeAzimuth=function(t){return this.setAzimuth(this.azimuth+t),this},e.prototype.changeElevation=function(t){return this.setElevation(this.elevation+t),this},e.prototype.changeRoll=function(t){return this.setRoll(this.roll+t),this},e.prototype.setAzimuth=function(t){return this.azimuth=hi(t),this.computeMatrix(),this._getAxes(),this.type===Ka.ORBITING||this.type===Ka.EXPLORING?this._getPosition():this.type===Ka.TRACKING&&this._getFocalPoint(),this},e.prototype.getAzimuth=function(){return this.azimuth},e.prototype.setElevation=function(t){return this.elevation=hi(t),this.computeMatrix(),this._getAxes(),this.type===Ka.ORBITING||this.type===Ka.EXPLORING?this._getPosition():this.type===Ka.TRACKING&&this._getFocalPoint(),this},e.prototype.setRoll=function(t){return this.roll=hi(t),this.computeMatrix(),this._getAxes(),this.type===Ka.ORBITING||this.type===Ka.EXPLORING?this._getPosition():this.type===Ka.TRACKING&&this._getFocalPoint(),this},e.prototype.rotate=function(t,e,n){if(this.relElevation=hi(e),this.relAzimuth=hi(t),this.relRoll=hi(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Ka.EXPLORING){var i=Be(De(),[1,0,0],(this.rotateWorld?1:-1)*this.relElevation*ws),r=Be(De(),[0,1,0],(this.rotateWorld?1:-1)*this.relAzimuth*ws),o=Be(De(),[0,0,1],this.relRoll*ws),a=je(De(),r,i);a=je(De(),a,o);var s=tn(ze(),a);$e(this.matrix,this.matrix,[0,0,-this.distance]),qe(this.matrix,this.matrix,s),$e(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return;this.computeMatrix()}return this._getAxes(),this.type===Ka.ORBITING||this.type===Ka.EXPLORING?this._getPosition():this.type===Ka.TRACKING&&this._getFocalPoint(),this._update(),this},e.prototype.pan=function(t,e){var n=ci(t,e,0),i=Gt(this.position);return Ut(i,i,te(Ft(),this.right,n[0])),Ut(i,i,te(Ft(),this.up,n[1])),this._setPosition(i),this.emit(Ss),this},e.prototype.dolly=function(t){var e=this.forward,n=Gt(this.position),i=this.dollyingStep,r=this.distance+t*this.dollyingStep;return i=Math.max(Math.min(r,this.maxDistance),this.minDistance)-this.distance,n[0]+=i*e[0],n[1]+=i*e[1],n[2]+=i*e[2],this._setPosition(n),this.type===Ka.ORBITING||this.type===Ka.EXPLORING?this._getDistance():this.type===Ka.TRACKING&&Ut(this.focalPoint,n,this.distanceVector),this.emit(Ss),this},e.prototype.createLandmark=function(t,e){var n=this.clone();n.setPosition(e.position),n.setFocalPoint(e.focalPoint),void 0!==e.roll&&n.setRoll(e.roll);var i=new bs(t,n);return this.landmarks.push(i),i},e.prototype.setLandmark=function(t){var e=new bs(t,this);return this.landmarks.push(e),this},e.prototype.gotoLandmark=function(t,e){var n=this;void 0===e&&(e=1e3);var i=this.landmarks.find((function(e){return e.name===t}));if(i){if(0===e)return void i.retrieve(this);void 0!==this.landmarkAnimationID&&Ha(this.landmarkAnimationID);var r,o=i.getPosition(),a=i.getFocalPoint(),s=i.getRoll();Wa((function t(i){void 0===r&&(r=i);var u,h=i-r,c=(1-Math.cos(h/e*Math.PI))/2,l=Ft(),p=Ft();if(ce(l,n.focalPoint,a,c),ce(p,n.position,o,c),u=n.roll*(1-c)+s*c,n.setFocalPoint(l),n.setPosition(p),n.setRoll(u),n.computeMatrix(),n.emit(Ss),!(Ae(l,a)+Ae(p,o)>.01))return n.setFocalPoint(l),n.setPosition(p),n.setRoll(u),void n.computeMatrix();h<e&&(n.landmarkAnimationID=Wa(t))}))}},e.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.emit(Ss)},e.prototype.computeMatrix=function(){var t=Be(De(),[0,0,1],this.roll*ws);Ye(this.matrix);var e=Be(De(),[1,0,0],(this.rotateWorld&&this.type!==Ka.TRACKING||this.type===Ka.TRACKING?1:-1)*this.elevation*ws),n=Be(De(),[0,1,0],(this.rotateWorld&&this.type!==Ka.TRACKING||this.type===Ka.TRACKING?1:-1)*this.azimuth*ws),i=je(De(),n,e);i=je(De(),i,t);var r=tn(ze(),i);this.type===Ka.ORBITING||this.type===Ka.EXPLORING?($e(this.matrix,this.matrix,this.focalPoint),qe(this.matrix,this.matrix,r),$e(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ka.TRACKING&&($e(this.matrix,this.matrix,this.position),qe(this.matrix,this.matrix,r))},e.prototype._setPosition=function(t,e,n){this.position=ci(t,e,n);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},e.prototype._getAxes=function(){Ht(this.right,ci(Re(Ie(),[1,0,0,0],this.matrix))),Ht(this.up,ci(Re(Ie(),[0,1,0,0],this.matrix))),Ht(this.forward,ci(Re(Ie(),[0,0,1,0],this.matrix))),se(this.right,this.right),se(this.up,this.up),se(this.forward,this.forward)},e.prototype._getAngles=function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],i=Vt(this.distanceVector);if(0===i)return this.elevation=0,void(this.azimuth=0);this.type===Ka.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/i)*Es,this.azimuth=Math.atan2(-t,-n)*Es):(this.elevation=-Math.asin(e/i)*Es,this.azimuth=-Math.atan2(-t,-n)*Es)},e.prototype._getPosition=function(){Ht(this.position,ci(Re(Ie(),[0,0,0,1],this.matrix))),this._getDistance()},e.prototype._getFocalPoint=function(){var t,e;ge(this.distanceVector,[0,0,-this.distance],(t=Rt(),e=this.matrix,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t)),Ut(this.focalPoint,this.position,this.distanceVector),this._getDistance()},e.prototype._getDistance=function(){this.distanceVector=Yt(Ft(),this.focalPoint,this.position),this.distance=Vt(this.distanceVector),this.dollyingStep=this.distance/100},e.prototype._getOrthoMatrix=function(){if(this.projectionMode===Ja.ORTHOGRAPHIC){var t=this.position,e=Be(De(),[0,0,1],-this.roll*Math.PI/180);Qe(this.orthoMatrix,e,Wt((this.rright-this.left)/2-t[0],(this.bottom-this.top)/2-t[1],0),Wt(this.zoom,this.zoom,1),t)}},e.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},e}(B.EventEmitter),Ps=function(){function t(){}var e;return e=t,t.prototype.apply=function(t){var n=this;t.hooks.prepare.tap(e.tag,(function(t){if(t){var e=n.canvasConfig.renderer.getConfig().enableDirtyRectangleRendering;return t.renderable.dirty||n.renderingContext.renderReasons.has(Cn.CameraChanged)||!e?t:null}return t}))},t.tag="DirtyCheckPlugin",W([T(Mn),H("design:type",Object)],t.prototype,"canvasConfig",void 0),W([T(zn),H("design:type",Object)],t.prototype,"renderingContext",void 0),e=W([E({contrib:Yn})],t)}(),Cs=r.defineToken("CullingStrategyContribution"),Ms=function(){function t(){}var e;return e=t,t.prototype.apply=function(t){var n=this,i=this.strategyProvider.getContributions();t.hooks.prepare.tap(e.tag,(function(t){if(t){var e=t.cullable;if(0===i.length?e.visible=!0:e.visible=i.every((function(e){return e.isVisible(t)})),t.isVisible())return t;if(n.canvasConfig.renderer.getConfig().enableDirtyRectangleRendering){var r=t.getRenderBounds();r&&(n.renderingContext.removedRenderBoundsList.push(r),n.renderingContext.renderReasons.add(Cn.DisplayObjectRemoved))}return null}return t})),t.hooks.afterRender.tap(e.tag,(function(t){t.cullable.visibilityPlaneMask=-1}))},t.tag="CullingPlugin",W([T(Mn),H("design:type",Object)],t.prototype,"canvasConfig",void 0),W([D(Cs),H("design:type",Object)],t.prototype,"strategyProvider",void 0),W([T(zn),H("design:type",Object)],t.prototype,"renderingContext",void 0),e=W([E({contrib:Yn})],t)}(),ks=function(){function t(){}var e;return e=t,t.prototype.apply=function(t){var n=this,i=function(){n.renderingContext.renderReasons.add(Cn.DisplayObjectChanged)},r=function(){t.dirtify()},o=function(e){bn(e.target),t.dirtify()},a=function(e){bn(e.target),t.dirtify()};t.hooks.init.tap(e.tag,(function(){n.renderingContext.root.addEventListener(an.MOUNTED,o),n.renderingContext.root.addEventListener(an.UNMOUNTED,a),n.renderingContext.root.addEventListener(an.ATTRIBUTE_CHANGED,i),n.renderingContext.root.addEventListener(an.BOUNDS_CHANGED,r)})),t.hooks.destroy.tap(e.tag,(function(){n.renderingContext.root.removeEventListener(an.MOUNTED,o),n.renderingContext.root.removeEventListener(an.UNMOUNTED,a),n.renderingContext.root.removeEventListener(an.ATTRIBUTE_CHANGED,i),n.renderingContext.root.removeEventListener(an.BOUNDS_CHANGED,r)}))},t.tag="PrepareRendererPlugin",W([T(zn),H("design:type",Object)],t.prototype,"renderingContext",void 0),e=W([E({contrib:Yn})],t)}(),As=function(){function t(){}return t.prototype.isVisible=function(t){return!0},t.prototype.computeVisibilityWithPlaneMask=function(t,e,n){if(e===en.OUTSIDE||e===en.INSIDE)return e;for(var i=en.INSIDE,r=0,o=n.length;r<o;++r){var a=r<31?1<<r:0;if(!(r<31&&0==(e&a))){var s=n[r],u=s.normal,h=s.distance;if(ue(u,t.getPositiveFarPoint(n[r]))+h<0)return en.OUTSIDE;ue(u,t.getNegativeFarPoint(n[r]))+h<0&&(i|=a)}}return i},W([E({contrib:Cs})],t)}(),Os=!!self.TouchEvent,_s=!!self.PointerEvent,Ns={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};function Ls(t){var e=[];if(function(t){return Os&&t instanceof TouchEvent}(t))for(var n=0;n<t.changedTouches.length;n++){var i=t.changedTouches[n];yt(i.button)&&(i.button=t.touches.length?1:0),yt(i.buttons)&&(i.buttons=t.touches.length?1:0),yt(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),yt(i.width)&&(i.width=i.radiusX||1),yt(i.height)&&(i.height=i.radiusY||1),yt(i.tiltX)&&(i.tiltX=0),yt(i.tiltY)&&(i.tiltY=0),yt(i.pointerType)&&(i.pointerType="touch"),yt(i.pointerId)&&(i.pointerId=i.identifier||0),yt(i.pressure)&&(i.pressure=i.force||.5),yt(i.twist)&&(i.twist=0),yt(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,e.push(i)}else if(function(t){return!self.MouseEvent||t instanceof MouseEvent&&(!_s||!(t instanceof self.PointerEvent))}(t)){var r=t;yt(r.isPrimary)&&(r.isPrimary=!0),yt(r.width)&&(r.width=1),yt(r.height)&&(r.height=1),yt(r.tiltX)&&(r.tiltX=0),yt(r.tiltY)&&(r.tiltY=0),yt(r.pointerType)&&(r.pointerType="mouse"),yt(r.pointerId)&&(r.pointerId=1),yt(r.pressure)&&(r.pressure=.5),yt(r.twist)&&(r.twist=0),yt(r.tangentialPressure)&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}else e.push(t);return e}var Is,Rs=function(){function t(){var t=this;this.autoPreventDefault=!0,this.rootPointerEvent=new ai(null),this.rootWheelEvent=new si(null),this.onPointerMove=function(e){var n,i;if(!Os||"touch"!==e.pointerType){var r=Ls(e);try{for(var o=Y(r),a=o.next();!a.done;a=o.next()){var s=a.value,u=t.bootstrapEvent(t.rootPointerEvent,s);t.eventService.mapEvent(u)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}t.setCursor(t.eventService.cursor)}}}var e;return e=t,t.prototype.apply=function(t){var n=this;this.eventService.setPickHandler((function(t){return z(n,void 0,void 0,(function(){return U(this,(function(e){switch(e.label){case 0:return[4,this.renderingService.hooks.pick.promise({position:t,picked:null})];case 1:return[2,e.sent().picked]}}))}))})),t.hooks.pointerWheel.tap(e.tag,(function(t){var e=n.normalizeWheelEvent(t);n.eventService.mapEvent(e)})),t.hooks.pointerDown.tap(e.tag,(function(t){var e,i;if(!Os||"touch"!==t.pointerType){var r=Ls(t);n.autoPreventDefault&&r[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();try{for(var o=Y(r),a=o.next();!a.done;a=o.next()){var s=a.value,u=n.bootstrapEvent(n.rootPointerEvent,s);n.eventService.mapEvent(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}n.setCursor(n.eventService.cursor)}})),t.hooks.pointerUp.tap(e.tag,(function(t){var e,i;if(!Os||"touch"!==t.pointerType){var r=n.contextService.getDomElement(),o=r&&t.target&&t.target!==r&&r.contains&&!r.contains(t.target)?"outside":"",a=Ls(t);try{for(var s=Y(a),u=s.next();!u.done;u=s.next()){var h=u.value,c=n.bootstrapEvent(n.rootPointerEvent,h);c.type+=o,n.eventService.mapEvent(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}n.setCursor(n.eventService.cursor)}})),t.hooks.pointerMove.tap(e.tag,this.onPointerMove),t.hooks.pointerOver.tap(e.tag,this.onPointerMove),t.hooks.pointerOut.tap(e.tag,this.onPointerMove)},t.prototype.bootstrapEvent=function(t,e){t._originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var n=this.eventService.client2Viewport(new dn(e.clientX,e.clientY)),i=n.x,r=n.y;t.viewport.x=i,t.viewport.y=r;var o=this.eventService.viewport2Canvas(t.viewport),a=o.x,s=o.y;return t.canvas.x=a,t.canvas.y=s,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Ns[t.type]||t.type),t},t.prototype.normalizeWheelEvent=function(t){var e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;var n=this.eventService.client2Viewport(new dn(t.clientX,t.clientY)),i=n.x,r=n.y;e.viewport.x=i,e.viewport.y=r;var o=this.eventService.viewport2Canvas(e.viewport),a=o.x,s=o.y;return e.canvas.x=a,e.canvas.y=s,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e},t.prototype.transferMouseData=function(t,e){t.isTrusted=e.isTrusted,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null},t.prototype.setCursor=function(t){this.contextService.applyCursorStyle(t||this.canvasConfig.cursor||"default")},t.tag="EventPlugin",W([T(Mn),H("design:type",Object)],t.prototype,"canvasConfig",void 0),W([T(Wn),H("design:type",Object)],t.prototype,"contextService",void 0),W([T(Xn),H("design:type",Xn)],t.prototype,"renderingService",void 0),W([T(ui),H("design:type",ui)],t.prototype,"eventService",void 0),e=W([E({contrib:Yn})],t)}(),Ds=I((function(t,e){e.container.isBound(Xn)?(e.container.remove(Yn),e.container.remove(Xn),e.container.remove(As)):(R.register(t,Yn,{cache:!1}),R.register(t,Cs,{cache:!1})),t(Xn),t(ui),t(Rs),t(ks),t(Ps),t(Ms),t(As)}));!function(t){t.READY="ready",t.BEFORE_RENDER="beforerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize"}(Is||(Is={}));var Bs=function(t){function e(e){var n=t.call(this)||this;n.container=La.createChild(),n.Element=es,n.document=new is,n.document.defaultView=n,n.customElements=new gs,function(t,e){var n="string"==typeof t?t:t.id||ms++;vs[n]&&vs[n].destroy(),vs[n]=e}(e.container,n);var i=G(G({},e),{cursor:"default"});return n.initRenderingContext(i),n.initDefaultCamera(i.width,i.height),n.initRenderer(i.renderer),n}return F(e,t),e.prototype.initRenderingContext=function(t){var e=this;this.container.register({token:Mn,useValue:t}),this.container.register({token:zn,useValue:{root:this.document.documentElement,removedRenderBoundsList:[],renderReasons:new Set,force:!1,dirty:!1}}),this.document.documentElement.addEventListener(an.CHILD_INSERTED,(function(t){e.mountChildren(t.detail.child)})),this.document.documentElement.addEventListener(an.CHILD_REMOVED,(function(t){e.unmountChildren(t.detail.child)}))},e.prototype.initDefaultCamera=function(t,e){var n=(new Ts).setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/-2,e/2,.1,1e3),i=this.container.get(zn);n.on(Ss,(function(){i.renderReasons.add(Cn.CameraChanged)})),this.container.register({token:xs,useValue:n})},e.prototype.getConfig=function(){return this.container.get(Mn)},e.prototype.getContainer=function(){return this.container},e.prototype.getRoot=function(){return this.document.documentElement},e.prototype.getCamera=function(){return this.container.get(xs)},e.prototype.getContextService=function(){return this.container.get(Wn)},e.prototype.getEventService=function(){return this.eventService},e.prototype.getRenderingService=function(){return this.renderingService},e.prototype.getRenderingContext=function(){return this.container.get(zn)},e.prototype.getStats=function(){return this.getRenderingService().getStats()},e.prototype.getComputedStyle=function(t){return t.parsedStyle},e.prototype.destroy=function(t){void 0===t&&(t=!0),this.emit(Is.BEFORE_DESTROY,(function(){})),this.frameId&&Ha(this.frameId);var e=this.getRoot();this.unmountChildren(e),t&&this.document.destroy(),this.getContextService().destroy(),this.getRenderingService().destroy(),this.emit(Is.AFTER_DESTROY,{})},e.prototype.changeSize=function(t,e){this.resize(t,e)},e.prototype.resize=function(t,e){var n=this.container.get(Mn);n.width=t,n.height=e,this.getContextService().resize(t,e);var i=this.container.get(xs);i.getProjectionMode()===Ja.ORTHOGRAPHIC?i.setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/-2,e/2,i.getNear(),i.getFar()):i.setAspect(t/e),this.emit(Is.RESIZE,{width:t,height:e})},e.prototype.appendChild=function(t,e){return this.document.documentElement.appendChild(t,e)},e.prototype.insertBefore=function(t,e){return this.document.documentElement.insertBefore(t,e)},e.prototype.removeChild=function(t,e){return void 0===e&&(e=!0),this.document.documentElement.removeChild(t,e)},e.prototype.removeChildren=function(t){void 0===t&&(t=!0),this.document.documentElement.removeChildren(t)},e.prototype.render=function(){this.emit(Is.BEFORE_RENDER,{}),this.container.isBound(Xn)&&this.container.get(Xn).render(),this.emit(Is.AFTER_RENDER,{})},e.prototype.run=function(){var t=this;!function e(){t.render(),t.frameId=requestAnimationFrame(e)}()},e.prototype.initRenderer=function(t){var e=this;if(!t)throw new Error("Renderer is required.");this.loadCommonContainerModule(),this.loadRendererContainerModule(t);var n=this.container.get(Wn);this.renderingService=this.container.get(Xn),this.eventService=this.container.get(ui),n.init(),this.renderingService.init().then((function(){e.emit(Is.READY,{})})),t.getConfig().enableAutoRendering&&this.run(),this.getRoot().forEach((function(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0,e.dirty=!0)})),this.mountChildren(this.getRoot())},e.prototype.loadCommonContainerModule=function(){this.container.load(Ds,!0)},e.prototype.loadRendererContainerModule=function(t){var e=this;t.getPlugins().forEach((function(t){t.init(e.container)}))},e.prototype.setRenderer=function(t){var e=this,n=this.getConfig();if(n.renderer!==t){var i=n.renderer;n.renderer=t,this.destroy(!1),null==i||i.getPlugins().reverse().forEach((function(t){t.destroy(e.container)})),this.initRenderer(t)}},e.prototype.unmountChildren=function(t){var e=[];t.forEach((function(t){t.isConnected&&e.push(t)})),e.reverse().forEach((function(t){t.emit(an.UNMOUNTED,{}),t.ownerDocument=null,t.isConnected=!1}))},e.prototype.mountChildren=function(t){var e=this;t.forEach((function(t){t.isConnected||(t.ownerDocument=e.document,t.isConnected=!0,t.emit(an.MOUNTED,{}))}))},e.prototype.client2Viewport=function(t){return this.getEventService().client2Viewport(t)},e.prototype.viewport2Client=function(t){return this.getEventService().viewport2Client(t)},e.prototype.viewport2Canvas=function(t){return this.getEventService().viewport2Canvas(t)},e.prototype.canvas2Viewport=function(t){return this.getEventService().canvas2Viewport(t)},e.prototype.getPointByClient=function(t,e){return this.client2Viewport({x:t,y:e})},e.prototype.getClientByPoint=function(t,e){return this.viewport2Client({x:t,y:e})},e}(ei);La.load(Ba);var js="ontouchstart"in self,Fs=!!self.PointerEvent,Gs=function(){function t(){}var e;return e=t,t.prototype.apply=function(t){var n=this,i=function(e){t.hooks.pointerMove.call(e)},r=function(e){t.hooks.pointerUp.call(e)},o=function(e){t.hooks.pointerDown.call(e)},a=function(e){t.hooks.pointerOver.call(e)},s=function(e){t.hooks.pointerOut.call(e)},u=function(e){t.hooks.pointerWheel.call(e)};t.hooks.init.tap(e.tag,(function(){var t=n.contextService.getDomElement();Fs?(self.document.addEventListener("pointermove",i,!0),t.addEventListener("pointerdown",o,!0),t.addEventListener("pointerleave",s,!0),t.addEventListener("pointerover",a,!0),self.addEventListener("pointerup",r,!0)):(self.document.addEventListener("mousemove",i,!0),t.addEventListener("mousedown",o,!0),t.addEventListener("mouseout",s,!0),t.addEventListener("mouseover",a,!0),self.addEventListener("mouseup",r,!0)),js&&(t.addEventListener("touchstart",o,!0),t.addEventListener("touchend",r,!0),t.addEventListener("touchmove",i,!0)),t.addEventListener("wheel",u,{passive:!0,capture:!0})})),t.hooks.destroy.tap(e.tag,(function(){var t=n.contextService.getDomElement();Fs?(self.document.removeEventListener("pointermove",i,!0),t.removeEventListener("pointerdown",o,!0),t.removeEventListener("pointerleave",s,!0),t.removeEventListener("pointerover",a,!0),self.removeEventListener("pointerup",r,!0)):(self.document.removeEventListener("mousemove",i,!0),t.removeEventListener("mousedown",o,!0),t.removeEventListener("mouseout",s,!0),t.removeEventListener("mouseover",a,!0),self.removeEventListener("mouseup",r,!0)),js&&(t.removeEventListener("touchstart",o,!0),t.removeEventListener("touchend",r,!0),t.removeEventListener("touchmove",i,!0)),t.removeEventListener("wheel",u,!0)}))},t.tag="DOMInteractionPlugin",W([T(Wn),H("design:type",Object)],t.prototype,"contextService",void 0),e=W([E({contrib:Yn})],t)}(),Vs=I((function(t){t(Gs)})),Ws=function(){function t(){}return t.prototype.init=function(t){t.load(Vs,!0)},t.prototype.destroy=function(t){t.remove(Gs)},t}(),Hs=n(9535),zs=n.n(Hs),Us=r.defineToken("StyleRendererFactory"),Ys=r.defineToken("StyleRenderer"),Xs=function(){function t(){}return t.prototype.hash=function(t){return t.fill,t.opacity,t.fillOpacity,t.stroke,t.strokeOpacity,t.lineWidth,t.lineCap,t.lineJoin,""},t.prototype.render=function(t,e){var n=e.fill,i=e.opacity,r=e.fillOpacity,o=e.stroke,a=e.strokeOpacity,s=e.lineWidth,u=e.lineCap,h=e.lineJoin,c=e.shadowColor,l=e.filter;if(gt(n)||(gt(r)||1===r?t.fill():(t.globalAlpha=r,t.fill(),t.globalAlpha=i)),!gt(o)&&s&&s>0){!gt(a)&&1!==a&&(t.globalAlpha=a),t.lineWidth=s,gt(u)||(t.lineCap=u),gt(h)||(t.lineJoin=h);var p=void 0,d=void 0,f=void 0,g=!gt(c),y=!gt(l);g&&(p=t.shadowBlur,d=t.shadowColor,gt(p)||(t.shadowColor="transparent",t.shadowBlur=0)),y&&(f=t.filter,!gt(f)&&f.indexOf("drop-shadow")>-1&&(t.filter=f.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")),t.stroke(),g&&(t.shadowColor=d,t.shadowBlur=p),y&&(t.filter=f)}},W([E({token:[{token:Ys,named:xn.Circle},{token:Ys,named:xn.Ellipse},{token:Ys,named:xn.Rect},{token:Ys,named:xn.Line},{token:Ys,named:xn.Polyline},{token:Ys,named:xn.Polygon},{token:Ys,named:xn.Path}]})],t)}(),qs=function(){function t(){this.imageCache={},this.patternCache={}}return t.prototype.getImageSync=function(t){return this.imageCache[t]},t.prototype.getOrCreateImage=function(t){var e=this;return this.imageCache[t]?Promise.resolve(this.imageCache[t]):new Promise((function(n,i){var r=new window.Image;r.onload=function(){n(r)},r.onerror=function(t){i(t)},r.crossOrigin="Anonymous",r.src=t,e.imageCache[t]=r}))},t.prototype.getPatternSync=function(t){var e=this.generatePatternKey(t);if(this.patternCache[e])return this.patternCache[e]},t.prototype.createPattern=function(t,e){var n=this;return this.getOrCreateImage(t.src).then((function(i){var r=n.generatePatternKey(t),o=e.createPattern(i,t.repetition);return o&&(n.patternCache[r]=o),n.patternCache[r]}))},t.prototype.generatePatternKey=function(t){return"pattern-"+t.src+"-"+t.repetition},W([E()],t)}(),$s=function(){function t(){}return t.prototype.hash=function(t){return""},t.prototype.render=function(t,e){var n,i=e.width,r=void 0===i?0:i,o=e.height,a=void 0===o?0:o,s=e.img,u=r,h=a;st(s)?n=this.imagePool.getImageSync(s):(u||(u=s.width),h||(h=s.height),n=s),t.drawImage(n,0,0,u,h)},W([T(qs),H("design:type",qs)],t.prototype,"imagePool",void 0),W([E({token:{token:Ys,named:xn.Image}})],t)}(),Ks=function(){function t(){}return t.prototype.hash=function(t){return""},t.prototype.render=function(t,e){e.text;var n=e.lineWidth,i=void 0===n?0:n,r=e.textAlign,o=e.textBaseline,a=e.lineJoin,s=e.miterLimit,u=void 0===s?0:s,h=e.padding,c=void 0===h?0:h,l=e.letterSpacing,p=void 0===l?0:l,d=e.stroke,f=e.fill,g=e.fillOpacity,y=e.strokeOpacity,v=e.opacity,m=e.metrics,b=m.font,x=m.lines,S=m.height,w=m.lineHeight;t.font=b,t.lineWidth=i,t.textAlign=r,t.textBaseline=o,t.lineJoin=a,t.miterLimit=u;var E=0;"middle"===o?E=-S/2-w/2:"bottom"===o||"alphabetic"===o||"ideographic"===o?E=-S:"top"!==o&&"hanging"!==o||(E=-w);for(var T=0;T<x.length;T++){var P=i/2;E+=w,!gt(d)&&i&&this.drawLetterSpacing(t,x[T],P+c,E+c,p,g,y,v,!0),gt(f)||this.drawLetterSpacing(t,x[T],P+c,E+c,p,g,y,v)}},t.prototype.drawLetterSpacing=function(t,e,n,i,r,o,a,s,u){if(void 0===u&&(u=!1),0!==r)for(var h=n,c=Array.from(e),l=t.measureText(e).width,p=0,d=0;d<c.length;++d){var f=c[d];u?this.strokeText(t,f,h,i,a):this.fillText(t,f,h,i,o,s),h+=l-(p=t.measureText(e.substring(d+1)).width)+r,l=p}else u?this.strokeText(t,e,n,i,a):this.fillText(t,e,n,i,o,s)},t.prototype.fillText=function(t,e,n,i,r,o){var a=!gt(r)&&1!==r;a&&(t.globalAlpha=r),t.fillText(e,n,i),a&&(t.globalAlpha=o)},t.prototype.strokeText=function(t,e,n,i,r){!gt(r)&&1!==r&&(t.globalAlpha=r),t.strokeText(e,n,i)},W([T(Bn),H("design:type",Bn)],t.prototype,"textService",void 0),W([E({token:{token:Ys,named:xn.Text}})],t)}(),Zs=function(){function t(){this.gradientCache={}}return t.prototype.getOrCreateGradient=function(t,e){var n=this.generateCacheKey(t),i=t.type,r=t.x0,o=t.y0,a=t.x1,s=t.y1,u=t.steps,h=t.width,c=t.height;if(this.gradientCache[n])return this.gradientCache[n];var l=null;if(i===Gr.LinearGradient)l=e.createLinearGradient(r*h,o*c,a*h,s*c);else if(i===Gr.RadialGradient){var p=Math.sqrt(h*h+c*c)/2;l=e.createRadialGradient(r*h,o*c,0,a*h,s*c,t.r1*p)}return l&&(u.forEach((function(t){var e=X(t,2),n=e[0],i=e[1];null==l||l.addColorStop(Number(n),i)})),this.gradientCache[n]=l),this.gradientCache[n]},t.prototype.generateCacheKey=function(t){var e=t.type,n=t.x0,i=t.y0,r=t.x1,o=t.y1,a=t.r1,s=t.steps;return"gradient-"+e+"-"+n+"-"+i+"-"+r+"-"+o+"-"+(a||0)+"-"+t.width+"-"+t.height+"-"+s.map((function(t){return t.join("")})).join("-")},W([E()],t)}(),Js="PathGeneratorFactory",Qs="PathGenerator",tu=function(){function t(){}return t.tag="c-canvas-rbush-node",t}(),eu="RBushRoot",nu=function(){function t(){this.renderQueue=[],this.restoreStack=[],this.clearFullScreen=!1,this.enableBatch=!1,this.batchedStyleHash="",this.batchedDisplayObject=null,this.toSync=new Set}var e;return e=t,t.prototype.syncRTree=function(){var t=this,e=[];this.toSync.forEach((function(n){var i=n.rBushNode;i&&t.rBush.remove(i.aabb);var r=n.getRenderBounds();if(r){var o=X(r.getMin(),2),a=o[0],s=o[1],u=X(r.getMax(),2),h=u[0],c=u[1];i.aabb={id:n.entity,minX:a,minY:s,maxX:h,maxY:c}}e.push(i.aabb)})),this.rBush.load(e),this.toSync.clear()},t.prototype.pushToSync=function(t){var e=this;t.forEach((function(t){e.toSync.add(t)}))},t.prototype.apply=function(t){var n=this,i=function(t){t.target.rBushNode=new tu,n.pushToSync(t.composedPath().slice(0,-2))},r=function(t){var e=t.target,i=e.rBushNode;n.rBush.remove(i.aabb),n.toSync.delete(e)},o=function(t){var e,i=t.target;(null===(e=i.ownerDocument)||void 0===e?void 0:e.documentElement)===n.renderingContext.root&&(t.detail.affectChildren&&i.forEach((function(t){n.pushToSync([t])})),n.pushToSync(t.composedPath().slice(0,-2)))};t.hooks.init.tap(e.tag,(function(){n.renderingContext.root.addEventListener(an.MOUNTED,i),n.renderingContext.root.addEventListener(an.UNMOUNTED,r),n.renderingContext.root.addEventListener(an.BOUNDS_CHANGED,o)})),t.hooks.destroy.tap(e.tag,(function(){n.renderingContext.root.removeEventListener(an.MOUNTED,i),n.renderingContext.root.removeEventListener(an.UNMOUNTED,r),n.renderingContext.root.removeEventListener(an.BOUNDS_CHANGED,o)})),t.hooks.beginFrame.tap(e.tag,(function(){var t=n.contextService.getContext(),e=n.canvasConfig.renderer.getConfig(),i=e.enableDirtyRectangleRendering;e.enableDirtyRectangleRenderingDebug,n.clearFullScreen=!i||n.renderingContext.renderReasons.has(Cn.CameraChanged),t&&(t.save(),n.clearFullScreen&&t.clearRect(0,0,n.canvasConfig.width,n.canvasConfig.height),n.applyTransform(t,n.camera.getOrthoMatrix()))})),t.hooks.endFrame.tap(e.tag,(function(){n.syncRTree();var e=n.canvasConfig.renderer.getConfig().enableDirtyRectangleRendering,i=n.contextService.getContext();if(e){var r=n.safeMergeAABB.apply(n,q([n.mergeDirtyAABBs(n.renderQueue)],X(n.renderingContext.removedRenderBoundsList),!1));if(n.renderingContext.removedRenderBoundsList=[],!r)return;var o=n.convertAABB2Rect(r),a=o.x,s=o.y,u=o.width,h=o.height;i.clearRect(a,s,u,h),i.beginPath(),i.rect(a,s,u,h),i.clip(),n.searchDirtyObjects(r).sort(n.sceneGraphService.sort).forEach((function(e){e.isVisible()&&n.renderDisplayObject(e,t)})),n.enableBatch&&n.batchedStyleHash&&n.flush(i,t),n.renderQueue.forEach((function(t){n.saveDirtyAABB(t)})),n.renderQueue=[]}n.restoreStack.forEach((function(t){i.restore()})),n.restoreStack=[],i.restore()})),t.hooks.render.tap(e.tag,(function(e){n.canvasConfig.renderer.getConfig().enableDirtyRectangleRendering?n.renderQueue.push(e):n.renderDisplayObject(e,t)}))},t.prototype.flush=function(t,e){if(this.batchedDisplayObject){var n=this.styleRendererFactory(this.batchedDisplayObject.nodeName);n&&(this.applyAttributesToContext(t,this.batchedDisplayObject,e),t.closePath(),n.render(t,this.batchedDisplayObject.parsedStyle,this.batchedDisplayObject),t.restore()),this.batchedStyleHash="",this.batchedDisplayObject=null}},t.prototype.renderDisplayObject=function(t,e){for(var n=this,i=this.contextService.getContext(),r=this.restoreStack[this.restoreStack.length-1];r&&t.parentNode!==r;)i.restore(),this.restoreStack.pop(),r=this.restoreStack[this.restoreStack.length-1];var o=t.nodeName,a=this.styleRendererFactory(o),s=!1;if(this.enableBatch&&a){var u=a.hash(t.attributes);this.batchedStyleHash&&u!==this.batchedStyleHash&&this.flush(i,e),this.batchedStyleHash||(this.batchedStyleHash=u,this.batchedDisplayObject=t,s=!0)}i.save(),this.applyTransform(i,t.getLocalTransform());var h=t.style.clipPath;if(h){i.save(),this.applyTransform(i,h.getLocalTransform());var c=this.pathGeneratorFactory(h.nodeName);c&&this.useAnchor(i,h,(function(){i.beginPath(),c(i,h.parsedStyle),i.closePath()})),i.restore(),i.clip()}this.enableBatch||(i.save(),this.applyAttributesToContext(i,t,e)),this.useAnchor(i,t,(function(){var e=n.pathGeneratorFactory(t.nodeName);e&&(!s&&n.enableBatch||i.beginPath(),e(i,t.parsedStyle),n.enableBatch||t.nodeName===xn.Line||t.nodeName===xn.Path||t.nodeName===xn.Polyline||i.closePath()),a&&!n.enableBatch&&a.render(i,t.parsedStyle,t)})),this.enableBatch||i.restore(),t.renderable.dirty=!1,this.restoreStack.push(t)},t.prototype.convertAABB2Rect=function(t){var e=t.getMin(),n=t.getMax(),i=Math.floor(e[0]),r=Math.floor(e[1]);return{x:i,y:r,width:Math.ceil(n[0])-i,height:Math.ceil(n[1])-r}},t.prototype.insertRBushNode=function(t){var e=t.rBushNode;if(e){this.rBush.remove(e.aabb);var n=t.getRenderBounds();if(n){var i=X(n.getMin(),2),r=i[0],o=i[1],a=X(n.getMax(),2),s=a[0],u=a[1];e.aabb={id:t.entity,minX:r,minY:o,maxX:s,maxY:u}}this.rBush.insert(e.aabb)}},t.prototype.mergeDirtyAABBs=function(t){var e;return t.forEach((function(t){var n=t.getRenderBounds();n&&(e?e.add(n):e=new nn(n.center,n.halfExtents));var i=t.renderable.dirtyRenderBounds;i&&(e?e.add(i):e=new nn(i.center,i.halfExtents))})),e},t.prototype.searchDirtyObjects=function(t){var e=this,n=X(t.getMin(),2),i=n[0],r=n[1],o=X(t.getMax(),2),a=o[0],s=o[1];return this.rBush.search({minX:i,minY:r,maxX:a,maxY:s}).map((function(t){var n=t.id;return e.displayObjectPool.getByEntity(n)}))},t.prototype.saveDirtyAABB=function(t){var e=t.renderable;e.dirtyRenderBounds||(e.dirtyRenderBounds=new nn);var n=t.getRenderBounds();n&&e.dirtyRenderBounds.update(n.center,n.halfExtents)},t.prototype.applyTransform=function(t,e){var n=X(Ke(Ft(),e),2),i=n[0],r=n[1],o=X(Ze(Ft(),e),2),a=o[0],s=o[1],u=Je(De(),e),h=X(pi(Ft(),u),3),c=h[0],l=(h[1],h[2]),p=di(c||l,i,r,a,s);t.transform(p[0],p[1],p[3],p[4],p[6],p[7])},t.prototype.getColor=function(t,e,n,i){var r;if(t.type===Gr.LinearGradient||t.type===Gr.RadialGradient){var o=e.getGeometryBounds(),a=o&&2*o.halfExtents[0]||0,s=o&&2*o.halfExtents[1]||0;r=this.gradientPool.getOrCreateGradient(G(G({type:t.type},t.value),{width:a,height:s}),n)}else if(t.type===Gr.Pattern){var u=this.imagePool.getPatternSync(t.value);u?r=u:this.imagePool.createPattern(t.value,n).then((function(){e.renderable.dirty=!0,i.dirtify()}))}else r=t.formatted;return r},t.prototype.applyAttributesToContext=function(t,e,n){var i=e.parsedStyle,r=i.stroke,o=i.fill,a=i.opacity,s=i.lineDash,u=i.lineDashOffset,h=i.filter,c=i.shadowColor,l=i.shadowBlur,p=i.shadowOffsetX,d=i.shadowOffsetY;s&&Q(s)&&t.setLineDash(s),gt(u)||(t.lineDashOffset=u),gt(a)||(t.globalAlpha*=a),gt(r)||(t.strokeStyle=this.getColor(r,e,t,n)),gt(o)||(t.fillStyle=this.getColor(o,e,t,n)),gt(h)||(t.filter=e.style.filter),gt(c)||(t.shadowColor=c.formatted,t.shadowBlur=l,t.shadowOffsetX=p,t.shadowOffsetY=d)},t.prototype.useAnchor=function(t,e,n){var i=e.getGeometryBounds();if(i){var r=i.halfExtents,o=(e.parsedStyle||{}).anchor,a=void 0===o?[0,0]:o;t.translate(-a[0]*r[0]*2,-a[1]*r[1]*2),n()}else n()},t.prototype.safeMergeAABB=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach((function(e){e&&(t?t.add(e):t=e)})),t},t.tag="CanvasRendererPlugin",W([T(Mn),H("design:type",Object)],t.prototype,"canvasConfig",void 0),W([T(xs),H("design:type",Ts)],t.prototype,"camera",void 0),W([T(Wn),H("design:type",Object)],t.prototype,"contextService",void 0),W([T(wn),H("design:type",Object)],t.prototype,"sceneGraphService",void 0),W([T(zn),H("design:type",Object)],t.prototype,"renderingContext",void 0),W([T(qs),H("design:type",qs)],t.prototype,"imagePool",void 0),W([T(Zs),H("design:type",Zs)],t.prototype,"gradientPool",void 0),W([T(Js),H("design:type",Function)],t.prototype,"pathGeneratorFactory",void 0),W([T(Us),H("design:type",Function)],t.prototype,"styleRendererFactory",void 0),W([T($),H("design:type",$)],t.prototype,"displayObjectPool",void 0),W([T(eu),H("design:type",zs())],t.prototype,"rBush",void 0),e=W([E({contrib:Yn})],t)}(),iu=function(){function t(){}var e;return e=t,t.prototype.apply=function(t){var n=this,i=function(e){var i=e.target,r=i.nodeName,o=i.attributes;if(r===xn.Image){var a=o.img;st(a)&&n.imagePool.getOrCreateImage(a).then((function(){i.renderable.dirty=!0,t.dirtify()}))}},r=function(e){var i=e.target,r=e.detail,o=r.attributeName,a=r.newValue;i.nodeName===xn.Image&&"img"===o&&st(a)&&n.imagePool.getOrCreateImage(a).then((function(){i.renderable.dirty=!0,t.dirtify()}))};t.hooks.init.tap(e.tag,(function(){n.renderingContext.root.addEventListener(an.MOUNTED,i),n.renderingContext.root.addEventListener(an.ATTRIBUTE_CHANGED,r)})),t.hooks.destroy.tap(e.tag,(function(){n.renderingContext.root.removeEventListener(an.MOUNTED,i),n.renderingContext.root.removeEventListener(an.ATTRIBUTE_CHANGED,r)}))},t.tag="LoadImagePlugin",W([T(qs),H("design:type",qs)],t.prototype,"imagePool",void 0),W([T(zn),H("design:type",Object)],t.prototype,"renderingContext",void 0),e=W([E({contrib:Yn})],t)}();La.register({token:{token:Qs,named:xn.Circle},useValue:function(t,e){var n=e.r,i=void 0===n?0:n;t.arc(i,i,i,0,2*Math.PI,!1)}}),La.register({token:{token:Qs,named:xn.Ellipse},useValue:function(t,e){var n=e.rx,i=e.ry;if(t.ellipse)t.ellipse(n,i,n,i,0,0,2*Math.PI,!1);else{var r=n>i?n:i,o=n>i?1:n/i,a=n>i?i/n:1;t.save(),t.scale(o,a),t.arc(0,0,r,0,2*Math.PI)}}}),La.register({token:{token:Qs,named:xn.Rect},useValue:function(t,e){var n=e.radius,i=void 0===n?0:n,r=e.width,o=void 0===r?0:r,a=e.height,s=void 0===a?0:a;if(0===i)t.rect(0,0,o,s);else{var u=X(function(t){var e=0,n=0,i=0,r=0;return Q(t)?1===t.length?e=n=i=r=t[0]:2===t.length?(e=i=t[0],n=r=t[1]):3===t.length?(e=t[0],n=r=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],r=t[3]):e=n=i=r=t,[e,n,i,r]}(i),4),h=u[0],c=u[1],l=u[2],p=u[3];t.moveTo(h,0),t.lineTo(o-c,0),0!==c&&t.arc(o-c,c,c,-Math.PI/2,0),t.lineTo(o,s-l),0!==l&&t.arc(o-l,s-l,l,0,Math.PI/2),t.lineTo(p,s),0!==p&&t.arc(p,s-p,p,Math.PI/2,Math.PI),t.lineTo(0,h),0!==h&&t.arc(h,h,h,Math.PI,1.5*Math.PI)}}}),La.register({token:{token:Qs,named:xn.Line},useValue:function(t,e){var n=e.x1,i=e.y1,r=e.x2,o=e.y2,a=e.defX,s=void 0===a?0:a,u=e.defY,h=void 0===u?0:u;t.moveTo(n-s,i-h),t.lineTo(r-s,o-h)}}),La.register({token:{token:Qs,named:xn.Polyline},useValue:function(t,e){var n=e.defX,i=void 0===n?0:n,r=e.defY,o=void 0===r?0:r,a=e.points.points,s=a.length,u=a[0][0]-i,h=a[0][1]-o,c=a[s-1][0]-i,l=a[s-1][1]-o;t.moveTo(u,h);for(var p=0;p<s-1;p++){var d=a[p];t.lineTo(d[0]-i,d[1]-o)}t.lineTo(c,l)}}),La.register({token:{token:Qs,named:xn.Polygon},useValue:function(t,e){var n=e.defX,i=void 0===n?0:n,r=e.defY,o=void 0===r?0:r,a=e.points.points,s=a.length,u=a[0][0]-i,h=a[0][1]-o,c=a[s-1][0]-i,l=a[s-1][1]-o;t.moveTo(u,h);for(var p=0;p<s-1;p++){var d=a[p];t.lineTo(d[0]-i,d[1]-o)}t.lineTo(c,l)}}),La.register({token:{token:Qs,named:xn.Path},useValue:function(t,e){var n=e.defX,i=void 0===n?0:n,r=e.defY,o=void 0===r?0:r,a=e.path,s=a.curve,u=a.zCommandIndexes,h=s;u.forEach((function(t,e){h.splice(t+e,0,["Z"])}));for(var c=0;c<h.length;c++){var l=h[c],p=l[0];switch(p){case"M":t.moveTo(l[1]-i,l[2]-o),[l[1]-i,l[2]-o];break;case"C":t.bezierCurveTo(l[1]-i,l[2]-o,l[3]-i,l[4]-o,l[5]-i,l[6]-o);break;case"Z":t.closePath()}if("Z"===p);else{var d=l.length;l[d-2],l[d-1]}}}}),La.register({token:Js,useFactory:function(t){var e={};return function(n){return e[n]||t.container.isBoundNamed(Qs,n)&&(e[n]=t.container.getNamed(Qs,n)),e[n]}}});var ru=I((function(t){t(qs),t({token:eu,useValue:new(zs())}),t(Xs),t($s),t(Ks),t({token:Us,useFactory:function(t){var e={};return function(n){return e[n]||t.container.isBoundNamed(Ys,n)&&(e[n]=t.container.getNamed(Ys,n)),e[n]}}}),t(Zs),t(nu),t(iu)})),ou=function(){function t(){}return t.prototype.init=function(t){t.load(ru,!0)},t.prototype.destroy=function(t){t.remove(qs),t.remove(eu),t.remove(Xs),t.remove($s),t.remove(Ks),t.remove(Ys),t.remove(Us),t.remove(Zs),t.remove(nu),t.remove(iu)},t}(),au="PointInPathPicker",su=function(){function t(){var t=this;this.isHit=function(e,n,i){var r=t.pointInPathPickerFactory(e.nodeName);if(r){var o=Xe(ze(),i),a=fe(Ft(),Wt(n[0],n[1],0),o),s=e.getGeometryBounds().halfExtents,u=e.parsedStyle.anchor,h=void 0===u?[0,0]:u;if(a[0]+=h[0]*s[0]*2,a[1]+=h[1]*s[1]*2,r(e,new dn(a[0],a[1]),t.isPointInPath))return!0}return!1},this.isPointInPath=function(e,n){var i=t.offscreenCanvas.getOrCreateContext(),r=t.pathGeneratorFactory(e.nodeName);return r&&r(i,e.parsedStyle),i.isPointInPath(n.x,n.y)}}var e;return e=t,t.prototype.apply=function(t){var n=this;t.hooks.pick.tap(e.tag,(function(t){var e=t.position,i=Wt(e.x,e.y,0),r=[],o=n.rBush.search({minX:i[0],minY:i[1],maxX:i[0],maxY:i[1]}),a=o.map((function(t){return t.id}));return o.forEach((function(t){var e=t.id,o=n.displayObjectPool.getByEntity(e);if(o.isVisible()&&o.interactive){if(o.parentNode&&-1===a.indexOf(o.parentNode.entity))return;var s=o.style.clipPath||o,u=o.getWorldTransform();o.style.clipPath&&(u=qe(ze(),u,o.style.clipPath.getLocalTransform())),n.isHit(s,i,u)&&r.push(o)}})),r.sort(n.sceneGraphService.sort),t.picked=r[r.length-1]||null,t}))},t.tag="CanvasPickerPlugin",W([T(wn),H("design:type",Object)],t.prototype,"sceneGraphService",void 0),W([T($),H("design:type",$)],t.prototype,"displayObjectPool",void 0),W([T(Nn),H("design:type",Nn)],t.prototype,"offscreenCanvas",void 0),W([T(eu),H("design:type",Function)],t.prototype,"rBush",void 0),W([T(Js),H("design:type",Function)],t.prototype,"pathGeneratorFactory",void 0),W([T(au),H("design:type",Function)],t.prototype,"pointInPathPickerFactory",void 0),e=W([E({contrib:Yn})],t)}();function uu(t,e,n,i){var r=t-n,o=e-i;return Math.sqrt(r*r+o*o)}function hu(t,e,n,i,r,o){return r>=t&&r<=t+n&&o>=e&&o<=e+i}function cu(t,e,n,i,r,o,a,s){var u=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(u<i||u>r)return!1;var h={x:t+n*Math.cos(u),y:e+n*Math.sin(u)};return uu(h.x,h.y,a,s)<=o/2}function lu(t,e,n,i,r,o,a){var s=Math.min(t,n),u=Math.max(t,n),h=Math.min(e,i),c=Math.max(e,i),l=r/2;return o>=s-l&&o<=u+l&&a>=h-l&&a<=c+l&&gr(t,e,n,i,o,a)<=r/2}function pu(t,e,n,i,r){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++)if(lu(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,i))return!0;if(r){var s=t[0],u=t[o-1];if(lu(s[0],s[1],u[0],u[1],e,n,i))return!0}return!1}function du(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function fu(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function gu(t,e,n){var i=!1,r=t.length;if(r<=2)return!1;for(var o=0;o<r;o++){var a=t[o],s=t[(o+1)%r];if(fu(a,s,[e,n]))return!0;du(a[1]-n)>0!=du(s[1]-n)>0&&du(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(i=!i)}return i}function yu(t,e,n){for(var i=!1,r=0;r<t.length&&!(i=gu(t[r],e,n));r++);return i}function vu(t,e){var n=t.parsedStyle,i=n.r,r=void 0===i?0:i,o=n.fill,a=n.stroke,s=n.lineWidth,u=void 0===s?0:s,h=n.clipPathTargets,c=u/2,l=uu(r,r,e.x,e.y),p=!!(null==h?void 0:h.length);return o&&a||p?l<=r+c:o?l<=r:!!a&&l>=r-c&&l<=r+c}function mu(t,e,n,i){return t/(n*n)+e/(i*i)}function bu(t,e){var n=e.x,i=e.y,r=t.parsedStyle,o=r.rx,a=void 0===o?0:o,s=r.ry,u=void 0===s?0:s,h=r.fill,c=r.stroke,l=r.lineWidth,p=void 0===l?0:l,d=r.clipPathTargets,f=!!(null==d?void 0:d.length),g=p/2,y=(n-a)*(n-a),v=(i-u)*(i-u);return h&&c||f?mu(y,v,a+g,u+g)<=1:h?mu(y,v,a,u)<=1:!!c&&mu(y,v,a-g,u-g)>=1&&mu(y,v,a+g,u+g)<=1}function xu(t,e){var n=t.parsedStyle,i=n.x1,r=n.y1,o=n.x2,a=n.y2,s=n.lineWidth,u=void 0===s?0:s,h=n.defX,c=void 0===h?0:h,l=n.defY,p=void 0===l?0:l;return lu(i,r,o,a,u,e.x+c,e.y+p)}function Su(t,e){var n=t.parsedStyle,i=n.stroke,r=n.lineWidth,o=void 0===r?0:r,a=n.points,s=n.defX,u=void 0===s?0:s,h=n.defY,c=void 0===h?0:h,l=n.clipPathTargets,p=!!(null==l?void 0:l.length);return!(!i&&!p||!o)&&pu(a.points,o,e.x+u,e.y+c,!1)}function wu(t,e,n){var i=t.parsedStyle,r=i.lineWidth,o=void 0===r?0:r,a=i.stroke,s=i.fill,u=i.defX,h=void 0===u?0:u,c=i.defY,l=void 0===c?0:c,p=i.clipPathTargets,d=i.path,f=d.segments,g=d.hasArc,y=d.polylines,v=d.polygons,m=d.totalLength,b=!!(null==p?void 0:p.length),x=!1;return(a||b)&&(x=function(t,e,n,i,r,o,a){for(var s,u,h=!1,c=e/2,l=0;l<t.length;l++){var p=t[l],d=p.currentPoint,f=p.params,g=p.prePoint,y=p.box;if(!y||hu(y.x-c,y.y-c,y.width+e,y.height+e,n,i)){switch(p.command){case"L":case"Z":h=lu(g[0],g[1],d[0],d[1],e,n,i);break;case"Q":h=wr.pointDistance(g[0],g[1],f[1],f[2],f[3],f[4],n,i)<=e/2;break;case"C":h=kr.pointDistance(g[0],g[1],f[1],f[2],f[3],f[4],f[5],f[6],n,i,r)<=e/2;break;case"A":var v=p.arcParams,m=v.cx,b=v.cy,x=v.rx,S=v.ry,w=v.startAngle,E=v.endAngle,T=v.xRotation,P=x>S?x:S,C=x>S?1:x/S,M=x>S?S/x:1,k=(u=[-m,-b],(s=Rt())[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=1,s[5]=0,s[6]=u[0],s[7]=u[1],s[8]=1,s);Dt(k,Bt(Rt(),-T),k),Dt(k,jt(Rt(),[1/C,1/M]),k);var A=nr(n,i);h=cu(0,0,P,w,E,e,(A=hr(A,A,k))[0],A[1])}if(h)break}}return h}(f,o,e.x+h,e.y+l,m)),x||!s&&!b||(x=g?n(t,e):yu(v,e.x+h,e.y+l)||yu(y,e.x+h,e.y+l)),x}function Eu(t,e,n){var i=t.parsedStyle,r=i.radius,o=i.fill,a=i.stroke,s=i.lineWidth,u=void 0===s?0:s,h=i.width,c=i.height,l=i.clipPathTargets,p=!!(null==l?void 0:l.length);if(r){var d=!1;return(a||p)&&(d=function(t,e,n,i,r,o,a,s){return lu(0+r,0,0+n-r,0,o,a,s)||lu(0+n,0+r,0+n,0+i-r,o,a,s)||lu(0+n-r,0+i,0+r,0+i,o,a,s)||lu(0,0+i-r,0,0+r,o,a,s)||cu(0+n-r,0+r,r,1.5*Math.PI,2*Math.PI,o,a,s)||cu(0+n-r,0+i-r,r,0,.5*Math.PI,o,a,s)||cu(0+r,0+i-r,r,.5*Math.PI,Math.PI,o,a,s)||cu(0+r,0+r,r,Math.PI,1.5*Math.PI,o,a,s)}(0,0,h,c,r,u,e.x,e.y)),d||!o&&!p||(d=n(t,e)),d}var f=u/2;return o&&a||p?hu(0-f,0-f,h+f,c+f,e.x,e.y):o?hu(0,0,h,c,e.x,e.y):!!a&&function(t,e,n,i,r,o,a){var s=r/2;return hu(0-s,0-s,n,r,o,a)||hu(0+n-s,0-s,r,i,o,a)||hu(0+s,0+i-s,n,r,o,a)||hu(0-s,0+s,r,i,o,a)}(0,0,h,c,u,e.x,e.y)}function Tu(t,e){var n=t.parsedStyle,i=n.stroke,r=n.fill,o=n.lineWidth,a=void 0===o?0:o,s=n.points,u=n.defX,h=void 0===u?0:u,c=n.defY,l=void 0===c?0:c,p=n.clipPathTargets,d=!!(null==p?void 0:p.length),f=!1;return(i||d)&&(f=pu(s.points,a,e.x+h,e.y+l,!0)),f||!r&&!d||(f=gu(s.points,e.x+h,e.y+l)),f}var Pu,Cu=I((function(t){t({token:au,useFactory:function(t){return function(t){return t===xn.Circle?vu:t===xn.Ellipse?bu:t===xn.Rect?Eu:t===xn.Line?xu:t===xn.Polyline?Su:t===xn.Polygon?Tu:t===xn.Path?wu:t===xn.Image||t===xn.Text?function(){return!0}:null}}}),t(su)})),Mu=function(){function t(){}return t.prototype.init=function(t){t.load(Cu,!0)},t.prototype.destroy=function(t){t.remove(au),t.remove(su)},t}(),ku="g-html-",Au=function(){function t(){}var e;return e=t,t.prototype.apply=function(t){var n=this,i=function(t){var e=t.target;if(e.nodeName===xn.HTML){var i=e.parsedStyle.innerHTML,r=ku+e.entity,o=n.contextService.getDomElement().parentNode;if(!o.querySelector("#"+r)){var a=document.createElement("div");e.parsedStyle.$el=a,a.id=r,st(i)?a.innerHTML=i:a.appendChild(i),o.appendChild(a)}}},r=function(t){var e=t.target;if(e.nodeName===xn.HTML){var i=ku+e.entity,r=n.contextService.getDomElement().parentNode,o=r.querySelector("#"+i);o&&r.removeChild(o)}};t.hooks.init.tap(e.tag,(function(){n.renderingContext.root.addEventListener(an.MOUNTED,i),n.renderingContext.root.addEventListener(an.UNMOUNTED,r)})),t.hooks.destroy.tap(e.tag,(function(){n.renderingContext.root.removeEventListener(an.MOUNTED,i),n.renderingContext.root.removeEventListener(an.UNMOUNTED,r)})),t.hooks.render.tap(e.tag,(function(t){if(t.nodeName===xn.HTML){var e=ku+t.entity,i=n.contextService.getDomElement().parentNode.querySelector("#"+e);n.updateCSSStyle(i,t.parsedStyle,t)}}))},t.prototype.updateCSSStyle=function(t,e,n){var i=e.zIndex,r=void 0===i?0:i,o=e.visibility,a=void 0===o?"visible":o,s=e.opacity,u=void 0===s?1:s,h=e.fill,c=e.lineWidth,l=void 0===c?0:c,p=e.lineDash,d=e.stroke,f=e.anchor,g=e.width,y=void 0===g?0:g,v=e.height,m=void 0===v?0:v,b=e.style,x=void 0===b?"":b,S=e.className,w=void 0===S?"":S,E={position:"absolute",top:0,left:0};if(E.width=y+"px",E.height=m+"px",E.transform="matrix3d("+n.getWorldTransform().join(",")+")",f&&(E.transform+=" translate("+100*f[0]+"%, "+100*f[0]+"%)"),n.style.transformOrigin&&(E["transform-origin"]=n.style.transformOrigin),E["z-index"]=r,E.visibility=a,E.opacity=u,h){var T="";h.type===Gr.Constant?T=h.formatted:h.type===Gr.LinearGradient?T="linear-gradient(to right, "+h.value.steps.map((function(t){return t[1]+" "+100*Number(t[0])+"%"})).join(",")+");":h.type===Gr.RadialGradient||(h.type,Gr.Pattern),E.background=T}E["border-width"]=l+"px",d&&d.type===Gr.Constant&&(E["border-color"]=d.formatted,E["border-style"]="solid"),p&&(E["border-style"]="dashed"),n.style.filter&&(E.filter=n.style.filter),w&&(Array.isArray(w)?w.forEach((function(e){t.classList.add(e)})):t.classList.add(w)),t.setAttribute("style",Object.keys(E).map((function(t){return t+":"+E[t]})).join(";")+x)},t.tag="HTMLRenderingPlugin",W([T(Wn),H("design:type",Object)],t.prototype,"contextService",void 0),W([T(zn),H("design:type",Object)],t.prototype,"renderingContext",void 0),e=W([E({contrib:Yn})],t)}(),Ou=I((function(t){t(Au)})),_u=function(){function t(){}return t.prototype.init=function(t){t.load(Ou,!0)},t.prototype.destroy=function(t){t.remove(Au)},t}(),Nu="undefined"!=typeof window&&void 0!==window.document,Lu=function(){function t(){}return t.prototype.init=function(){var t=this.canvasConfig,e=t.container,n=t.width,i=t.height;if(this.$container=st(e)?document.getElementById(e):e,this.$container){var r=document.createElement("canvas");this.context=r.getContext("2d"),this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=r;var o=window.devicePixelRatio||1;o=o>=1?Math.ceil(o):1,this.dpr=o,this.resize(n,i)}},t.prototype.getContext=function(){return this.context},t.prototype.getDomElement=function(){return this.$canvas},t.prototype.getDPR=function(){return this.dpr},t.prototype.getBoundingClientRect=function(){var t;return null===(t=this.$canvas)||void 0===t?void 0:t.getBoundingClientRect()},t.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},t.prototype.resize=function(t,e){if(this.$canvas){this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,function(t,e,n){Nu&&(t.style.width=e+"px",t.style.height=n+"px")}(this.$canvas,t,e);var n=this.getDPR();this.context.scale(n,n)}},t.prototype.applyCursorStyle=function(t){this.$container&&(this.$container.style.cursor=t)},W([T(Mn),H("design:type",Object)],t.prototype,"canvasConfig",void 0),W([E({token:Wn})],t)}(),Iu=I((function(t){t(Lu)})),Ru=function(){function t(){}return t.prototype.init=function(t){t.load(Iu,!0)},t.prototype.destroy=function(t){t.remove(Lu)},t}(),Du=function(t){function e(e){var n=t.call(this,e)||this;return n.registerPlugin(new Ru),n.registerPlugin(new ou),n.registerPlugin(new Ws),n.registerPlugin(new Mu),n.registerPlugin(new _u),n}return F(e,t),e}(ys),Bu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.connectedCallback=function(){},e.prototype.disconnectedCallback=function(){},e.tag="gui",e}(rs);n(778);var ju=bt((function(t,e){void 0===e&&(e={});var n=e.fontSize,i=e.fontFamily,r=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return Pu||(Pu=document.createElement("canvas").getContext("2d")),Pu.font=[o,a,r,"".concat(n,"px"),i].join(" "),Pu.measureText(st(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),q([t],X(dt(e)),!1).join("")})),Fu=function(t,e,n,i){void 0===i&&(i="...");var r,o,a=ju(i,n);r=st(t)?t:gt(o=t)?"":o.toString();var s,u,h=e,c=[];if(ju(t,n)<=e)return t;for(;s=r.substr(0,16),!((u=ju(s,n))+a>h&&u>h);)if(c.push(s),h-=u,!(r=r.substr(16)))return c.join("");for(;s=r.substr(0,1),!((u=ju(s,n))+a>h);)if(c.push(s),h-=u,!(r=r.substr(1)))return c.join("");return"".concat(c.join("")).concat(i)};function Gu(t){var e=t.attr();return{fontSize:e.fontSize,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontVariant:e.fontVariant}}function Vu(t,e){return"capitalize"===e?t.toLowerCase().replace(/( |^)[a-z]/g,(function(t){return t.toUpperCase()})):"lowercase"===e?t.toLowerCase():"uppercase"===e?t.toUpperCase():t}function Wu(t,e){var n=Math.pow(10,e);return~~(t*n)/n}function Hu(t){return t.toLocaleString()}function zu(t){return t.toExponential()}function Uu(t,e){return void 0===e&&(e=0),Math.abs(t)<1e3?String(t):"".concat(Wu(t/1e3,e).toLocaleString(),"K")}function Yu(t){if(ht(t))return[t,t,t,t];if(Q(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}var Xu=["default","active","selected","disabled"];function qu(t){if(t)return null==t?void 0:t.default;var e=mt(t)||{};return Xu.forEach((function(t){t in e&&delete e[t]})),e}function $u(t,e,n){if(void 0===n&&(n=!1),!e)return qu(t)||{};var i=Ct(t,e);return n?St({},qu(t),i):i}function Ku(t){var e=t.canvas,n=t.touches,i=t.offsetX,r=t.offsetY;if(e)return[e.x,e.y];if(n){var o=n[0];return[o.clientX,o.clientY]}return i&&r?[i,r]:[0,0]}function Zu(t){var e=t.getBounds();if(!e)return{x:0,y:0,width:0,height:0};var n=e.getMax(),i=e.getMin();return{x:i[0],y:i[1],width:n[0]-i[0],height:n[1]-i[1]}}function Ju(t){return"string"==typeof t?(e=t,(n=document.createElement("div")).innerHTML=e,n.firstChild):t;var e,n}var Qu=["year","month","day","hour","minute","second"],th=["YYYY","MM","DD","hh","mm","ss"];function eh(t){return t instanceof Date?t:new Date(t)}function nh(t){for(var e=X(t,2),n=e[0],i=e[1],r=Qu.indexOf(n),o=Qu.indexOf(i),a="",s=r;s<=o;s+=1)if(a+=th[s],s<o){var u="-";2===s?u=" ":s>2&&(u=":"),a+=u}return a}function ih(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},i=e;return Object.keys(n).forEach((function(t){var e=n[t];i=i.replace(t,"YYYY"===t?"".concat(e):"0".concat(e).slice(-2))})),i}function rh(t,e){var n=new Date(t);return{year:function(t){t.setMonth(0),t.setHours(0,0,0,0)},month:function(t){t.setDate(1),t.setHours(0,0,0,0)},day:function(t){return t.setHours(0,0,0,0)},hour:function(t){return t.setMinutes(0,0,0)},minute:function(t){return t.setSeconds(0,0)},second:function(t){return t.setMilliseconds(0)}}[e](n),ih(n,nh(["year",e]))}var oh=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=5),Object.entries(e).forEach((function(r){var o=X(r,2),a=o[0],s=o[1],u=t;Object.prototype.hasOwnProperty.call(e,a)&&(s?it(s)?(it(t[a])||(u[a]={}),n<i?oh(t[a],s,n+1,i):u[a]=e[a]):Q(s)?(u[a]=[],u[a]=u[a].concat(s)):u[a]=s:u[a]=s)}))},ah=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)oh(t,e[i]);return t};function sh(t,e,n,i,r,o){return(t===e||Math.min(t,e)<=r&&r<=Math.max(t,e))&&(n===i||Math.min(n,i)<=o&&o<=Math.max(n,i))}function uh(t,e,n){var i=t;(!t.length||e<t[0]||e===t[0]&&n<t[1])&&(i[0]=e,i[1]=n)}function hh(t,e,n,i){var r=X(t,2),o=r[0],a=r[1],s=X(e,2),u=s[0],h=s[1],c=X(n,2),l=c[0],p=c[1],d=X(i,2),f=d[0],g=d[1],y=[];if((g-p)*(u-o)==(h-a)*(f-l))(h-a)*(l-o)==(p-a)*(u-o)&&(sh(o,u,a,h,l,p)&&uh(y,l,p),sh(o,u,a,h,f,g)&&uh(y,f,g),sh(l,f,p,g,o,a)&&uh(y,o,a),sh(l,f,p,g,u,h)&&uh(y,u,h));else{var v=(l*(g-p)+a*(f-l)-p*(f-l)-o*(g-p))/((u-o)*(g-p)-(f-l)*(h-a)),m=(o*(h-a)+p*(u-o)-a*(u-o)-l*(h-a))/((f-l)*(h-a)-(u-o)*(g-p));v>=0&&v<=1&&m>=0&&m<=1&&(y[0]=o+v*(u-o),y[1]=a+v*(h-a))}return y}function ch(t,e){var n=X(t,2),i=n[0],r=n[1],o=X(e,2),a=o[0],s=o[1];return Math.pow(Math.pow(i-a,2)+Math.pow(r-s,2),.5)}function lh(t){return void 0===t&&(t=0),function(e,n,i){var r,o=i.value;"function"==typeof o&&(i.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!r){var i=this;r=window.setTimeout((function(){o.apply(i,e),r=null}),t)}})}}function ph(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]}var dh=function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.init(),i}return F(e,t),e.prototype.init=function(){this.createMarker()},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.clear(),this.createMarker()},e.prototype.clear=function(){var t;null===(t=this.markerShape)||void 0===t||t.destroy(),this.removeChildren()},e.prototype.createMarker=function(){var t=function(t){var e="default";if(tt(t)&&t instanceof Image)e="image";else if(J(t))e="symbol";else if(st(t)){var n=new RegExp("data:(image|text)");e=t.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?"url":"symbol"}return e}(this.attributes.symbol);["base64","url","image"].includes(t)?this.markerShape=new ss({name:"markerImage",style:this.getMarkerImageShapeCfg()}):"symbol"===t&&(this.markerShape=new hs({name:"markerSymbol",style:this.getMarkerSymbolShapeCfg()})),this.markerShape&&this.appendChild(this.markerShape)},e.prototype.getMarkerSymbolShapeCfg=function(){var t=this.attributes,n=(t.x,t.y,t.size),i=void 0===n?0:n,r=t.symbol,o=V(t,["x","y","size","symbol"]),a=i/2,s=J(r)?r:e.MARKER_SYMBOL_MAP.get(r),u=null==s?void 0:s(0,0,a);return G({path:u},o)},e.prototype.getMarkerImageShapeCfg=function(){var t=this.attributes,e=t.size,n=void 0===e?0:e,i=2*n;return{x:-n,y:-n,width:i,height:i,img:t.symbol}},e.tag="marker",e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(t,n){e.MARKER_SYMBOL_MAP.set(t,n)},e.defaultOptions={type:e.tag,style:{x:0,y:0,size:16}},e}(Bu);dh.registerSymbol("circle",ph),dh.registerSymbol("square",(function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]})),dh.registerSymbol("diamond",(function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]})),dh.registerSymbol("triangle",(function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+i],["L",t,e-i],["L",t+n,e+i],["Z"]]})),dh.registerSymbol("triangle-down",(function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-i],["L",t+n,e-i],["L",t,e+i],["Z"]]})),dh.registerSymbol("line",(function(t,e,n){return[["M",t-n,e],["L",t+n,e]]})),dh.registerSymbol("dot",(function(t,e,n){return[["M",t-n,e],["L",t+n,e]]})),dh.registerSymbol("dash",(function(t,e,n){return[["M",t-n,e],["L",t+n,e]]})),dh.registerSymbol("smooth",(function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]})),dh.registerSymbol("hv",(function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]})),dh.registerSymbol("vh",(function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]})),dh.registerSymbol("hvh",(function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]})),dh.registerSymbol("vhv",(function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}));var fh=function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.init(),i}return F(e,t),Object.defineProperty(e.prototype,"backgroundShapeCfg",{get:function(){var t=this.attributes,e=t.backgroundStyle,n=t.radius;return G({radius:void 0===n?0:n},e?$u(e):{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markerShapeCfg",{get:function(){return this.attributes.marker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textShapeCfg",{get:function(){var t=this.attributes,e=t.text,n=t.textStyle;return G(G({},$u(n)),{x:0,y:0,text:e})},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initShape(),this.update(),this.bindEvents()},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.updateBackground(),this.updateMarker(),this.updateText(),this.autoFit()},e.prototype.clear=function(){this.markerShape.destroy(),this.textShape.destroy(),this.backgroundShape.destroy()},e.prototype.initShape=function(){this.markerShape=new dh({name:"tag-marker",style:this.markerShapeCfg}),this.textShape=new ds({name:"tag-text",style:this.textShapeCfg}),this.backgroundShape=new ps({name:"background"}),this.backgroundShape.appendChild(this.markerShape),this.backgroundShape.appendChild(this.textShape),this.appendChild(this.backgroundShape),this.backgroundShape.toBack()},e.prototype.updateBackground=function(){this.backgroundShape.attr(this.backgroundShapeCfg)},e.prototype.updateMarker=function(){this.markerShape.update(this.markerShapeCfg)},e.prototype.updateText=function(){this.textShape.attr(this.textShapeCfg)},e.prototype.autoFit=function(){var t=this.attributes,e=t.padding,n=t.spacing,i=t.marker,r=t.text,o=t.align,a=t.verticalAlign,s=X(Yu(e),4),u=s[0],h=s[1],c=s[2],l=s[3],p=i.size,d=void 0===p?0:p,f=Zu(this.markerShape),g=f.width,y=f.height,v=this.textShape.getBoundingClientRect(),m=v.width,b=v.height,x=l+h,S=0;d>0&&(x+=g+n,S=Math.max(S,y)),""!==r&&(x+=m,S=Math.max(S,b)),S+=u+c;var w=0,E=0;"center"===o?w=-x/2:"end"===o&&(w=-x),"middle"===a?E=-S/2:"bottom"===a&&(E=-S),this.backgroundShape.attr({x:w,y:E,width:x,height:S}),this.markerShape.attr({x:l+g/2,y:S/2});var T=l;d&&(T+=g+n),this.textShape.attr({x:T,y:S/2})},e.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",(function(){var e=t.attributes,n=e.backgroundStyle,i=e.textStyle;t.textShape.attr($u(i,"active",!0)),t.backgroundShape.attr(n?$u(n,"active",!0):{}),t.autoFit()})),this.addEventListener("mouseleave",(function(){t.textShape.attr(t.textShapeCfg),t.backgroundShape.attr(t.backgroundShapeCfg),t.autoFit()}))},e.tag="tag",e.defaultOptions={type:e.tag,style:{text:"",padding:4,align:"start",verticalAlign:"top",textStyle:{default:{fontSize:12,textAlign:"start",textBaseline:"middle",fill:"#000"},active:{}},marker:{symbol:"circle",size:0},spacing:4,radius:2,backgroundStyle:{default:{fill:"#fafafa",stroke:"#d9d9d9",lineWidth:1}}}},e}(Bu),gh={small:{textStyle:{fontSize:10},buttonStyle:{width:40,height:20},markerStyle:{size:8}},middle:{textStyle:{fontSize:12},buttonStyle:{width:60,height:30},markerStyle:{size:12}},large:{textStyle:{fontSize:16},buttonStyle:{width:80,height:40},markerStyle:{size:16}}},yh={primary:{textStyle:{default:{fill:"#fff"},active:{}},buttonStyle:{default:{fill:"#1890ff",lineWidth:0},active:{fill:"#40a9ff"}},markerStyle:{default:{fill:"#1890ff"},active:{fill:"#40a9ff"}}},dashed:{textStyle:{default:{},active:{}},buttonStyle:{default:{stroke:"#bbb",lineDash:[5,5]},active:{}},markerStyle:{}},link:{textStyle:{default:{fill:"#1890ff"},active:{}},buttonStyle:{default:{lineWidth:0},active:{}},markerStyle:{default:{fill:"#1890ff"}}},text:{textStyle:{default:{fill:"#000"},active:{}},buttonStyle:{default:{lineWidth:0},active:{}},markerStyle:{default:{stroke:"#000"}}},default:{textStyle:{default:{fill:"#000"},active:{fill:"#1890ff"}},buttonStyle:{default:{stroke:"#bbb"},active:{stroke:"#1890ff"}},markerStyle:{default:{stroke:"#bbb",lineWidth:1},active:{stroke:"#1890ff"}}}},vh={strict:{textStyle:{fill:"#b8b8b8"},buttonStyle:{},markerStyle:{}},textStyle:{},buttonStyle:{stroke:"#d9d9d9",fill:"#f5f5f5"},markerStyle:{stroke:"#d9d9d9"}},mh=function(t){function e(n){var i=t.call(this,ah({},e.defaultOptions,n))||this;return i.clickEvents=function(){var t=i.attributes.onClick;!i.disabled&&(null==t||t.call(i,i))},i.mouseenterEvent=function(){i.attributes.disabled||(i.markerShape.update(i.getStyle("markerStyle","active")),i.textShape.attr(i.getStyle("textStyle","active")),i.backgroundShape.attr(G(G({},i.getStyle("buttonStyle","active")),{width:i.buttonWidth,height:i.buttonHeight})))},i.mouseleaveEvent=function(){i.markerShape.update(i.getStyle("markerStyle")),i.textShape.attr(i.getStyle("textStyle")),i.backgroundShape.attr(G(G({},i.getStyle("buttonStyle")),{width:i.buttonWidth,height:i.buttonHeight}))},i.init(),i}return F(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.attributes.disabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markerWidth",{get:function(){return this.markerShape.isVisible()?this.getStyle("markerStyle").size:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var t=this.attributes.text;if(""===t)return t;var e=this.textAvailableWidth;return Fu(t,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return""===this.textShape.attr("text")?0:ju(this.text,Gu(this.textShape))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textAvailableWidth",{get:function(){var t=this.attributes,e=t.marker,n=t.padding,i=t.ellipsis,r=t.width,o=t.markerSpacing;if(!i)return 1/0;var a=yt(r)?this.getStyle("buttonStyle").width:r;return e?a-2*n-o-this.markerWidth:a-2*n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonWidth",{get:function(){var t=this.attributes,e=t.marker,n=t.padding,i=t.width,r=t.ellipsis,o=t.markerSpacing;if(!yt(i))return i;if(r)return this.getStyle("buttonStyle").width;var a=this.textShape.attr("text"),s=this.markerWidth,u=this.textWidth,h=2*n;return e?h+=""!==a?s+u+o:s:""!==a&&(h+=u),h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonHeight",{get:function(){return this.attributes.height||this.getStyle("buttonStyle").height},enumerable:!1,configurable:!0}),e.prototype.getStyle=function(t,e){void 0===e&&(e="default");var n=this.attributes,i=n.size,r=n.type,o=n.disabled,a=St({},Ct(gh,[i,t]),$u(Ct(yh,[r,t]),e),$u(Ct(this.attributes,t),e,!0));return o&&(Object.keys(a).forEach((function(e){e in vh[t]&&(a[e]=Ct(vh,[t,e]))})),Object.keys(vh.strict[t]).forEach((function(e){a[e]=Ct(vh,["strict",t,e])})),St(a,$u(Ct(this.attributes,t),"disabled"))),a},e.prototype.init=function(){this.initShape(),this.updateMarker(),this.updateText(),this.updateButton(),this.adjustLayout(),this.bindEvents()},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.updateMarker(),this.updateText(),this.updateButton(),this.adjustLayout()},e.prototype.clear=function(){},e.prototype.destroy=function(){this.removeChildren(!0),t.prototype.destroy.call(this)},e.prototype.initShape=function(){this.markerShape=new dh({name:"marker",style:G({symbol:"circle"},this.getStyle("markerStyle"))}),this.textShape=new ds({name:"text",style:{text:""}}),this.backgroundShape=new ps({name:"background",style:{width:0,height:0}}),this.backgroundShape.appendChild(this.markerShape),this.backgroundShape.appendChild(this.textShape),this.appendChild(this.backgroundShape)},e.prototype.updateMarker=function(){var t=this.attributes.marker;yt(t)?this.markerShape.hide():(this.markerShape.update(G({symbol:t},this.getStyle("markerStyle"))),this.markerShape.show())},e.prototype.updateText=function(){var t=this.text;""===t?this.textShape.hide():(this.textShape.attr(G(G({},this.getStyle("textStyle")),{text:t})),this.textShape.show())},e.prototype.updateButton=function(){var t=this.attributes.disabled;this.attr("cursor",t?"not-allowed":"pointer");var e=this.buttonHeight,n=this.getStyle("buttonStyle");this.backgroundShape.attr(G(G({},n),{height:e}))},e.prototype.bindEvents=function(){this.addEventListener("click",this.clickEvents),this.addEventListener("mouseenter",this.mouseenterEvent),this.addEventListener("mouseleave",this.mouseleaveEvent)},e.prototype.adjustLayout=function(){var t=this.attributes,e=t.padding,n=t.marker,i=t.markerAlign,r=t.markerSpacing,o=this.buttonWidth,a=this.buttonHeight,s=o/2,u=this.textWidth/2,h=this.textShape.attr("text"),c=0,l=0,p=a/2,d=a/2;if(n){var f=this.markerWidth,g=f/2;""===h?l=s:"left"===i?(l=g+e,c=e+f+r+u):(l=this.buttonWidth-e-g,c=e+u)}else""!==h&&(c=s);this.markerShape.attr({x:l,y:p}),this.textShape.attr({x:c,y:d}),this.backgroundShape.attr({width:this.buttonWidth})},e.tag="button",e.defaultOptions={type:e.tag,style:{disabled:!1,cursor:"pointer",padding:10,size:"middle",type:"default",text:"",markerAlign:"left",markerSpacing:5,textStyle:{default:{textAlign:"center",textBaseline:"middle"},active:{}},buttonStyle:{default:{lineWidth:1,radius:5},active:{}},markerStyle:{default:{}}}},e}(Bu);!function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.cursorX=0,i.cursorY=0,i.init(),i}F(e,t),e.prototype.init=function(){var t=this;this.cursorX=0,this.cursorY=0;var n=this.attributes,i=n.x,r=n.y,o=n.items,a=n.textStyle,s=X(Yu(n.padding),3),u=s[0],h=s[2];this.container=new ns({name:"".concat(e.tag,"-container")}),this.appendChild(this.container),this.container.translate(i+h,r+u),o.forEach((function(n,i){var r=new fh({name:"".concat(e.tag,"-item"),id:n.id,style:G(G({x:t.cursorX,y:t.cursorY,text:gt(n.text)?n.id:n.text,textStyle:a},kt(n,["marker"])),{padding:0,backgroundStyle:null})}),s=r.getBounds(),u=s.getMax()[0]-s.getMin()[0],h=s.getMax()[1]-s.getMin()[1];t.autoWrap(r,u,h),t.container.appendChild(r),t.bindEvents(r,n),i!==o.length-1&&t.createSeparator(t.container,h,i)}))},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.clear(),this.init()},e.prototype.clear=function(){this.container.destroy()},e.prototype.createSeparator=function(t,n,i){var r=this.attributes.separator,o=r.spacing,a=void 0===o?0:o,s=r.text,u=void 0===s?"/":s,h=r.style,c=new ds({name:"".concat(e.tag,"-separator"),id:"".concat(e.tag,"-separator-").concat(i),style:G(G({x:this.cursorX+a,y:this.cursorY},h),{text:u,textBaseline:"bottom"})}),l=c.getBounds(),p=l.getMax()[0]-l.getMin()[0],d=l.getMax()[1]-l.getMin()[1];this.autoWrap(c,p+a,d)||(this.cursorX+=a),c.translate(0,n),t.appendChild(c)},e.prototype.bindEvents=function(t,e){var n=this.attributes,i=n.items,r=n.onClick;r&&t.addEventListener("click",(function(){r.call(t,e.id,e,i)}))},e.prototype.autoWrap=function(t,e,n){var i=this.attributes,r=i.width,o=i.padding;if(this.cursorX+=e,!gt(r)){var a=r-X(Yu(o),2)[1];if(this.cursorX>a)return t.attr({x:0,y:this.cursorY+n}),this.cursorX=e,this.cursorY+=n,!0}return!1},e.tag="breadcrumb",e.defaultOptions={type:e.tag,style:{separator:{text:"/",style:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"},spacing:8},textStyle:{default:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"},active:{fill:"#5468ff",cursor:"pointer"}},padding:[8,8,8,8]}}}(Bu);class bh{constructor(t){this.options=St({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=St({},this.options,t),this.rescale(t)}rescale(t){}}function xh(t,e,n){for(let i=0;i<e.length;i+=1)t.has(e[i])||t.set(n(e[i]),i)}function Sh(t){const{value:e,from:n,to:i,mapper:r,notFoundReturn:o}=t;let a=r.get(e);if(void 0===a){if(o)return o;a=n.push(e)-1,r.set(e,a)}return i[a%i.length]}function wh(t){return t instanceof Date?t=>`${t}`:"object"==typeof t?t=>JSON.stringify(t):t=>t}class Eh extends bh{constructor(t){super(t)}getDefaultOptions(){return{domain:[],range:[]}}map(t){return 0===this.domainIndexMap.size&&xh(this.domainIndexMap,this.getDomain(),this.domainKey),Sh({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return 0===this.rangeIndexMap.size&&xh(this.rangeIndexMap,this.getRange(),this.rangeKey),Sh({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=wh(e),this.rangeKey=wh(n),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);t&&!t.range||this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new Eh(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:e}=this.options;return this.sortedDomain=e?[...t].sort(e):t,this.sortedDomain}}class Th extends Eh{constructor(t){super(t)}getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:void 0}}clone(){return new Th(this.options)}getStep(){return this.step}getBandWidth(){return this.bandWidth}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:e}=this.options;return t>0?t:e}getPaddingOuter(){const{padding:t,paddingOuter:e}=this.options;return t>0?t:e}rescale(){super.rescale();const{align:t,domain:e,range:n,round:i}=this.options,{step:r,bandWidth:o,adjustedRange:a}=function(t){const e={range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,...t},{range:n,stepAmount:i,paddingOuter:r,paddingInner:o}=e;let a,s,u=n[0];const h=n[1]-u,c=2*r,l=i-o;a=h/Math.max(1,c+l),e.round&&(a=Math.floor(a)),u+=(h-a*(i-o))*e.align,s=a*(1-o),e.round&&(u=Math.round(u),s=Math.round(s));const p=new Array(i).fill(0).map(((t,e)=>u+e*a));return{step:a,adjustedRange:p,bandWidth:s}}({align:t,range:n,round:i,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),stepAmount:e.length});this.step=r,this.bandWidth=o,this.adjustedRange=a}}function Ph(t,...e){return e.reduce(((t,e)=>n=>t(e(n))),t)}function Ch(t,e){return e-t?n=>(n-t)/(e-t):t=>.5}const Mh=Math.sqrt(50),kh=Math.sqrt(10),Ah=Math.sqrt(2);function Oh(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/10**r;return r>=0?(o>=Mh?10:o>=kh?5:o>=Ah?2:1)*10**r:-(10**-r)/(o>=Mh?10:o>=kh?5:o>=Ah?2:1)}const _h=(t,e,n=5)=>{const i=[t,e];let r,o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&([s,u]=[u,s],[o,a]=[a,o]),r=Oh(s,u,n),r>0?(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,r=Oh(s,u,n)):r<0&&(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,r=Oh(s,u,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r),i},Nh=1e3,Lh=6e4,Ih=36e5,Rh=864e5,Dh=6048e5,Bh=2592e6,jh=31536e6;function Fh(t,e,n,i){const r=(t,r)=>{r&&((t,e)=>{const r=t=>i(t)%e==0;let o=e;for(;o&&!r(t);)n(t,-1),o-=1})(t,r),e(t)},o=(t,e)=>{const i=new Date(+t-1);return r(i,e),n(i,e),r(i),i};return{ceil:o,floor:(t,e)=>{const n=new Date(+t);return r(n,e),n},range:(t,e,i,a)=>{const s=[],u=Math.floor(i);for(let h=a?o(t,i):o(t);+h<+e;n(h,u),r(h))s.push(new Date(+h));return s},duration:t}}Fh(1,(t=>t),((t,e=1)=>{t.setTime(+t+e)}),(t=>t.getTime())),Fh(Nh,(t=>{t.setMilliseconds(0)}),((t,e=1)=>{t.setTime(+t+Nh*e)}),(t=>t.getSeconds())),Fh(Lh,(t=>{t.setSeconds(0,0)}),((t,e=1)=>{t.setTime(+t+Lh*e)}),(t=>t.getMinutes())),Fh(Ih,(t=>{t.setMinutes(0,0,0)}),((t,e=1)=>{t.setTime(+t+Ih*e)}),(t=>t.getHours())),Fh(Rh,(t=>{t.setHours(0,0,0,0)}),((t,e=1)=>{t.setTime(+t+Rh*e)}),(t=>t.getDate()-1));const Gh=Fh(Bh,(t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e=1)=>{const n=t.getMonth();t.setMonth(n+e)}),(t=>t.getMonth())),Vh=(Fh(Dh,(t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)}),((t,e=1)=>{t.setTime(+t+Dh*e)}),(t=>{const e=Gh.floor(t),n=new Date(+t);return Math.floor((+n-+e)/Dh)})),Fh(jh,(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e=1)=>{const n=t.getFullYear();t.setFullYear(n+e)}),(t=>t.getFullYear())),Fh(1,(t=>t),((t,e=1)=>{t.setTime(+t+e)}),(t=>t.getTime())),Fh(Nh,(t=>{t.setUTCMilliseconds(0)}),((t,e=1)=>{t.setTime(+t+Nh*e)}),(t=>t.getUTCSeconds())),Fh(Lh,(t=>{t.setUTCSeconds(0,0)}),((t,e=1)=>{t.setTime(+t+Lh*e)}),(t=>t.getUTCMinutes())),Fh(Ih,(t=>{t.setUTCMinutes(0,0,0)}),((t,e=1)=>{t.setTime(+t+Ih*e)}),(t=>t.getUTCHours())),Fh(Rh,(t=>{t.setUTCHours(0,0,0,0)}),((t,e=1)=>{t.setTime(+t+Rh*e)}),(t=>t.getUTCDate()-1)),Fh(Bh,(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e=1)=>{const n=t.getUTCMonth();t.setUTCMonth(n+e)}),(t=>t.getUTCMonth())));function Wh(t){return!(yt(t)||(e=t,null===e)||Number.isNaN(t));var e}Fh(Dh,(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)}),((t,e=1)=>{t.setTime(+t+Dh*e)}),(t=>{const e=Vh.floor(t),n=new Date(+t);return Math.floor((+n-+e)/Dh)})),Fh(jh,(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e=1)=>{const n=t.getUTCFullYear();t.setUTCFullYear(n+e)}),(t=>t.getUTCFullYear()));var Hh=n(8910),zh=n.n(Hh);function Uh(t,e,n){let i=n;return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function Yh(t){const e=zh().get(t);if(!e)return null;const{model:n,value:i}=e;return"rgb"===n?i:"hsl"===n?function(t){const e=t[0]/360,n=t[1]/100,i=t[2]/100,r=t[3];if(0===n)return[255*i,255*i,255*i,r];const o=i<.5?i*(1+n):i+n-i*n,a=2*i-o;return[255*Uh(a,o,e+1/3),255*Uh(a,o,e),255*Uh(a,o,e-1/3),r]}(i):null}const Xh=(t,e)=>n=>t*(1-n)+e*n,qh=(t,e)=>"number"==typeof t&&"number"==typeof e?Xh(t,e):"string"==typeof t&&"string"==typeof e?((t,e)=>{const n=Yh(t),i=Yh(e);return null===n||null===i?n?()=>t:()=>e:t=>{const e=new Array(4);for(let r=0;r<4;r+=1){const o=n[r],a=i[r];e[r]=o*(1-t)+a*t}const[r,o,a,s]=e;return`rgba(${Math.round(r)}, ${Math.round(o)}, ${Math.round(a)}, ${s})`}})(t,e):()=>t,$h=(t,e)=>{const n=Xh(t,e);return t=>Math.round(n(t))},Kh=(t,e,n)=>{let i,r,o=t,a=e;if(o===a&&n>0)return[o];let s=Oh(o,a,n);if(0===s||!Number.isFinite(s))return[];if(s>0){o=Math.ceil(o/s),a=Math.floor(a/s),r=new Array(i=Math.ceil(a-o+1));for(let t=0;t<i;t+=1)r[t]=(o+t)*s}else{s=-s,o=Math.ceil(o*s),a=Math.floor(a*s),r=new Array(i=Math.ceil(a-o+1));for(let t=0;t<i;t+=1)r[t]=(o+t)/s}return r};Number.EPSILON;const Zh=(t,e,n)=>{const[i,r]=t,[o,a]=e;let s,u;return i<r?(s=Ch(i,r),u=n(o,a)):(s=Ch(r,i),u=n(a,o)),Ph(u,s)},Jh=(t,e,n)=>{const i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=t[0]>t[i],s=a?[...t].reverse():t,u=a?[...e].reverse():e;for(let t=0;t<i;t+=1)r[t]=Ch(s[t],s[t+1]),o[t]=n(u[t],u[t+1]);return e=>{const n=function(t,e,n,i,r){let o=1,a=i||t.length;const s=t=>t;for(;o<a;){const n=Math.floor((o+a)/2);s(t[n])>e?a=n:o=n+1}return o}(t,e,0,i)-1,a=r[n];return Ph(o[n],a)(e)}},Qh=(t,e,n,i)=>(Math.min(t.length,e.length)>2?Jh:Zh)(t,e,i?$h:n);class tc extends bh{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Xh,tickCount:5}}map(t){return Wh(t)?this.output(t):this.options.unknown}invert(t){return Wh(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,e,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,e,n,...i)}getTicks(){const{tickMethod:t}=this.options,[e,n,i,...r]=this.getTickMethodOptions();return t(e,n,i,...r)}getTickMethodOptions(){const{domain:t,tickCount:e}=this.options;return[t[0],t[t.length-1],e]}chooseNice(){return _h}rescale(){this.nice();const[t,e]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,e,this.chooseClamp(e))}chooseClamp(t){const{clamp:e,range:n}=this.options,i=this.options.domain.map(t),r=Math.min(i.length,n.length);return e?function(t,e){const n=e<t?e:t,i=t>e?t:e;return t=>Math.min(Math.max(n,t),i)}(i[0],i[r-1]):Ot}composeOutput(t,e){const{domain:n,range:i,round:r,interpolate:o}=this.options,a=Qh(n.map(t),i,o,r);this.output=Ph(a,e,t)}composeInput(t,e,n){const{domain:i,range:r}=this.options,o=Qh(r,i.map(t),Xh);this.input=Ph(e,n,o)}}class ec extends tc{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:qh,tickMethod:Kh,tickCount:5}}chooseTransforms(){return[Ot,Ot]}clone(){return new ec(this.options)}}function nc(t,e){for(var n=[],i=0,r=t.length;i<r;i++)n.push(t[i].substr(0,e));return n}var ic=function(t){return function(e,n){var i=n[t].map((function(t){return t.toLowerCase()})),r=i.indexOf(e.toLowerCase());return r>-1?r:null}};var rc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],oc=["January","February","March","April","May","June","July","August","September","October","November","December"],ac=nc(oc,3);!function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0,r=e;i<r.length;i++){var o=r[i];for(var a in o)t[a]=o[a]}}({},{dayNamesShort:nc(rc,3),dayNames:rc,monthNamesShort:ac,monthNames:oc,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}});ic("monthNamesShort"),ic("monthNames");var sc=function(t){function e(e){var n=e.style,i=V(e,["style"]),r=t.call(this,G({type:"lines",style:n},i))||this;return r.linesGroup=new ns({name:"lines"}),r.appendChild(r.linesGroup),r.areasGroup=new ns({name:"areas"}),r.appendChild(r.areasGroup),r.render(),r}return F(e,t),e.prototype.render=function(){var t=this.attributes,e=t.lines,n=t.areas;e&&this.createLines(e),n&&this.createAreas(n)},e.prototype.clear=function(){this.linesGroup.removeChildren(!0),this.areasGroup.removeChildren(!0)},e.prototype.update=function(t){var e=t.lines,n=t.areas;this.clear(),e&&this.setAttribute("lines",e),n&&this.setAttribute("areas",n),this.render()},e.prototype.createLines=function(t){var e=this;t.forEach((function(t){e.linesGroup.appendChild(new hs({name:"line",style:t}))}))},e.prototype.createAreas=function(t){var e=this;t.forEach((function(t){e.areasGroup.appendChild(new hs({name:"area",style:t}))}))},e}(es),uc=function(t){function e(e){var n=e.style,i=V(e,["style"]),r=t.call(this,G({type:"column",style:n},i))||this;return r.columnsGroup=new ns({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return F(e,t),e.prototype.render=function(){var t=this;this.attributes.columns.forEach((function(e){e.forEach((function(e){t.columnsGroup.appendChild(new ps({name:"column",style:e}))}))}))},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),t.columns&&(this.clear(),this.render())},e.prototype.clear=function(){this.removeChildren(!0)},e}(es);function hc(t){return 0===t.length?[0,0]:[ot(lt(t,(function(t){return ot(t)||0}))),rt(ct(t,(function(t){return rt(t)||0})))]}function cc(t){for(var e=mt(t),n=e[0].length,i=X([new Array(n).fill(0),new Array(n).fill(0)],2),r=i[0],o=i[1],a=0;a<e.length;a+=1)for(var s=e[a],u=0;u<n;u+=1)s[u]>=0?(s[u]+=r[u],r[u]=s[u]):(s[u]+=o[u],o[u]=s[u]);return e}function lc(t,e){void 0===e&&(e=!1);var n=e?t.length-1:0,i=t.map((function(t,e){return q([e===n?"M":"L"],X(t),!1)}));return e?i.reverse():i}function pc(t,e){if(void 0===e&&(e=!1),t.length<=2)return lc(t);for(var n=[],i=t.length,r=0;r<i;r+=1){var o=e?t[i-r-1]:t[r];Tt(o,n.slice(-2))||n.push.apply(n,q([],X(o),!1))}var a=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var i=!!e,r=[],o=0,a=t.length;o<a;o+=2)r.push([t[o],t[o+1]]);var s,u,h,c=function(t,e,n,i){var r,o,a,s,u,h,c,l=[],p=!!i;if(p){a=i[0],s=i[1];for(var d=0,f=t.length;d<f;d+=1)a=rr([0,0],a,y=t[d]),s=or([0,0],s,y)}d=0;for(var g=t.length;d<g;d+=1){var y=t[d];if(0!==d||n)if(d!==g-1||n){r=t[[d?d-1:g-1,d-1][n?0:1]],o=t[n?(d+1)%g:d+1];var v=[0,0];v=ar(v=pr(v,o,r),v,.4);var m=sr(y,r),b=sr(y,o),x=m+b;0!==x&&(m/=x,b/=x);var S=ar([0,0],v,-m),w=ar([0,0],v,b);h=ir([0,0],y,S),u=rr([0,0],u=ir([0,0],y,w),or([0,0],o,y)),u=or([0,0],u,rr([0,0],o,y)),h=rr([0,0],h=ir([0,0],y,S=ar([0,0],S=pr([0,0],u,y),-m/b)),or([0,0],r,y)),h=or([0,0],h,rr([0,0],r,y)),u=ir([0,0],y,w=ar([0,0],w=pr([0,0],y,h),b/m)),p&&(h=rr([0,0],h=or([0,0],h,a),s),u=rr([0,0],u=or([0,0],u,a),s)),l.push(c),l.push(h),c=u}else h=y,l.push(c),l.push(h);else c=y}return n&&l.push(l.shift()),l}(r,0,i,n),l=r.length,p=[];for(o=0;o<l-1;o+=1)s=c[2*o],u=c[2*o+1],h=r[o+1],p.push(["C",s[0],s[1],u[0],u[1],h[0],h[1]]);return i&&(s=c[l],u=c[l+1],h=r[0],p.push(["C",s[0],s[1],u[0],u[1],h[0],h[1]])),p}(n,!1);return e?a.unshift(q(["M"],X(t[i-1]),!1)):a.unshift(q(["M"],X(t[0]),!1)),a}function dc(t,e,n){var i=mt(t);return i.push(["L",e,n],["L",0,n],["Z"]),i}var fc=function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.containerShape=new ps({name:"container",style:i.containerCfg}),i.appendChild(i.containerShape),i.init(),i}return F(e,t),Object.defineProperty(e.prototype,"data",{get:function(){var t=this.attributes.data;if(!t||0===(null==t?void 0:t.length))return[[]];var e=mt(t);return ht(e[0])&&(e=[e]),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerCfg",{get:function(){var t=this.attributes;return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesCfg",{get:function(){var t=this,e=this.attributes,n=e.areaStyle,i=e.isStack,r=e.lineStyle,o=e.smooth,a=this.containerCfg.width,s=this.data;if(0===s[0].length)return{lines:[],areas:[]};i&&(s=cc(s));var u=this.createScales(s),h=u.x,c=u.y,l=function(t,e){var n=e.x,i=e.y;return t.map((function(t){return t.map((function(t,e){return[n.map(e),i.map(t)]}))}))}(s,{type:"line",x:h,y:c}),p=[];if(n){var d=hc(s),f=c.map(d[0]<0?0:d[0]);p=i?o?function(t,e,n){for(var i=[],r=t.length-1;r>=0;r-=1){var o=t[r],a=pc(o),s=void 0;if(0===r)s=dc(a,e,n);else{var u=pc(t[r-1],!0),h=o[0];u[0][0]="L",s=q(q(q([],X(a),!1),X(u),!1),[q(["M"],X(h),!1),["Z"]],!1)}i.push(s)}return i}(l,a,f):function(t,e,n){for(var i=[],r=t.length-1;r>=0;r-=1){var o=lc(t[r]),a=void 0;if(0===r)a=dc(o,e,n);else{var s=lc(t[r-1],!0);s[0][0]="L",a=q(q(q([],X(o),!1),X(s),!1),[["Z"]],!1)}i.push(a)}return i}(l,a,f):function(t,e,n,i){return t.map((function(t){return dc(e?pc(t):lc(t),n,i)}))}(l,o,a,f)}return{lines:l.map((function(e,n){return G({stroke:t.getColor(n),path:o?pc(e):lc(e)},r)})),areas:p.map((function(e,i){return G({path:e,fill:t.getColor(i)},n)}))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsCfg",{get:function(){var t=this,e=this.attributes,n=e.isStack,i=e.columnStyle,r=this.containerCfg.height,o=this.data;if(!o)return{columns:[]};n&&(o=cc(o));var a=this.createScales(o),s=a.x,u=a.y,h=X(hc(o),2),c=h[0],l=h[1],p=new ec({domain:[0,l-(c>0?0:c)],range:[0,r]}),d=s.getBandWidth(),f=this.data;return{columns:o.map((function(e,r){return e.map((function(e,a){var h=d/o.length;return G(G({fill:t.getColor(r)},i),n?{x:s.map(a),y:u.map(e),width:d,height:p.map(f[r][a])}:{x:s.map(a)+h*r,y:e>=0?u.map(e):u.map(0),width:h,height:p.map(Math.abs(e))})}))}))}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.sparkShape=this.createSparkline(),this.appendChild(this.sparkShape)},e.prototype.update=function(t){var e=this.attributes.type;this.attr(St({},this.attributes,t));var n=t.type;n&&n!==e&&(this.clear(),this.sparkShape=this.createSparkline(),this.appendChild(this.sparkShape)),this.sparkShape instanceof sc?this.sparkShape.update(this.linesCfg):this.sparkShape.update(this.columnsCfg)},e.prototype.clear=function(){this.removeChild(this.sparkShape),this.sparkShape.clear(),this.sparkShape.destroy()},e.prototype.createSparkline=function(){var t={name:"sparkline"};return"line"===this.attributes.type?new sc(G(G({},t),{style:this.linesCfg})):new uc(G(G({},t),{style:this.columnsCfg}))},e.prototype.getColor=function(t){var e=this.attributes.color;return Q(e)?e[t%e.length]:J(e)?e.call(null,t):e},e.prototype.createScales=function(t){var e=this.attributes,n=e.type,i=e.isGroup,r=e.barPadding,o=this.containerCfg,a=o.width,s=o.height,u=X(hc(t),2),h=u[0],c=u[1];return{type:n,x:"line"===n?new ec({domain:[0,t[0].length-1],range:[0,a]}):new Th({domain:t[0].map((function(t,e){return e})),range:[0,a],paddingInner:i?r:0}),y:new ec({domain:[h>=0?0:h,c],range:[s,0]})}},e.tag="sparkline",e.defaultOptions={style:{type:"line",width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineStyle:{lineWidth:1},isGroup:!1,columnStyle:{lineWidth:1,stroke:"#fff",padding:.1}}},e}(Bu),gc=function(t){function e(e){var n=e.style,i=V(e,["style"]),r=t.call(this,G({type:"handle",style:n},i))||this;return r.iconShape=r.createHandleIcon(),r.appendChild(r.iconShape),r.textShape=r.createHandleText(),r.appendChild(r.textShape),r.setHandleIconRotation(),r}return F(e,t),e.prototype.setHandle=function(t){var e=t.x,n=t.y;this.attr({x:e,y:n})},e.prototype.setHandleText=function(t){var e=t.x,n=t.y,i=t.text;this.textShape.attr({x:e,y:n,text:i})},e.prototype.getIcon=function(){return this.iconShape},e.prototype.getType=function(){return Ct(this.attributes,"handleType")},e.prototype.update=function(t){this.attr(St({},this.attributes,t));var e=t.iconCfg,n=t.textCfg;e&&this.updateIconShape(),n&&this.textShape.attr(G({},n))},e.prototype.updateIconShape=function(){this.removeChild(this.iconShape,!0),this.iconShape=this.createHandleIcon(),this.appendChild(this.iconShape),this.setHandleIconRotation()},e.prototype.createDefaultIcon=function(){var t=this.attributes.iconCfg,e=t.size,n=V(t,["size"]),i=e,r=2.4*i,o=new ps({name:"icon",style:G({width:i,height:r,x:-i/2,y:-r/2,radius:i/4},n)}),a=n.stroke,s=n.lineWidth,u=1/3*i,h=2/3*i,c=1/4*r,l=3/4*r,p=function(t,e,n,i){return new us({name:"line",style:{x1:t,y1:e,x2:n,y2:i,stroke:a,lineWidth:s}})};return o.appendChild(p(u,c,u,l)),o.appendChild(p(h,c,h,l)),o.setOrigin(i/2,r/2),o},e.prototype.createHandleIcon=function(){var t=Ct(this.attributes,["iconCfg"]),e=t.type,n=(t.orient,V(t,["type","orient"]));return"hide"===e?new ps({style:n,name:"icon"}):"symbol"===e?new dh({style:n,name:"icon"}):this.createDefaultIcon()},e.prototype.createHandleText=function(){var t=this.attributes.textCfg;return new ds({name:"text",style:t})},e.prototype.setHandleIconRotation=function(){"vertical"===Ct(this.attributes,["iconCfg","orient"])?this.iconShape.setLocalEulerAngles(90):this.iconShape.setLocalEulerAngles(0)},e}(es),yc=(function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.onSelectionMouseenter=function(){i.selectionShape.attr(i.getStyle("selectionStyle"))},i.onSelectionMouseleave=function(){i.selectionShape.attr(i.getStyle("selectionStyle"))},i.onDragStart=function(t){return function(e){e.stopPropagation(),i.target=t,i.prevPos=i.getOrientVal(Ku(e));var n=i.availableSpace,r=n.x,o=n.y,a=i.attributes,s=a.x,u=a.y;i.selectionStartPos=i.getRatio(i.prevPos-i.getOrientVal([r,o])-i.getOrientVal([s,u])),i.selectionWidth=0,i.addEventListener("mousemove",i.onDragging),i.addEventListener("touchmove",i.onDragging),document.addEventListener("mouseup",i.onDragEnd),document.addEventListener("touchend",i.onDragEnd)}},i.onDragging=function(t){t.stopPropagation();var e=i.getOrientVal(Ku(t)),n=e-i.prevPos;if(n){var r=i.getRatio(n);switch(i.target){case"start":i.setValuesOffset(r);break;case"end":i.setValuesOffset(0,r);break;case"selection":i.setValuesOffset(r,r);break;case"background":i.selectionWidth+=r,i.setValues([i.selectionStartPos,i.selectionStartPos+i.selectionWidth].sort())}i.prevPos=e}},i.onDragEnd=function(){i.removeEventListener("mousemove",i.onDragging),i.removeEventListener("mousemove",i.onDragging),document.removeEventListener("mouseup",i.onDragEnd),document.removeEventListener("touchend",i.onDragEnd)},i.onValueChanged=function(t){var e=new ti("valueChanged",{detail:{oldValue:t,value:i.getValues()}});i.dispatchEvent(e)},i.initShape(),i.selectionStartPos=0,i.selectionWidth=0,i.prevPos=0,i.target="",i.init(),i}F(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.getAttribute("values")},set:function(t){this.setAttribute("values",this.getSafetyValues(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"names",{get:function(){return this.getAttribute("names")},set:function(t){this.setAttribute("names",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundShapeCfg",{get:function(){return G(G({cursor:"crosshair",zIndex:0},this.availableSpace),this.getStyle("backgroundStyle"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineShapeCfg",{get:function(){var t=this.attributes,e=(t.orient,t.sparkline),n=e.padding,i=V(e,["padding"]),r=X(Yu(n),4),o=r[0],a=r[1],s=r[2],u=r[3],h=this.availableSpace,c=h.width,l=h.height,p=this.getStyle("backgroundStyle").lineWidth;return G(G({x:p/2+u,y:p/2+o},i),{zIndex:0,width:c-p-u-a,height:l-p-o-s})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.padding,n=t.width,i=t.height,r=X(Yu(e),4),o=r[0],a=r[1],s=r[2],u=r[3];return{x:u,y:o,width:n-(u+a),height:i-(o+s)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionShapeCfg",{get:function(){return G(G({cursor:"move",zIndex:2},this.calcMask()),this.getStyle("selectionStyle"))},enumerable:!1,configurable:!0}),e.prototype.attributeChangedCallback=function(t,e,n){t in["names","values"]&&this.setHandle()},e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(t){this.values=t},e.prototype.getNames=function(){return this.names},e.prototype.setNames=function(t){this.names=t},e.prototype.init=function(){this.bindEvents()},e.prototype.initShape=function(){this.backgroundShape=new ps({name:"background",style:this.backgroundShapeCfg}),this.appendChild(this.backgroundShape),this.sparklineShape=new fc({name:"sparkline",style:this.sparklineShapeCfg}),this.backgroundShape.appendChild(this.sparklineShape),this.foregroundGroup=new ns({name:"foreground"}),this.backgroundShape.appendChild(this.foregroundGroup),this.selectionShape=new ps({name:"selection",style:this.selectionShapeCfg}),this.foregroundGroup.appendChild(this.selectionShape),this.startHandle=this.createHandle("start"),this.foregroundGroup.appendChild(this.startHandle),this.endHandle=this.createHandle("end"),this.foregroundGroup.appendChild(this.endHandle)},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.backgroundShape.attr(this.backgroundShapeCfg),this.sparklineShape.update(this.sparklineShapeCfg),this.selectionShape.attr(this.selectionShapeCfg),this.startHandle.update(this.getHandleShapeCfg("start")),this.endHandle.update(this.getHandleShapeCfg("end"))},e.prototype.clear=function(){},e.prototype.getSafetyValues=function(t,e){var n;void 0===t&&(t=this.getValues()),void 0===e&&(e=4);var i=this.attributes,r=i.min,o=i.max,a=X(this.getValues(),2),s=a[0],u=a[1],h=X(t||[s,u],2),c=h[0],l=h[1],p=l-c;return c>l&&(c=(n=X([l,c],2))[0],l=n[1]),p>o-r?[r,o]:c<r?s===r&&u===l?[r,l]:[r,p+r]:l>o?u===o&&s===c?[c,o]:[o-p,o]:[Wu(c,e),Wu(l,e)]},e.prototype.getStyle=function(t,e,n){return void 0===e&&(e="default"),n?this.getHandleCfg(n):$u(Ct(this.attributes,t),e,!0)},e.prototype.calcMask=function(t){var e=X(this.getSafetyValues(t),2),n=e[0],i=e[1],r=this.availableSpace,o=r.width,a=r.height;return this.getOrientVal([{y:0,height:a,x:n*o,width:(i-n)*o},{x:0,width:o,y:n*a,height:(i-n)*a}])},e.prototype.calcHandlePosition=function(t){var e=this.availableSpace,n=e.width,i=e.height,r=X(this.getSafetyValues(),2),o=r[0],a=r[1],s=("start"===t?o:a)*this.getOrientVal([n,i]);return{x:this.getOrientVal([s,n/2]),y:this.getOrientVal([i/2,s])}},e.prototype.setHandle=function(){var t=this;this.selectionShape.attr(this.calcMask()),["start","end"].forEach((function(e){var n=t["".concat(e,"Handle")];n.setHandle(t.calcHandlePosition(e)),n.setHandleText(t.calcHandleText(e))}))},e.prototype.calcHandleText=function(t){var e=this.attributes,n=e.orient,i=e.names,r=this.getHandleCfg(t),o=r.spacing,a=r.formatter,s=r.textStyle,u=this.getHandleSize(t),h=this.getSafetyValues(),c=this.availableSpace,l=c.width,p=c.height,d=this.calcMask(),f=d.x,g=d.y,y=d.width,v=d.height,m=X("start"===t?[i[0],h[0]]:[i[1],h[1]],2),b=a(m[0],m[1]),x=new ds({style:G(G({},s),{text:b})}),S=Zu(x),w=S.width,E=S.height;x.destroy();var T=0,P=0,C=u/2;if("horizontal"===n){var M=o+C,k=M+w/2;T="start"===t?f-M-w>0?-k:k:l-f-y-M>w?k:-k}else{var A=o+C;P="start"===t?g-C>E?-A:A:p-g-v-C>E?A:-A}return{x:T,y:P,text:b}},e.prototype.getHandleTextShapeCfg=function(t){var e=this.getHandleCfg(t).textStyle;return G(G({},e),this.calcHandleText(t))},e.prototype.getHandleIconShapeCfg=function(t){var e,n,i=this.attributes,r=i.height,o=i.orient,a=this.getHandleCfg(t),s=a.show,u=a.handleIcon,h=a.handleStyle,c=this.getOrientVal(["ew-resize","ns-resize"]),l=this.getHandleSize(t);return s||(n="hide",e={cursor:c,x:-l/2,y:-r/2,height:r,width:l,opacity:0,fill:"red"}),u?(n="symbol",e=G(G({},h),{cursor:c,size:l,symbol:u})):(n="default",e=G(G({},h),{cursor:c,size:l})),G({orient:o,type:n},e)},e.prototype.getHandleShapeCfg=function(t){return G(G({handleType:t,zIndex:3},this.calcHandlePosition(t)),{iconCfg:this.getHandleIconShapeCfg(t),textCfg:this.getHandleTextShapeCfg(t)})},e.prototype.createHandle=function(t){return new gc({name:"handle",style:this.getHandleShapeCfg(t)})},e.prototype.getHandleCfg=function(t){var e=Ct(this.attributes,"handle"),n=e.start,i=e.end,r=V(e,["start","end"]),o={};return"start"===t?o=n:"end"===t&&(o=i),St({},r,o)},e.prototype.getHandleSize=function(t){var e=this.getHandleCfg(t).size;if(e)return e;var n=this.attributes,i=n.width,r=n.height;return.8*this.getOrientVal([r,i])/2.4},e.prototype.getOrientVal=function(t){var e=X(t,2),n=e[0],i=e[1];return"horizontal"===this.attributes.orient?n:i},e.prototype.setValuesOffset=function(t,e){void 0===e&&(e=0);var n=X(this.getValues(),2),i=n[0],r=n[1],o=[i+t,r+e].sort();this.setValues(o),this.onValueChanged([i,r])},e.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,i=e.height;return t/this.getOrientVal([n,i])},e.prototype.bindEvents=function(){var t=this,e=this.selectionShape;e.addEventListener("mousedown",this.onDragStart("selection")),e.addEventListener("touchstart",this.onDragStart("selection")),e.addEventListener("mouseenter",this.onSelectionMouseenter),e.addEventListener("mouseleave",this.onSelectionMouseleave);var n=function(t){return t&&"text"!==t.name};[this.startHandle,this.endHandle].forEach((function(e){var i=e.getType();e.addEventListener("mousedown",(function(e){var r=e.target;n(r)&&t.onDragStart(i)(e)})),e.addEventListener("touchstart",(function(e){var r=e.target;n(r)&&t.onDragStart(i)(e)}))})),this.backgroundShape.addEventListener("mousedown",this.onDragStart("background")),this.backgroundShape.addEventListener("touchstart",this.onDragStart("background"))},e.tag="slider",e.defaultOptions={type:e.tag,style:{orient:"horizontal",values:[0,1],names:["",""],min:0,max:1,width:200,height:20,sparkline:{padding:[1,1,1,1]},padding:[0,0,0,0],backgroundStyle:{default:{fill:"#fff",stroke:"#e4eaf5",lineWidth:1}},selectionStyle:{default:{fill:"#afc9fb",opacity:.5,stroke:"#afc9fb",lineWidth:1},active:{fill:"#ccdaf5"}},handle:{show:!0,formatter:function(t){return t},spacing:10,textStyle:{fill:"#63656e",textAlign:"center",textBaseline:"middle"},handleStyle:{stroke:"#c5c5c5",fill:"#fff",lineWidth:1}}}}}(Bu),function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.onValueChanged=function(t){var e=i.value;if(t!==e){var n={detail:{oldValue:t,value:e}},r=new ti("scroll",n);i.dispatchEvent(r);var o=new ti("valueChanged",n);i.dispatchEvent(o)}},i.onTrackClick=function(t){var e=i.attributes,n=e.x,r=e.y,o=e.thumbLen,a=X(i.padding,4),s=a[0],u=a[3],h=i.getOrientVal([n+u,r+s]),c=i.getOrientVal(Ku(t))-o/2,l=i.valueOffset(c-h,!0);i.setValue(l)},i.onThumbMouseenter=function(){i.thumbShape.attr(i.getStyle("thumbStyle","active"))},i.onTrackMouseenter=function(){i.trackShape.attr(i.getStyle("trackStyle","active"))},i.onThumbMouseleave=function(){i.thumbShape.attr(i.getStyle("thumbStyle"))},i.onTrackMouseleave=function(){i.trackShape.attr(i.getStyle("trackStyle"))},i.onDragStart=function(t){t.stopPropagation(),i.prevPos=i.getOrientVal(Ku(t)),document.addEventListener("mousemove",i.onDragging),document.addEventListener("mouseup",i.onDragEnd),document.addEventListener("touchmove",i.onDragging),document.addEventListener("touchcancel",i.onDragEnd)},i.onDragging=function(t){t.stopPropagation();var e=i.getOrientVal(Ku(t)),n=e-i.prevPos;i.setOffset(n),i.prevPos=e},i.onDragEnd=function(t){t.preventDefault(),document.removeEventListener("mousemove",i.onDragging),document.removeEventListener("mouseup",i.onDragEnd),document.removeEventListener("touchmove",i.onDragging),document.removeEventListener("touchcancel",i.onDragEnd)},i.init(),i}return F(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getAttribute("value")},set:function(t){var e=this.attributes,n=e.value,i=e.min,r=e.max;this.setAttribute("value",ut(t,i,r)),this.onValueChanged(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return Yu(this.attributes.padding)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.width,n=t.height,i=X(this.padding,4),r=i[0],o=i[1],a=i[2],s=i[3];return{x:s,y:r,width:e-(s+o),height:n-(r+a)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLen",{get:function(){var t=this.availableSpace,e=t.width,n=t.height;return this.getOrientVal([e,n])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var t=this.attributes.isRound,e=this.availableSpace,n=e.width,i=e.height,r=Ct(this.attributes,["thumbStyle","default","radius"]);return t?r||this.getOrientVal([i,n])/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackShapeCfg",{get:function(){var t=this.attributes,e=t.width,n=t.height;return G(G({},this.getStyle("trackStyle")),{width:e,height:n,x:0,y:0})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbShapeCfg",{get:function(){var t=this.attributes,e=t.value,n=t.thumbLen,i=this.availableSpace,r=i.x,o=i.y,a=this.thumbRadius,s=this.valueOffset(e);return G(G(G(G({},i),this.getStyle("thumbStyle")),this.getOrientVal([{x:r+s,width:n},{y:o+s,height:n}])),{radius:a})},enumerable:!1,configurable:!0}),e.prototype.attributeChangedCallback=function(t,e,n){if("value"===t){var i=this.valueOffset(n),r=X(this.padding,4),o=r[0],a=r[3];this.setThumbOffset(i+this.getOrientVal([a,o]))}},e.prototype.getValue=function(){return this.getAttribute("value")},e.prototype.setValue=function(t){this.value=t},e.prototype.setOffset=function(t){var e=this.getValue();this.setValue(this.valueOffset(t,!0)+e)},e.prototype.init=function(){this.initShape(),this.trackShape.attr(this.trackShapeCfg),this.thumbShape.attr(this.thumbShapeCfg),this.bindEvents()},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.trackShape.attr(this.trackShapeCfg),this.thumbShape.attr(this.thumbShapeCfg)},e.prototype.clear=function(){},e.prototype.destroy=function(){this.removeChildren(!0)},e.prototype.initShape=function(){this.trackShape=new ps({name:"track"}),this.appendChild(this.trackShape),this.thumbShape=new ps({name:"thumb"}),this.trackShape.appendChild(this.thumbShape)},e.prototype.valueOffset=function(t,e){void 0===e&&(e=!1);var n=this.attributes,i=n.thumbLen,r=n.min,o=n.max,a=this.trackLen-i;return e?t/a:a*ut(t,r,o)},e.prototype.getStyle=function(t,e){return void 0===e&&(e="default"),$u(Ct(this.attributes,t),e)},e.prototype.setThumbOffset=function(t){this.thumbShape.attr(this.getOrientVal(["x","y"]),t)},e.prototype.bindEvents=function(){this.trackShape.addEventListener("click",this.onTrackClick),this.thumbShape.addEventListener("mousedown",this.onDragStart),this.thumbShape.addEventListener("touchstart",this.onDragStart),this.onHover()},e.prototype.getOrientVal=function(t){return"horizontal"===this.attributes.orient?t[0]:t[1]},e.prototype.onHover=function(){this.thumbShape.addEventListener("mouseenter",this.onThumbMouseenter),this.trackShape.addEventListener("mouseenter",this.onTrackMouseenter),this.thumbShape.addEventListener("mouseleave",this.onThumbMouseleave),this.trackShape.addEventListener("mouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e.defaultOptions={type:e.tag,style:{orient:"vertical",width:10,height:200,value:0,min:0,max:1,isRound:!0,thumbLen:20,padding:[2,2,2,2],trackStyle:{default:{fill:"#fafafa",lineWidth:1,stroke:"#e8e8e8"},active:{}},thumbStyle:{default:{fill:"#c1c1c1"},active:{opacity:.8}}}},e}(Bu)),vc=Math.abs,mc=Math.acos,bc=Math.PI,xc=Math.sqrt;function Sc(t){var e=X(t,2),n=e[0],i=e[1];return xc(Math.pow(n,2)+Math.pow(i,2))}function wc(t,e){var n=X(t,2),i=n[0],r=n[1];if(void 0===e&&(e=1),0===i&&0===r)return[i,r];var o=function(t){var n=vc(t);return 1===e?n:-n};return ur([0,0],0===i||0===r?[o(r),o(i)]:[1,-i/r])}function Ec(t,e){var n=X(t,2),i=n[0],r=n[1],o=X(e,2),a=o[0],s=o[1],u=i*s-r*a,h=mc((i*a+r*s)/(Sc([i,r])*Sc([a,s])))/bc*180;return u>0?h:-h}function Tc(t){var e=t.getBounds(),n=X([e.getMin(),e.getMax()],2),i=X(n[0],2),r=i[0],o=i[1],a=X(n[1],2);return[(r+a[0])/2,(o+a[1])/2]}var Pc={style:{title:{content:"",style:{fill:"black",fontSize:20,fontWeight:"bold"},position:"start",offset:[0,0],rotate:void 0},axisLine:{style:{fill:"black",stroke:"black",lineWidth:2},arrow:{start:{symbol:"axis-arrow",size:0},end:{symbol:"axis-arrow",size:0}}},ticks:[],ticksThreshold:400,tickLine:{len:10,style:{default:{stroke:"black",lineWidth:2}},offset:0,appendTick:!1},label:{type:"text",style:{default:{fill:"black",textAlign:"center",textBaseline:"middle"}},alignTick:!0,formatter:function(t){return(null==t?void 0:t.text)||String((null==t?void 0:t.value)||"")},offset:[0,0],overlapOrder:["autoRotate","autoEllipsis","autoHide"],margin:[0,0,0,0],autoRotate:!0,optionalAngles:[0,30,45,60,90],autoHide:!0,autoHideTickLine:!0,minLabel:0,autoEllipsis:!0,ellipsisStep:" ",minLength:10,maxLength:1/0},subTickLine:{len:6,count:0,style:{default:{stroke:"black",lineWidth:2}},offset:0},verticalFactor:1}},Cc=St({},Pc,{style:{type:"linear"}}),Mc=St({},Pc,{style:{type:"arc",startAngle:0,endAngle:360,center:[0,0],label:G(G({},Cc.style.label),{align:"normal"})}}),kc=(St({},Pc,{style:{}}),{symbol:"circle",size:0}),Ac={text:"",fillOpacity:0,rotate:0},Oc={year:[["year","second"],["year","day"],["month","day"],["day","day"]],month:[["month","day"],["day","day"]],day:[["month","day"],["day","day"]],hour:[["hour","second"],["hour","minute"],["hour","hour"]],minute:[["minute","second"],["second","second"]],second:[["second","second"]]},_c=Math.abs,Nc=(Math.atan2,Math.cos),Lc=Math.PI,Ic=Math.sin,Rc=(Math.sqrt,function(){function t(t){var e=t.center,n=t.height,i=t.width,r=t.angle;this.center=e,this.height=n,this.width=i,this.setRotation(r)}return t.prototype.getProjectionRadius=function(t){var e=this.dot(t,this.axisX),n=this.dot(t,this.axisY);return(this.width*e+this.height*n)/2},t.prototype.dot=function(t,e){return _c(t[0]*e[0]+t[1]*e[1])},t.prototype.setRotation=function(t){var e=t/180*Lc;return this.axisX=[Nc(e),-Ic(e)],this.axisY=[Ic(e),Nc(e)],this},t.prototype.isCollision=function(t){for(var e=[this.center[0]-t.center[0],this.center[1]-t.center[1]],n=[this.axisX,this.axisY,t.axisX,t.axisY],i=0,r=n.length;i<r;i+=1)if(this.getProjectionRadius(n[i])+t.getProjectionRadius(n[i])<=this.dot(e,n[i]))return!1;return!0},t.prototype.getBounds=function(){return{width:this.width,height:this.height,center:this.center}},t}());function Dc(t,e){var n=X(e,4),i=n[0],r=n[1],o=n[2],a=n[3],s=X(t.getLocalPosition(),2),u=s[0],h=s[1],c=function(t){var e=t.getEulerAngles();t.setEulerAngles(0);var n=t.getBoundingClientRect();return t.setEulerAngles(e),n}(t),l=X([a+c.width+r,i+c.height+o],2),p=l[0],d=l[1],f=t.getLocalEulerAngles();return new Rc({angle:f,center:[u,h],width:p,height:d})}function Bc(t,e,n){var i=Dc(t,n),r=Dc(e,n);return i.isCollision(r)}function jc(t,e){for(var n=1;n<t.length;n+=1)if(Bc(t[n-1],t[n],e))return!0;return!1}dh.registerSymbol("axis-arrow",(function(t,e,n){return[["M",t,e],["L",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]}));var Fc=function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.labelsValues=[],i}return F(e,t),Object.defineProperty(e.prototype,"axisLine",{get:function(){return this.axisLineGroup.getElementsByName("line")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"axisStartArrow",{get:function(){return this.axisLineGroup.getElementsByName("startArrow")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"axisEndArrow",{get:function(){return this.axisLineGroup.getElementsByName("endArrow")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ticksData",{get:function(){var t=this.attributes,e=t.ticks,n=t.ticksThreshold,i=t.label,r=mt(e),o=r.length;if(function(t,e){var n;if(J(e))n=function(t,n){return e(t)-e(n)};else{var i=[];st(e)?i.push(e):Q(e)&&(i=e),n=function(t,e){for(var n=0;n<i.length;n+=1){var r=i[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}}t.sort(n)}(r,(function(t){return t.value})),ht(n)&&n<o){var a=Math.ceil(o/n);r=r.filter((function(t,e){return e%a==0}))}var s=function(t,e){return t.text};return i&&i.formatter&&(s=i.formatter),r.map((function(t,e){var n=t.value,i=t.text,r=void 0===i?void 0:i,o=t.state,a=void 0===o?"default":o,u=t.id,h={id:void 0===u?String(e):u,value:n,state:a,text:yt(r)?String(n):r};return G(G({},h),{text:s(h,e)})}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labels",{get:function(){return this.labelsGroup.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleCfg",{get:function(){var t=this.attributes.title;if(!t)return Ac;var e,n=t,i=n.content,r=n.style,o=n.position,a=X(n.offset,2),s=a[0],u=a[1],h=n.rotate,c={textAlign:"center",textBaseline:"middle"};"start"===o?(c.textAlign="start",e=0):"center"===o?(c.textAlign="center",e=.5):(c.textAlign="end",e=1);var l=X(this.getValuePoint(e),2),p=l[0],d=l[1];return G(G(G({x:p+s,y:d+u,text:i,fillOpacity:1},c),r),{rotate:void 0!==h?h:Ec([1,0],this.getTangentVector(e))})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"axisLineCfg",{get:function(){var t=this,e=this.attributes,n=e.type,i=e.axisLine;if(!i)return{style:{},arrow:{start:G(G({},kc),{rotate:0}),end:G(G({},kc),{rotate:0})},line:{path:[]}};var r=i,o=r.style,a=r.arrow,s=a.start,u=a.end,h=this.getTerminals(),c=X(h.startPos,2),l=c[0],p=c[1],d=X(h.endPos,2),f=d[0],g=d[1],y=function(e){return"linear"===n?Ec([1,0],t.getTangentVector(e)):Ec([0,-1],t.getVerticalVector(e))};return{style:o,arrow:{start:G(G({},s||kc),{x:l,y:p,rotate:y(0)}),end:G(G({},u||kc),{x:f,y:g,rotate:y(1)})},line:{path:this.getAxisLinePath()}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tickLineCfg",{get:function(){var t=this.attributes.tickLine;return yt(t)||!t?G(G({},Pc.style.tickLine),{len:0}):t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ticksCfg",{get:function(){var t=this,e=this.attributes,n=e.subTickLine,i=e.label,r=this.tickLineCfg,o={tickLines:[],subTickLines:[],labels:[]},a=this.ticksData;if(!r)return o;this.labelsValues=[];var s=r.len,u=r.offset;if(r.appendTick){var h=a[a.length-1],c=h.value,l=h.state,p=h.id;1!==c&&a.push({value:1,text:" ",state:l,id:String(Number(p)+1)})}var d=(null==n?void 0:n.count)>=0;return a.forEach((function(e,r){var h=r===a.length-1?1:a[r+1].value,c=e.value,l=e.text,p=X(t.calcTick(c,s,u),2),f=p[0],g=p[1];if(o.tickLines.push(G({path:[q(["M"],X(f),!1),q(["L"],X(g),!1)]},t.getStyle(["tickLine","style"]))),i){var y=i.alignTick,v=X(i.offset,2)[1],m=y?c:(c+h)/2,b=X(t.calcTick(m,s,v),1)[0];t.labelsValues.push(m),o.labels.push(G({x:b[0],y:b[1],text:l},t.getStyle(["label","style"])))}if(d&&r>=0&&c<1)for(var x=n.count,S=n.len,w=n.offset,E=(h-c)/(x+1),T=1;T<=x;T+=1){var P=X(t.calcTick(c+T*E,S,w),2),C=P[0],M=P[1];o.subTickLines.push(G({path:[q(["M"],X(C),!1),q(["L"],X(M),!1)]},t.getStyle(["subTickLine","style"])))}})),o},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelsCfg",{get:function(){return this.attributes.label},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFont",{get:function(){return this.labels.length>0?Gu(this.labels[0]):{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelEulerAngles",{get:function(){var t;return(null===(t=this.labels[0])||void 0===t?void 0:t.getEulerAngles())||0},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initShape(),this.updateTitleShape(),this.updateAxisLineShape(),this.updateTicksShape()},e.prototype.update=function(t){this.attr(ah({},this.attributes,t)),this.updateTitleShape(),this.updateAxisLineShape(),this.updateTicksShape()},e.prototype.clear=function(){},e.prototype.setTickState=function(t){},e.prototype.setLabelEulerAngles=function(t){for(var e=this,n=t;n<0;)n+=180;this.labels.forEach((function(t,i){var r=e.labelsValues[i],o=Ec([1,0],e.getVerticalVector(r)),a=e.getLabelLayout(r,o,function(t){var e=t;return e<0&&(e+=360*Math.ceil(e/-360)),e%360}(n)),s=a.rotate,u=a.textAlign;t.attr({textAlign:u}),t.setEulerAngles(s)}))},e.prototype.getStyle=function(t,e){return void 0===e&&(e="default"),$u(Ct(this.attributes,t),e)},e.prototype.initShape=function(){this.titleShape=new ds({name:"title",style:{text:e.defaultOptions.style.title.content}}),this.appendChild(this.titleShape),this.axisLineGroup=new ns({name:"axis"}),this.appendChild(this.axisLineGroup);var t=new hs({name:"line",style:{path:[]}});this.axisLineGroup.appendChild(t);var n=new dh({name:"startArrow",style:G({},kc)}),i=new dh({name:"endArrow",style:G({},kc)});this.axisLineGroup.appendChild(n),this.axisLineGroup.appendChild(i),this.tickLinesGroup=new ns({name:"tickLinesGroup"}),this.appendChild(this.tickLinesGroup),this.subTickLinesGroup=new ns({name:"subTickLinesGroup"}),this.appendChild(this.subTickLinesGroup),this.labelsGroup=new ns({name:"labelsGroup"}),this.appendChild(this.labelsGroup)},e.prototype.updateTitleShape=function(){var t=this.titleCfg,e=t.rotate,n=V(t,["rotate"]);this.titleShape.attr(n),function(t,e){var n=t.attr("x"),i=t.attr("y"),r=X(Tc(t),2),o=r[0],a=r[1];t.setLocalEulerAngles(e);var s=X(Tc(t),2),u=s[0],h=s[1];t.attr({x:n+o-u,y:i+a-h})}(this.titleShape,e)},e.prototype.updateAxisLineShape=function(){var t=this,e=this.axisLineCfg,n=e.arrow,i=e.line,r=e.style;this.axisLine.attr(G(G(G({},i),r),{fillOpacity:0})),Object.entries(n).forEach((function(e){var n=X(e,2),i=n[0],o=n[1],a=o.rotate,s=V(o,["rotate"]),u="start"===i?t.axisStartArrow:t.axisEndArrow;u.update(G(G({},r),s)),u.setLocalEulerAngles(a)}))},e.prototype.getTickLineShape=function(t){return this.tickLinesGroup.getElementsByName("tickLine").filter((function(e,n){return n===t}))[0]},e.prototype.calcTick=function(t,e,n){var i=X(this.getValuePoint(t),2),r=i[0],o=i[1],a=this.getVerticalVector(t),s=X(ar([0,0],a,e),2),u=s[0],h=s[1],c=X(ar([0,0],a,n),2),l=c[0],p=c[1];return[[r+l,o+p],[r+u+l,o+h+p]]},e.prototype.updateTicksShape=function(){var t=this;this.tickLinesGroup.removeChildren(!0),this.subTickLinesGroup.removeChildren(!0),this.labelsGroup.removeChildren(!0);var e=this.ticksCfg,n=e.tickLines,i=e.labels,r=e.subTickLines;n.forEach((function(e){t.tickLinesGroup.appendChild(new hs({name:"tickLine",style:G({},e)}))})),i.forEach((function(e){var n=V(e,[]);t.labelsGroup.appendChild(new ds({name:"label",style:n}))})),r.forEach((function(e){t.subTickLinesGroup.appendChild(new hs({name:"subTickLine",style:e}))})),this.adjustLabels()},e.prototype.adjustLabels=function(){var t=this,e=this.attributes.label;if(e){var n=e,i=n.rotate,r=n.overlapOrder,o=void 0===r?[]:r,a=n.autoEllipsis,s=n.autoHide,u=n.autoRotate;"number"==typeof i&&this.setLabelEulerAngles(i);var h=function(){},c={autoHide:s?this.autoHideLabel:h,autoEllipsis:a?this.autoEllipsisLabel:h,autoRotate:u?this.autoRotateLabel:h};o.forEach((function(e){c[e].call(t)}))}},e.prototype.isLabelsOverlap=function(){var t=this.labelsCfg.margin;return jc(this.labels,t)},e.prototype.autoRotateLabel=function(){var t,e,n=this.labelsCfg,i=n.rotate,r=n.optionalAngles;if(void 0!==i)return i;var o=this.labelEulerAngles;try{for(var a=Y(r),s=a.next();!s.done;s=a.next()){var u=s.value;if(this.setLabelEulerAngles(u),!this.isLabelsOverlap())return u}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return this.setLabelEulerAngles(o),o},e.prototype.autoHideLabel=function(){for(var t=this,e=this.labelsCfg,n=e.margin,i=e.autoHideTickLine,r=this.labels,o=1;o<r.length-2&&jc(r.filter((function(t,e){return e%o==0})),n);)o+=1;r.forEach((function(e,n){0===n||n===r.length||n%o==0?(e.show(),t.getTickLineShape(n).show()):(e.hide(),i&&t.getTickLineShape(n).hide())}))},e.prototype.getLabelEllipsisStrategy=function(t){var e=this.labelsCfg.type;if("text"===e){var n=this.labelFont;return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return Fu(e[0],t,n)}}return"number"===e?this.getNumberSimplifyStrategy(t):"time"===e?this.getTimeSimplifyStrategy(t):function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[0]}},e.prototype.getTextWidthByLabelFont=function(t){return ju(t,this.labelFont)},e.prototype.getNumberSimplifyStrategy=function(t){var e=this.ticksCfg.labels,n=Number(ct(e,(function(t){return t.text.length})).text),i=this.labelFont,r=Hu(n);return ju(r,i)<=t?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Hu(Number(t[0]))}:(r=Uu(n),ju(r,i)<=t?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Uu(Number(t[0]),1)}:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zu(Number(t[0]))})},e.prototype.getTimeSimplifyStrategy=function(t){for(var e,n,i=this.ticksData,r=lt(i,(function(t){var e=t.text;return new Date(e).getTime()})).text,o=ct(i,(function(t){var e=t.text;return new Date(e).getTime()})).text,a=(l=o,p=void 0,d=void 0,f=void 0,p=X([eh(r),eh(l)],2),d=p[0],f=p[1],d.getFullYear()!==f.getFullYear()?"year":d.getMonth()!==f.getMonth()?"month":d.getDay()!==f.getDay()?"day":d.getHours()!==f.getHours()?"hour":d.getMinutes()!==f.getMinutes()?"minute":"second"),s=new Date("1970-01-01 00:00:00"),u=this.labelFont,h=0;h<Oc[a].length;h+=1){var c=Oc[a][h];if(ju(ih(s,nh(c)),u)<t){e=c;break}e=c}var l,p,d,f,g=X(e,2)[1];for(h=0;h<Qu.length;h+=1)if(Qu.indexOf(g)>=h){if(c=[Qu[0],g],ju(ih(s,nh(c)),u)<t){n=c;break}n=c}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=t[0],s=t[1],u=o;0!==s&&(u=i[s-1].text);var h=e;return 0!==s&&rh(new Date(u),a)===rh(new Date(o),a)||(h=n),ih(new Date(o),nh(h))}},e.prototype.labelsEllipsis=function(t){for(var e=this.getLabelEllipsisStrategy(t),n=this.ticksData,i=0;i<n.length;i+=1){var r=this.ticksData[i].text;this.labels[i].attr("text",r?e.call(this,r,i):"")}},e.prototype.parseLength=function(t){return st(t)?this.getTextWidthByLabelFont(t):t},e.prototype.autoEllipsisLabel=function(){var t=this.labelsCfg,e=t.ellipsisStep,n=t.minLength,i=t.maxLength,r=t.margin,o=this.labels,a=this.parseLength(e),s=this.parseLength(i);if(s===1/0)return 1/0;for(var u=this.parseLength(n),h=s;h>u;h-=a)if(this.labelsEllipsis(h),!jc(o,r))return h;return u},e.tag="axis-base",e.defaultOptions=G({type:e.tag},Pc),e}(Bu),Gc=(function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return t.prototype.init.call(i),i}F(e,t),e.prototype.getAxisLinePath=function(){var t=this.getTerminals(),e=X(t.startPos,2),n=e[0],i=e[1],r=X(t.endPos,2);return[["M",n,i],["L",r[0],r[1]],["Z"]]},e.prototype.getTangentVector=function(){var t=this.getTerminals(),e=X(t.startPos,2),n=e[0],i=e[1],r=X(t.endPos,2);return ur([0,0],[r[0]-n,r[1]-i])},e.prototype.getVerticalVector=function(t){var e=this.attributes.verticalFactor;return ar([0,0],wc(this.getTangentVector()),e)},e.prototype.getValuePoint=function(t){var e=this.getTerminals(),n=X(e.startPos,2),i=n[0],r=n[1],o=X(e.endPos,2),a=t/1;return[a*(o[0]-i)+i,a*(o[1]-r)+r]},e.prototype.getTerminals=function(){var t=this.attributes;return{startPos:t.startPos,endPos:t.endPos}},e.prototype.getLabelLayout=function(t,e,n){var i=1===this.attributes.verticalFactor?0:1,r=n,o="center";return n>90?r=(r-180)%360:n<-90&&(r=(r+180)%360),r<-1?o=["end","start"][i]:r>1&&(o=["start","end"][i]),{rotate:r,textAlign:o}},e.tag="linear",e.defaultOptions=G({type:e.tag},Cc)}(Fc),Math.PI),Vc=Math.abs,Wc=Math.cos,Hc=Math.sin,zc=X([2*Gc],1)[0],Uc=(function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return t.prototype.init.call(i),i}F(e,t),e.prototype.getAxisLinePath=function(){var t=this.attributes,e=t.radius,n=X(t.center,2),i=n[0],r=n[1],o=this.getTerminals(),a=o.startPos,s=o.endPos,u=this.getAngles(),h=u.startAngle,c=u.endAngle,l=Vc(c-h),p=e;if(l===zc)return[["M",i,r-p],["A",e,p,0,1,1,i,r+p],["A",e,p,0,1,1,i,r-p],["Z"]];var d=l>Gc?1:0,f=h>c?0:1;return[["M",i,r],q(["L"],X(a),!1),q(["A",e,p,0,d,f],X(s),!1),["Z"]]},e.prototype.getTangentVector=function(t){var e=this.attributes.verticalFactor;return ur([0,0],wc(this.getVerticalVector(t),e))},e.prototype.getVerticalVector=function(t){var e=X(this.attributes.center,2),n=e[0],i=e[1],r=X(this.getValuePoint(t),2),o=X(ur([0,0],[r[0]-n,r[1]-i]),2);return ar([0,0],[o[0],o[1]],this.attributes.verticalFactor)},e.prototype.getValuePoint=function(t){var e=this.attributes,n=X(e.center,2),i=n[0],r=n[1],o=e.radius,a=this.getAngles(),s=a.startAngle,u=(a.endAngle-s)*t+s;return[i+o*Wc(u),r+o*Hc(u)]},e.prototype.getTerminals=function(){var t=this.attributes,e=X(t.center,2),n=e[0],i=e[1],r=t.radius,o=this.getAngles(),a=o.startAngle,s=o.endAngle;return{startPos:[n+r*Wc(a),i+r*Hc(a)],endPos:[n+r*Wc(s),i+r*Hc(s)]}},e.prototype.getLabelLayout=function(t,e,n){var i=Wu(e,0),r=this.attributes.label.align,o=n,a="center";if("tangential"===r)o=Ec([1,0],this.getTangentVector(t))%180;else{var s=Math.abs(i);if(s<90?a="start":s>90&&(a="end"),0!==n||[90].includes(i)){var u=n>0?0:1;s<90?a=["end","start"][u]:s>90&&(a=["start","end"][u])}"radial"===r&&(o=i,Math.abs(o)>90&&(o-=180))}return{rotate:o,textAlign:a}},e.prototype.getAngles=function(){var t=this.attributes,e=t.startAngle,n=t.endAngle;return Vc(e)<zc&&Vc(n)<zc?{startAngle:e,endAngle:n}:{startAngle:e*Gc/180,endAngle:n*Gc/180}},e.tag="arc",e.defaultOptions=G({type:e.tag},Mc)}(Fc),{style:{x:0,y:0,padding:0,orient:"horizontal",backgroundStyle:{default:{fill:"white",lineWidth:0}},title:{content:"",spacing:10,align:"left",style:{fill:"gray",fontWeight:"bold",fontSize:16,textBaseline:"top"},formatter:function(t){return t}}}}),Yc=St({},Uc,{style:{type:"category",items:[],maxWidth:void 0,maxHeight:void 0,maxCols:void 0,maxRows:void 0,spacing:[10,10],itemMarker:{marker:"circle",size:8,spacing:10,style:{default:{fill:"#d3d2d3",opacity:1,lineWidth:0},selected:{fill:"#d3d2d3",opacity:1},active:{}}},itemName:{spacing:0,style:{default:{fill:"#d3d2d3",fontSize:12,opacity:1,fontWeight:"normal",textBaseline:"middle"},selected:{fill:"#646464",opacity:1,textBaseline:"middle"},active:{opacity:.5,textBaseline:"middle"}},formatter:function(t){return t}},itemValue:{spacing:5,align:"right",style:{default:{fill:"#d3d2d3",fontSize:12,opacity:1,fontWeight:"normal",textBaseline:"middle"},selected:{fill:"#646464",textBaseline:"middle",opacity:1},active:{textBaseline:"middle",opacity:.5}},formatter:function(t){return t}},itemBackgroundStyle:{default:{fill:"#fff"},selected:{opacity:1,fill:"#fff"},active:{opacity:1,fill:"#fff"}},reverse:!1,pageNavigator:{loop:!1}}}),Xc=St({},Uc,{style:{type:"continuous",color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],padding:10,label:{style:{fill:"black",textAlign:"center",textBaseline:"middle"},spacing:10,formatter:function(t){return String(t)},align:"rail"},rail:{width:100,height:50,type:"color",chunked:!1,ticks:[],isGradient:"auto",backgroundColor:"#c5c5c5"},slidable:!0,handle:{size:25,spacing:10,icon:{marker:"default",style:{stroke:"#c5c5c5",fill:"#fff",lineWidth:1}},text:{align:"outside",style:{fill:"#63656e",fontSize:12,textAlign:"center",textBaseline:"middle"},formatter:function(t){return t}}},indicator:{size:8,spacing:10,padding:5,backgroundStyle:{fill:"#262626",stroke:"#262626",radius:5},text:{style:{fill:"white",fontSize:12},formatter:function(t){return String(t)}}}}}),qc=function(t){function e(n){return t.call(this,St({},e.defaultOptions,n))||this}return F(e,t),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes.title,e=t.content,n=t.spacing,i=X(this.getPadding(),4),r=i[0],o=i[3];return e&&""!==e?{x:o,y:r+Zu(this.titleShape).height+n}:{x:o,y:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleShapeCfg",{get:function(){var t=this.attributes.title,e=t.content,n=t.style,i=t.formatter;return G(G({},n),{text:i(e)})},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initShape()},e.prototype.update=function(t){this.titleShape.attr(this.titleShapeCfg),this.adjustTitle()},e.prototype.getStyle=function(t,e){return $u(Ct(this.attributes,t),e)},e.prototype.getOrientVal=function(t){var e=X(t,2),n=e[0],i=e[1];return"horizontal"===this.attributes.orient?n:i},e.prototype.getPadding=function(t){return void 0===t&&(t=this.attributes.padding),Yu(t)},e.prototype.createBackground=function(){this.backgroundShape=new ps({name:"background",style:this.backgroundShapeCfg}),this.appendChild(this.backgroundShape),this.backgroundShape.toBack()},e.prototype.initShape=function(){this.titleShape=new ds({name:"title",style:this.titleShapeCfg}),this.appendChild(this.titleShape)},e.prototype.adjustTitle=function(){var t,e=this.attributes.title,n=Zu(this).width,i=e.align,r=X(this.getPadding(),4),o=r[0],a=r[1],s=r[3];switch(i){case"left":t={x:s,y:o,textAlign:"left"};break;case"right":t={x:n-s-a,y:o,textAlign:"end"};break;case"center":t={x:(n-s-a)/2,y:o,textAlign:"center"}}this.titleShape.attr(t)},e.tag="legend-base",e.defaultOptions=G({type:e.tag},Uc),e}(Bu),$c=function(t){function e(e){var n=e.style,i=V(e,["style"]),r=t.call(this,G({type:"categoryItem",style:n},i))||this;return r.init(),r}return F(e,t),Object.defineProperty(e.prototype,"markerShapeCfg",{get:function(){var t=this.attributes.itemMarker,e=t.marker,n=t.spacing,i=t.size;return G({x:n,symbol:e,size:i},this.getStyle(["itemMarker","style"]))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nameShapeCfg",{get:function(){var t=this.attributes.itemName.content;return G({text:t},this.getStyle(["itemName","style"]))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueShapeCfg",{get:function(){var t=this.attributes.itemValue.content;return G({text:t},this.getStyle(["itemValue","style"]))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundShapeCfg",{get:function(){return G({},this.getStyle("backgroundStyle"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualWidth",{get:function(){var t=this.attributes,e=t.itemName,n=t.itemValue;return 2*Zu(this.markerShape).width+Zu(this.nameShape).width+Zu(this.valueShape).width+e.spacing+n.spacing},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.backgroundShape=new ps({name:"background",style:this.backgroundShapeCfg}),this.appendChild(this.backgroundShape),this.markerShape=new dh({name:"marker",style:this.markerShapeCfg}),this.backgroundShape.appendChild(this.markerShape),this.nameShape=new ds({name:"name",style:this.nameShapeCfg}),this.backgroundShape.appendChild(this.nameShape),this.valueShape=new ds({name:"value",style:this.valueShapeCfg}),this.backgroundShape.appendChild(this.valueShape),this.backgroundShape.toBack(),this.adjustLayout()},e.prototype.getState=function(){return Ct(this.attributes,["state"]).split("-")[0]},e.prototype.setState=function(t){this.update({state:t})},e.prototype.getID=function(){return this.attributes.identify},e.prototype.onHover=function(){var t=this.getState();this.setState("".concat(t,"-active"))},e.prototype.offHover=function(){var t=this.getState();this.setState(t.split("-")[0])},e.prototype.update=function(t){var e=this.getState(),n=t.state;"state"in t&&e!==n&&(this.prevState=e),this.attr(St({},this.attributes,t)),this.markerShape.update(this.markerShapeCfg),this.nameShape.attr(this.nameShapeCfg),this.valueShape.attr(this.valueShapeCfg),this.backgroundShape.attr(this.backgroundShapeCfg),this.adjustLayout()},e.prototype.clear=function(){},e.prototype.getStyle=function(t,e){void 0===e&&(e=this.attributes.state);var n=Ct(this.attributes,t),i=e.split("-");return St.apply(void 0,q([{}],X(i.map((function(t){return $u(n,t)}))),!1))},e.prototype.adjustLayout=function(){var t=this.attributes,e=t.itemWidth,n=t.maxItemWidth,i=t.itemMarker,r=t.itemName,o=t.itemValue,a=r,s=a.content,u=a.spacing,h=o,c=h.content,l=h.spacing,p=""===s||void 0===s,d=""===c||void 0===c,f=p?0:l,g=e||n||1/0,y=i.size,v=rt([2*y,Zu(this.nameShape).height,Zu(this.valueShape).height]),m=g-u-f-2*y,b=d?0:.5*m,x=p?0:.5*m,S=p?"":Fu(s,x,Gu(this.nameShape)),w=d?"":Fu(c,b,Gu(this.valueShape)),E=2*y+u;this.nameShape.attr({text:S,x:E,y:v/2,visibility:p?"hidden":"visible"});var T=p?0:Zu(this.nameShape).width;this.valueShape.attr({text:w,x:E+(e?x:T)+f,y:v/2,visibility:d?"hidden":"visible"}),this.markerShape.attr({x:y,y:v/2}),this.backgroundShape.attr({width:void 0===e?this.actualWidth:e,height:v})},e}(Bu),Kc={text:"",type:"primary",height:40,width:40,buttonStyle:{default:{lineWidth:0,fill:"#fff"},active:{fill:"#fff"},disabled:{fill:"#fff"}},markerStyle:{default:{fill:"black",size:10},disabled:{fill:"#8c8c8c"}}},Zc=function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;i.playState="idle";var r=i.attributes,o=r.view,a=r.initPageNum;return i.currPage=a,i.view=o,i.init(),i}return F(e,t),Object.defineProperty(e.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(this.finishedPromise=new Promise((function(e){t.resolveFinishedPromise=function(){t.finishedPromise=null,e(t.currPage)}}))),"idle"===this.playState&&this.resolveFinishedPromise(),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxPages",{get:function(){var t=this.attributes,e=t.pageWidth,n=t.pageHeight,i=t.orient,r=t.pageLimit;return t.pageCallback||r!==1/0?r:"horizontal"===i?Math.ceil(this.width/e):Math.ceil(this.height/n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this.fullView},set:function(t){var e=this.attributes,n=e.width,i=e.height;if(t.setLocalPosition(0,0),this.fullView=t,!n||!i){var r=Zu(t),o=r.width,a=r.height;this.width=o,this.height=a}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.attributes.width||this.viewWidth},set:function(t){this.viewWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.attributes.height||this.viewHeight},set:function(t){this.viewHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultShape",{get:function(){var t=Ct(this.attributes,["button","position"]);return["top","bottom","left-right"].includes(t)?["left","right"]:["up","down"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCfg",{get:function(){var t=X(this.defaultShape,2),e=t[0],n=t[1],i=this.attributes.button,r=i.prev,o=i.next;return{prev:G({marker:e},r),next:G({marker:n},o)}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initShape(),this.updateView(),this.updateButton(),this.updateButtonState(),this.adjustLayout()},e.prototype.update=function(t){var e=t.view;e&&(this.view&&(this.view.style.clipPath=null,this.removeChild(this.view,!1)),this.currPage=this.attributes.initPageNum,this.view=e,this.view.style.clipPath=this.clipView,this.appendChild(this.view)),this.attr(St({},this.attributes,t)),this.updateView(),this.updateButton(),this.updateButtonState(),this.adjustLayout()},e.prototype.clear=function(){this.view&&(this.view.style.clipPath=null,this.removeChild(this.view,!1)),this.fullView=void 0,this.removeChildren(!0)},e.prototype.destroy=function(){this.removeChildren(!0),t.prototype.destroy.call(this)},e.prototype.goTo=function(t){var e=this;if("idle"===this.playState){var n=this.attributes,i=n.effect,r=n.duration,o=this.calcRelativePagingOffset(t),a=o.viewFromX,s=o.viewFromY,u=o.viewToX,h=o.viewToY,c=o.clipFromX,l=o.clipFromY,p=o.clipToX,d=o.clipToY;this.playState="running",this.clipView.animate([{transform:"translate(".concat(c,"px, ").concat(l,"px)")},{transform:"translate(".concat(p,"px, ").concat(d,"px)")}],{duration:r,easing:i,fill:"both"});var f=this.view.animate([{transform:"translate(".concat(a,"px, ").concat(s,"px)")},{transform:"translate(".concat(u,"px, ").concat(h,"px)")}],{duration:r,easing:i,fill:"both"});null==f||f.finished.then((function(){e.currPage=t,e.updateButtonState(),e.resolveFinishedPromise(),e.playState="idle"}))}return this.finished},e.prototype.prev=function(){var t=this.attributes.loop,e=this.currPage-1;return e<1&&(e=t?this.maxPages:1),this.goTo(e)},e.prototype.next=function(){var t=this.attributes.loop,e=this.maxPages,n=this.currPage+1;return n>e&&(n=t?1:e),this.goTo(n)},e.prototype.initShape=function(){this.clipView=new ps({name:"clipView",style:{x:0,y:0,width:0,height:0}}),this.view.style.clipPath=this.clipView,this.appendChild(this.view);var t=X(this.defaultShape,2),n=t[0],i=t[1];this.prevButton=new mh({name:"prevButton",style:G(G({},e.defaultOptions.style.button.prev),{marker:n,onClick:this.prev.bind(this)})}),this.appendChild(this.prevButton),this.nextButton=new mh({name:"nextButton",style:G(G({},e.defaultOptions.style.button.next),{marker:i,onClick:this.next.bind(this)})}),this.appendChild(this.nextButton),this.paginationGroup=new ns({name:"paginationGroup"}),this.appendChild(this.paginationGroup)},e.prototype.updateView=function(){var t=this.getClipViewSpace(this.currPage),e=t.width,n=t.height;this.clipView.attr({width:e,height:n}),this.view.setLocalPosition(0,0),this.clipView.setLocalPosition(0,0)},e.prototype.updateButton=function(){var t=this.buttonCfg,e=t.prev,n=t.next;e&&this.prevButton.update(e),n&&this.nextButton.update(n)},e.prototype.updateButtonState=function(){this.attributes.loop?(this.nextButton.update({disabled:!1}),this.prevButton.update({disabled:!1})):(this.currPage===this.maxPages?this.nextButton.update({disabled:!0}):this.nextButton.update({disabled:!1}),1===this.currPage?this.prevButton.update({disabled:!0}):this.prevButton.update({disabled:!1}))},e.prototype.getClipViewSpace=function(t){var e=this.attributes,n=e.orient,i=e.pageWidth,r=e.pageHeight,o=e.pageCallback,a={x:0,y:0,width:i,height:r},s=this.maxPages;return o?G(G({},a),o(t)):(t>s||t<1||("vertical"===n?a.y=(t-1)*r:"horizontal"===n&&(a.x=(t-1)*i)),a)},e.prototype.absolute2Relative=function(t,e){var n=this.currPage,i=this.getClipViewSpace(n);return[t+i.x,e+i.y]},e.prototype.getViewPosition=function(t){var e=this.getClipViewSpace(1),n=e.x,i=e.y,r=this.getClipViewSpace(t),o=X([-r.x+n,-r.y+i],2);return{x:o[0],y:o[1]}},e.prototype.getRelativeViewPosition=function(t){var e=this.getViewPosition(t),n=e.x,i=e.y,r=X(this.absolute2Relative(n,i),2);return{x:r[0],y:r[1]}},e.prototype.calcRelativePagingOffset=function(t){var e=X(this.absolute2Relative.apply(this,q([],X(this.view.getLocalPosition().slice(0,2)),!1)),2),n=e[0],i=e[1],r=this.getRelativeViewPosition(t),o=r.x,a=r.y,s=X([-n,-i],2),u=s[0],h=s[1],c=X([-o,-a],2);return{viewFromX:n,viewFromY:i,viewToX:o,viewToY:a,clipFromX:u,clipFromY:h,clipToX:c[0],clipToY:c[1]}},e.prototype.adjustLayout=function(){this.adjustButton()},e.prototype.adjustButton=function(){var t=this.attributes,e=t.button,n=t.pageWidth,i=t.pageHeight,r=e,o=r.position,a=r.spacing,s=Zu(this.prevButton),u=s.width,h=s.height,c=Zu(this.nextButton),l=c.width,p=c.height,d=0,f=0,g=0,y=0;if("left-right"===o)d=-(a+u),f=(i-h)/2,g=a+n,y=(i-p)/2;else if("top-bottom"===o)d=(n-u)/2,f=-(a+h),g=(n-l)/2,y=a+i;else if("top"===o)d=(n-a)/2-u,f=-(a+(v=rt([h,p]))),g=(n+a)/2,y=-(a+v);else if("bottom"===o)d=(n-a)/2-u,g=(n+a)/2,y=f=a+i;else if("left"===o)d=(g=-(a+l))-(a+u),y=f=(i-(v=rt([h,p])))/2;else if("right"===o){var v;g=(d=a+n)+u,y=f=(i-(v=rt([h,p])))/2}this.prevButton.setLocalPosition(d,f),this.nextButton.setLocalPosition(g,y)},e.tag="page-navigator",e.defaultOptions={type:e.tag,style:{x:0,y:0,effect:"linear",duration:200,orient:"horizontal",initPageNum:1,pageLimit:1/0,loop:!1,button:{prev:G({spacing:0},Kc),next:G({spacing:0},Kc),style:{default:{},active:{},disabled:{}},spacing:5,position:"bottom"},pagination:{type:"currTotal",style:{default:{},active:{}},separator:"/",spacing:5,position:"bottom"}}},e}(Bu);function Jc(t){var e=t;try{for(;"categoryItem"!==e.config.type;)e=e.parentNode;if("categoryItem"===e.config.type)return e}catch(t){return null}return null}function Qc(t,e,n,i,r,o){void 0===n&&(n=0),void 0===i&&(i=0);var a=yt(r)?n:r,s=yt(o)?n+t:o,u=e/t;return[["M",a,e],["L",a,u*(t-a-n)],["L",s,u*(t-s-n)],["L",s,e],["Z"]]}function tl(t,e,n,i,r,o){void 0===n&&(n=0),void 0===i&&(i=0);var a=yt(r)?n:r,s=yt(o)?n+t:o;return[["M",a,e],["L",a,0],["L",s,0],["L",s,e],["Z"]]}function el(t,e,n,i,r){return void 0===r&&(r=!1),r?t/i*(n-e):Wu((t-e)/(n-e)*i,2)}dh.registerSymbol("left",(function(t,e,n){return[["M",t-n,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]})),dh.registerSymbol("right",(function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]})),dh.registerSymbol("up",(function(t,e,n){return[["M",t-n,e+n],["L",t,e-n],["L",t+n,e+n],["Z"]]})),dh.registerSymbol("down",(function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t,e+n],["Z"]]})),function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.pageNum=1,i.ItemsGroupClickEvent=function(t){var e=t.target;if(e){var n=Jc(e);if(!n)return;var r=n.getState();["selected","selected-active"].includes(r)?n.setState("default-active"):n.setState("selected-active"),i.dispatchItemsChange()}},i.mousemoveEvent=function(t){var e=t.target;if(e){var n=Jc(e);if(!n)return void i.items.forEach((function(t){t.offHover()}));"active"!==n.getState()&&(i.items.forEach((function(t){t.offHover()})),n.onHover())}},i.mouseleaveEvent=function(){i.items.forEach((function(t){t.offHover()}))},t.prototype.init.call(i),i.init(),i}F(e,t),Object.defineProperty(e.prototype,"backgroundShapeCfg",{get:function(){var t=Zu(this),e=t.width,n=t.height;return G({width:e,height:n},this.getStyle("backgroundStyle"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.itemsGroup.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemsShapeCfg",{get:function(){var t=this.attributes,e=t.items,n=t.itemWidth,i=t.maxWidth,r=t.maxItemWidth,o=t.itemMarker,a=t.itemName,s=t.itemValue,u=t.itemBackgroundStyle,h=t.reverse,c=Ct(Yc,["style"]),l=c.itemMarker,p=c.itemName,d=c.itemValue,f=c.backgroundStyle,g=[],y=mt(e);return h&&y.reverse(),y.forEach((function(t,e){var h=t.state,c=void 0===h?"default":h,v=t.name,m=void 0===v?"":v,b=t.value,x=void 0===b?"":b,S=t.id;g.push({x:0,y:0,state:c,itemWidth:n,maxItemWidth:ot([r,i]),identify:void 0!==S?S:"".concat(m,"-").concat(e),itemMarker:J(o)?St({},l,o(t,e,y)):o,itemName:function(){var n=J(a)?St({},p,a(t,e,y)):a,i=n.formatter;return{style:n.style,spacing:n.spacing,content:i(m)}}(),itemValue:function(){var n=J(s)?St({},d,s(t,e,y)):s,i=n.formatter;return{style:n.style,spacing:n.spacing,content:i(x)}}(),backgroundStyle:J(u)?St({},f,u(t,e,y)):u})})),g},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemHeight",{get:function(){return Zu(this.items[0]).height},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initShape(),this.createItems(),this.adjustLayout(),this.createBackground(),this.bindEvents()},e.prototype.update=function(e){this.attr(St({},this.attributes,e)),t.prototype.update.call(this),this.createItems(),this.adjustLayout(),this.backgroundShape.attr(this.backgroundShapeCfg)},e.prototype.clear=function(){},e.prototype.getItem=function(t){return this.items.filter((function(e){return e.getID()===t}))[0]},e.prototype.setItemState=function(t,e){var n;null===(n=this.getItem(t))||void 0===n||n.setState(e)},e.prototype.getItemsStates=function(){return this.items.map((function(t){return{id:t.getID(),state:t.getState()}}))},e.prototype.initShape=function(){t.prototype.initShape.call(this),this.itemsGroup=new ns({name:"itemsGroup"})},e.prototype.createItems=function(){var t=this;this.clearItems(),this.itemsShapeCfg.forEach((function(e){t.itemsGroup.appendChild(new $c({style:e,name:"item"}))}))},e.prototype.clearItems=function(){this.itemsGroup.setLocalPosition(0,0),this.itemsGroup.removeChildren(!0)},e.prototype.createPageItems=function(){var t=this.attributes,e=t.orient,n=t.pageNavigator,i=this,r=i.pageWidth,o=i.pageHeight,a=i.pageNum,s=this.availableSpace,u=s.x,h=s.y,c=a>1&&ht(r)&&ht(o),l=G({orient:e,pageWidth:r,pageHeight:o,view:this.itemsGroup},n);this.pageNavigator&&c?this.pageNavigator.update(l):!this.pageNavigator&&c?(this.pageNavigator=new Zc({name:"page-navigator",style:l}),this.appendChild(this.pageNavigator),this.itemsGroup.setLocalPosition(0,0),this.pageNavigator.setLocalPosition(u,h)):(this.pageNavigator&&(this.pageNavigator.clear(),this.removeChild(this.pageNavigator,!0),this.pageNavigator.destroy(),this.pageNavigator=null),this.appendChild(this.itemsGroup),this.itemsGroup.setLocalPosition(u,h))},e.prototype.bindEvents=function(){this.itemsGroup.addEventListener("click",this.ItemsGroupClickEvent),this.itemsGroup.addEventListener("mousemove",this.mousemoveEvent),this.itemsGroup.addEventListener("mouseleave",this.mouseleaveEvent)},e.prototype.resetPageCfg=function(){this.pageWidth=void 0,this.pageHeight=void 0,this.pageNum=1},e.prototype.adjustLayout=function(){var t=this.attributes.orient;this.resetPageCfg(),"horizontal"===t?this.adjustHorizontal():this.adjustVertical(),this.createPageItems()},e.prototype.adjustHorizontal=function(){var t=this.attributes,e=t.maxWidth,n=X(t.spacing,2),i=n[0],r=n[1],o=t.autoWrap,a=t.maxRows,s=this.itemHeight,u=!e||e===1/0,h=!o;h&&(this.pageWidth=e,this.pageHeight=s),!u&&!h&&(this.pageWidth=e,this.pageHeight=(s+r)*a);var c=this.pageWidth,l=X([0,0,1,this.pageNum],4),p=l[0],d=l[1],f=l[2],g=l[3];this.items.forEach((function(t){var e,n,o=Zu(t).width,l=X([0,0],2),y=l[0],v=l[1];if(u)y=(e=X([p,d],2))[0],v=e[1],p+=o+i;else{var m=c*g;p+o>m&&(h?(p=m,g+=1):f===a?(f=1,p=m,d=0,g+=1):(f+=1,p=m-c,d+=s+r)),y=(n=X([p,d],2))[0],v=n[1],p+=o+i}t.setLocalPosition(y,v)})),this.pageNum=g},e.prototype.adjustVertical=function(){var t=this.attributes,e=t.maxHeight,n=X(t.spacing,2),i=n[0],r=n[1],o=t.autoWrap,a=t.maxCols,s=t.itemWidth,u=this.itemHeight,h=!e||e===1/0,c=!o;c&&(this.pageWidth=s,this.pageHeight=e),!h&&!c&&(this.pageWidth=(s+i)*a,this.pageHeight=e);var l=this.pageHeight,p=X([0,0,1,this.pageNum],4),d=p[0],f=p[1],g=p[2],y=p[3];this.items.forEach((function(t){var e,n,o=X([0,0],2),p=o[0],v=o[1];if(h)p=(e=X([d,f],2))[0],v=e[1],f+=u+r;else{var m=l*y;f+u>m&&(c?(f=m,y+=1):g===a?(g=1,d=0,f=m,y+=1):(g+=1,d+=s+i,f=m-l)),p=(n=X([d,f],2))[0],v=n[1],f+=u+r}t.setLocalPosition(p,v)})),this.pageNum=y},e.prototype.dispatchItemsChange=function(){var t=new ti("valueChanged",{detail:{value:this.getItemsStates()}});this.dispatchEvent(t)},e.tag="category",e.defaultOptions=G({type:e.tag},Yc)}(qc),dh.registerSymbol("leftArrow",(function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e],["L",t+n,e-i],["L",t+n,e+i],["Z"]]})),dh.registerSymbol("rightArrow",(function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t+n,e],["L",t-n,e-i],["L",t-n,e+i],["Z"]]})),dh.registerSymbol("upArrow",(function(t,e,n){var i=n*Math.cos(1/3*Math.PI);return[["M",t-n,e+i],["L",t,e-i],["L",t+n,e+i],["Z"]]})),dh.registerSymbol("downArrow",(function(t,e,n){var i=n*Math.cos(1/3*Math.PI);return[["M",t-n,e-i],["L",t+n,e-i],["L",t,e+i],["Z"]]})),dh.registerSymbol("hiddenHandle",(function(t,e,n){var i=1.4*n;return[["M",t-n,e-i],["L",t+n,e-i],["L",t+n,e+i],["L",t-n,e+i],["Z"]]})),dh.registerSymbol("verticalHandle",(function(t,e,n){var i=1.4*n,r=n/2,o=n/6,a=t+.4*i;return[["M",t,e],["L",a,e+r],["L",t+i,e+r],["L",t+i,e-r],["L",a,e-r],["Z"],["M",a,e+o],["L",t+i-2,e+o],["M",a,e-o],["L",t+i-2,e-o]]})),dh.registerSymbol("horizontalHandle",(function(t,e,n){var i=1.4*n,r=n/2,o=n/6,a=e+.4*i;return[["M",t,e],["L",t-r,a],["L",t-r,e+i],["L",t+r,e+i],["L",t+r,a],["Z"],["M",t-o,a],["L",t-o,e+i-2],["M",t+o,a],["L",t+o,e+i-2]]}));var nl,il,rl,ol,al,sl=function(t){function e(e){var n=e.style,i=V(e,["style"]),r=t.call(this,G({type:"rail",style:n},i))||this;return r.init(),r}return F(e,t),Object.defineProperty(e.prototype,"gradientColor",{get:function(){var t=this.attributes.color;if(Q(t)&&t.length>0){for(var e=1/(t.length-1),n="l(0)",i=0;i<t.length;i+=1)n+=" ".concat(Wu(i*e,2),":").concat(t[i]);return n}return t},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.railPathGroup=new ns({name:"railPathGroup",id:"railPathGroup"}),this.appendChild(this.railPathGroup),this.backgroundPathGroup=new ns({name:"backgroundGroup",id:"railBackgroundGroup"}),this.appendChild(this.backgroundPathGroup),this.render()},e.prototype.render=function(){var t=this;this.clear();var e=this.attributes,n=e.width,i=e.color,r=e.backgroundColor,o=e.orient,a=e.chunked,s=this.createRailPath();this.createBackgroundPath().forEach((function(e){t.backgroundPathGroup.appendChild(new hs({name:"background",style:{path:e,fill:r}}))})),s.forEach((function(e,n){t.railPathGroup.appendChild(new hs({name:"railPath",style:{path:e,fill:a?i[n]:t.gradientColor}}))})),this.railPathGroup.setOrigin(n/2,n/2),this.backgroundPathGroup.setOrigin(n/2,n/2),"vertical"===o?(this.railPathGroup.setEulerAngles(90),this.backgroundPathGroup.setEulerAngles(90)):(this.railPathGroup.setEulerAngles(0),this.backgroundPathGroup.setEulerAngles(0))},e.prototype.update=function(t){this.attr(t),this.render(),this.updateSelection()},e.prototype.updateSelection=function(){var t=this.createBackgroundPath();this.backgroundPathGroup.children.forEach((function(e,n){e.attr({path:t[n]})}))},e.prototype.getRail=function(){return this.railPathGroup},e.prototype.getRailBackground=function(){return this.backgroundPathGroup},e.prototype.clear=function(){this.railPathGroup.removeChildren(),this.backgroundPathGroup.removeChildren()},e.prototype.getOrientVal=function(t,e){return"horizontal"===this.attributes.orient?t:e},e.prototype.getValueOffset=function(t){var e=this.attributes,n=e.min,i=e.max,r=e.width,o=e.height;return el(t,n,i,this.getOrientVal(r,o))},e.prototype.createRailPath=function(){var t,e=this.attributes,n=e.width,i=e.height,r=e.type,o=e.chunked,a=e.min,s=e.max,u=X(this.getOrientVal([n,i],[i,n]),2),h=u[0],c=u[1];if(o)t=this.createChunkPath();else{var l=this.getValueOffset(a),p=this.getValueOffset(s);switch(r){case"color":t=[tl(h,c,0,0,l,p)];break;case"size":t=[Qc(h,c,0,0,l,p)]}}return t},e.prototype.createChunkPath=function(){for(var t=this.attributes,e=t.width,n=t.height,i=t.min,r=t.max,o=t.type,a=t.ticks,s=r-i,u=X(this.getOrientVal([e,n],[n,e]),2),h=u[0],c=u[1],l=[],p=q(q([i],X(a),!1),[r],!1),d=0,f="size"===o?0:c,g=1;g<p.length;g+=1){var y=(p[g]-p[g-1])/s,v="size"===o?c*y+f:c,m=d+h*y;l.push([[d,c],[d,c-f],[m,c-v],[m,c]]),d=m,f=v}var b=[];return l.forEach((function(t){var e=[];t.forEach((function(t,n){e.push(q([0===n?"M":"L"],X(t),!1))})),e.push(["Z"]),b.push(e)})),b},e.prototype.createBackgroundPath=function(){var t=this.attributes,e=t.width,n=t.height,i=t.min,r=t.max,o=t.start,a=t.end,s=t.type,u=X(this.getOrientVal([e,n],[n,e]),2),h=u[0],c=u[1],l=this.getValueOffset(o),p=this.getValueOffset(a),d=this.getValueOffset(i),f=this.getValueOffset(r),g="size"===s?Qc:tl;return[g(h,c,0,0,d,l),g(h,c,0,0,p,f)]},e}(es),ul=function(t){function e(e){var n=e.style,i=V(e,["style"]),r=t.call(this,G({type:"lines",style:n},i))||this;return r.labelsGroup=new ns({name:"labels"}),r.appendChild(r.labelsGroup),r.render(),r}return F(e,t),e.prototype.render=function(){var t=this;this.attributes.labels.forEach((function(e){var n=new ds({name:"label",style:e});t.labelsGroup.appendChild(n)}))},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),t.labels&&(this.labelsGroup.removeChildren(!0),this.render())},e.prototype.getLabels=function(){return this.labelsGroup.children},e}(es),hl=(function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.onDragStart=function(t){return function(e){e.stopPropagation(),i.attributes.slidable&&(i.onHoverEnd(),i.target=t,i.prevValue=i.getTickValue(i.getEventPosValue(e)),i.addEventListener("mousemove",i.onDragging),i.addEventListener("touchmove",i.onDragging),document.addEventListener("mouseup",i.onDragEnd),document.addEventListener("touchend",i.onDragEnd))}},i.onDragging=function(t){t.stopPropagation();var e=X(i.selection,2),n=e[0],r=e[1],o=i.getTickValue(i.getEventPosValue(t)),a=o-i.prevValue,s=i.target;"start"===s?n!==o&&i.updateSelection(o,r):"end"===s?r!==o&&i.updateSelection(n,o):"rail"===s&&0!==a&&(i.prevValue=o,i.updateSelection(a,a,!0))},i.onDragEnd=function(){i.removeEventListener("mousemove",i.onDragging),i.removeEventListener("touchmove",i.onDragging),document.removeEventListener("mouseup",i.onDragEnd),document.removeEventListener("touchend",i.onDragEnd),i.target=void 0},i.onHoverStart=function(t){return function(e){e.stopPropagation(),yt(i.target)&&(i.target=t,i.addEventListener("mousemove",i.onHovering),i.addEventListener("touchmove",i.onHovering))}},i.onHovering=function(t){t.stopPropagation();var e=i.getEventPosValue(t);if(Ct(i.attributes,["rail","chunked"])){var n=i.getTickIntervalByValue(e);if(!n)return;var r=X(n,2),o=r[0],a=r[1];i.setIndicator(Wu((o+a)/2,0),"".concat(o,"-").concat(a),!1),i.dispatchIndicated(n)}else{var s=i.getTickValue(e);i.setIndicator(s),i.dispatchIndicated(s)}},i.onHoverEnd=function(){i.removeEventListener("mousemove",i.onHovering),i.removeEventListener("touchmove",i.onHovering),i.setIndicator(!1),i.target=void 0},t.prototype.init.call(i),i.init(),i}F(e,t),Object.defineProperty(e.prototype,"selection",{get:function(){var t=this.attributes,e=t.min,n=t.max;return[t.start||e,t.end||n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundShapeCfg",{get:function(){var t=this.attributes.handle,e=Zu(this),n=e.width,i=e.height,r=X(this.getPadding(),4),o=r[1],a=r[2],s=r[3];return G({width:n+s+o+(t?-20:0),height:i+a+(t?-10:0)},this.getStyle("backgroundStyle"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){var t=this.attributes,e=t.step,n=t.min,i=t.max;return yt(e)?Wu(.01*(i-n),0):e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indicator",{get:function(){return this.indicatorShape.getElementsByName("tag")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indicatorShapeCfg",{get:function(){var t=this.attributes.indicator;if(!t)return{};var e=t,n=e.size,i=e.text,r=e.backgroundStyle,o=i.style;return{markerCfg:G(G({size:n},this.getOrientVal([{x:0,y:n},{x:-n,y:0}])),{symbol:this.getOrientVal(["downArrow","leftArrow"]),fill:r.fill}),tagCfg:G(G({text:"",align:this.getOrientVal(["center","start"]),verticalAlign:"middle"},this.getOrientVal([{x:0,y:-n/2},{x:-n/2,y:0}])),{textStyle:{default:o},backgroundStyle:{default:r}})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){var t=this.attributes,e=t.color,n=t.rail,i=n.ticks;return n.chunked?e.slice(0,i.length+1):e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"railShapeCfg",{get:function(){var t=this.attributes,e=t.min,n=t.max,i=t.rail,r=t.orient,o=X(this.selection,2),a=o[0],s=o[1],u=this.color;return G({x:0,y:0,min:e,max:n,start:a,end:s,orient:r,color:u,cursor:"pointer"},i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShapeCfg",{get:function(){var t=this.attributes.handle;if(!t)return{markerCfg:{size:8,symbol:"hiddenHandle",opacity:0},textCfg:{text:"",opacity:0}};var e=t,n=e.size,i=e.icon,r=e.text.style,o=i.marker,a=i.style,s="default"===o?this.getOrientVal(["horizontalHandle","verticalHandle"]):o;return{markerCfg:G({symbol:s,size:n,opacity:1,cursor:this.getOrientVal(["ew-resize","ns-resize"])},a),textCfg:G({text:"",opacity:1},r)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelsShapeCfg",{get:function(){var t=this.attributes.label;if(!t)return{labels:[]};var e=this.attributes,n=e.min,i=e.max,r=e.rail,o=t.style,a=t.formatter,s=t.align,u=[];return"rail"===s?[n,i].forEach((function(t,e){u.push(G({x:0,y:0,text:a(t,e)},o))})):q(q([n],X(r.ticks),!1),[i],!1).forEach((function(t,e){u.push(G({x:0,y:0,text:a(t,e)},o))})),{labels:u}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.createLabels(),this.createRail(),this.createHandles(),this.setHandleText(),this.adjustLayout(),this.adjustTitle(),this.createBackground(),this.createIndicator(),this.bindEvents()},e.prototype.update=function(t){this.attr(ah({},this.attributes,t)),this.labelsShape.update(this.labelsShapeCfg),this.railShape.update(this.railShapeCfg),this.updateSelection.apply(this,q([],X(this.selection),!1)),this.titleShape.attr(this.titleShapeCfg),this.updateHandles(),this.setHandleText(),this.setIndicator(!1),this.adjustLayout(),this.backgroundShape.attr(this.backgroundShapeCfg)},e.prototype.clear=function(){},e.prototype.setIndicator=function(t,e,n){var i,r;void 0===n&&(n=!0);var o=this.attributes,a=o.min,s=o.max,u=o.rail,h=o.indicator;if(!1!==t&&h){this.indicatorShape.show();var c=ut(t,a,s),l=u,p=l.type,d=l.width,f=l.height,g=h.spacing,y=this.getValueOffset(c),v="size"===p?(1-(c-a)/(s-a))*this.getOrientVal([f,d]):0;null===(r=this.indicatorShape)||void 0===r||r.attr(this.getOrientVal([{x:y,y:v-g},{x:d-v+g,y}]));var m=Ct(this.attributes,["indicator","text","formatter"]),b=e||String(c);n&&(b=m(b)),this.indicator.update({text:b})}else null===(i=this.indicatorShape)||void 0===i||i.hide()},e.prototype.setSelection=function(t,e){this.updateSelectionLayout.apply(this,q([],X(this.getSafetySelections(t,e)),!1))},e.prototype.setHandleText=function(t,n,i){var r;void 0===i&&(i=!0);var o=X(this.selection,2),a=o[0],s=o[1],u=X([t||String(a),n||String(s)],2),h=u[0],c=u[1];if(i){var l=Ct(this.attributes,["handle","text","formatter"])||Ct(e.defaultOptions,["style","handle","text","formatter"]);h=(r=X([l(h),l(c)],2))[0],c=r[1]}this.getHandle("start","text").attr({text:h}),this.getHandle("end","text").attr({text:c})},e.prototype.initShape=function(){t.prototype.initShape.call(this)},e.prototype.updateSelection=function(t,e,n){var i;void 0===n&&(n=!1);var r=X(this.selection,2),o=r[0],a=r[1],s=X([t,e],2),u=s[0],h=s[1];n&&(u+=o,h+=a),u=(i=X(this.getSafetySelections(u,h),2))[0],h=i[1],this.updateSelectionLayout(u,h),this.dispatchSelection()},e.prototype.updateSelectionLayout=function(t,e){this.setAttribute("start",t),this.setAttribute("end",e),this.railShape.update({start:t,end:e}),this.adjustLayout(),this.setHandleText()},e.prototype.getTickValue=function(t){var e=this.attributes,n=e.min,i=e.max,r=e.rail,o=r.chunked,a=r.ticks;if(o)for(var s=q(q([n],X(a),!1),[i],!1),u=0;u<s.length-1;u+=1)if(t>=s[u]&&t<=s[u+1])return lt([s[u],s[u+1]],(function(e){return Math.abs(t-e)}));return function(t,e,n){return n+Math.round((t-n)/e)*e}(t,this.step,n)},e.prototype.getTickIntervalByValue=function(t){for(var e=X(this.selection,2),n=e[0],i=e[1],r=q(q([n],X(Ct(this.attributes,["rail","ticks"])),!1),[i],!1),o=1;o<r.length;o+=1){var a=r[o-1],s=r[o];if(t>=a&&t<=s)return[a,s]}return!1},e.prototype.getValueOffset=function(t,e){void 0===e&&(e=!1);var n=this.attributes,i=n.min,r=n.max,o=n.rail,a=o.width,s=o.height;return el(t,i,r,this.getOrientVal([a,s]),e)},e.prototype.getSafetySelections=function(t,e,n){var i;void 0===n&&(n=4);var r=this.attributes,o=r.min,a=r.max,s=X(this.selection,2),u=s[0],h=s[1],c=X([t,e],2),l=c[0],p=c[1],d=p-l;return l>p&&(l=(i=X([p,l],2))[0],p=i[1]),d>a-o?[o,a]:l<o?u===o&&h===p?[o,p]:[o,d+o]:p>a?h===a&&u===l?[l,a]:[a-d,a]:[Wu(l,n),Wu(p,n)]},e.prototype.createLabels=function(){this.labelsShape=new ul({name:"labels",id:"labels",style:this.labelsShapeCfg}),this.appendChild(this.labelsShape)},e.prototype.createRail=function(){this.railShape=new sl({name:"rail",id:"rail",style:this.railShapeCfg}),this.appendChild(this.railShape)},e.prototype.createHandle=function(t){var e=this.handleShapeCfg,n=e.markerCfg,i=e.textCfg,r="".concat(t,"Handle"),o=new ns({name:r,id:r});this.railShape.appendChild(o);var a=new ds({name:"text",style:i});o.appendChild(a);var s=new dh({name:"icon",style:n});o.appendChild(s),"start"===t?this.startHandle=o:this.endHandle=o},e.prototype.createHandles=function(){this.createHandle("start"),this.createHandle("end")},e.prototype.updateHandles=function(){var t=this,e=this.handleShapeCfg,n=e.markerCfg,i=e.textCfg;["start","end"].forEach((function(e){t.getHandle(e,"icon").update(n),t.getHandle(e,"text").attr(i)}))},e.prototype.getHandle=function(t,e){var n;return n="start"===t?this.startHandle:this.endHandle,e?"text"===e?n.getElementsByName("text")[0]:n.getElementsByName("icon")[0]:n},e.prototype.createIndicator=function(){if(this.attributes.indicator){var t=this.indicatorShapeCfg,e=t.markerCfg,n=t.tagCfg,i=new ns({name:"indicator",id:"indicator"});this.railShape.appendChild(i);var r=new fh({name:"tag",style:n});i.appendChild(r);var o=new dh({name:"arrow",style:e});o.toBack(),i.appendChild(o),this.indicatorShape=i,this.indicatorShape.hide()}},e.prototype.adjustHandle=function(){var t=this.availableSpace,n=t.x,i=t.y,r=this.attributes,o=r.rail,a=r.handle,s=X(this.selection,2),u=s[0],h=s[1],c=o,l=c.width,p=c.height,d=a||Ct(e.defaultOptions,["style","handle"]),f=d.spacing,g=d.text.align;this.railShape.attr({x:n,y:i});var y=this.startHandle,v=this.endHandle;y.attr(this.getOrientVal([{x:this.getValueOffset(u),y:p/2},{x:l/2,y:this.getValueOffset(u)}])),v.attr(this.getOrientVal([{x:this.getValueOffset(h),y:p/2},{x:l/2,y:this.getValueOffset(h)}]));var m={};"inside"===g?m=this.getOrientVal([{x:0,y:-p/2-f,textAlign:"center",textBaseline:"bottom"},{x:l+f,y:0,textAlign:"start",textBaseline:"middle"}]):"outside"===g&&(m=this.getOrientVal([{x:0,y:p/2+f,textAlign:"center",textBaseline:"top"},{x:-l/2-f,y:0,textAlign:"end",textBaseline:"middle"}])),this.getHandle("start","text").attr(m),this.getHandle("end","text").attr(m)},e.prototype.adjustLabels=function(){var t=this,e=this.attributes,n=e.min,i=e.max,r=e.label,o=e.rail,a=e.orient;if(r){var s=this.availableSpace,u=s.x,h=s.y,c=o,l=c.width,p=c.height,d=c.ticks,f=r,g=f.align,y=f.spacing;if("rail"===g){if("horizontal"===a){this.labelsShape.attr({x:u,y:h+p/2});var v=u,m=X(this.labelsShape.getLabels(),1)[0];m&&(m.attr({textAlign:"end"}),v+=y),this.railShape.attr({x:v,y:h});var b=X(this.labelsShape.getLabels().slice(-1),1)[0];return void(b&&b.attr({x:v+l+y,y:0,textAlign:"start"}))}this.labelsShape.attr({x:u+l/2,y:h});var x=this.labelsShape.getLabels()[0],S=Zu(x).height;return x.attr({y:S/2,textAlign:"center",textBaseline:"middle"}),this.railShape.attr({x:u,y:h+S+y}),void this.labelsShape.getLabels().slice(-1)[0].attr({y:p+1.5*S+2*y,textAlign:"center",textBaseline:"middle"})}if("horizontal"!==a){this.railShape.attr({x:u+("inside"===g?0:y),y:h}),this.labelsShape.attr({x:u+("inside"===g?y+l:0),y:h});var w=q(q([n],X(d),!1),[i],!1);this.labelsShape.getLabels().forEach((function(e,n){var i=w[n];e.attr({x:0,y:t.getValueOffset(i),textBaseline:0===n?"top":n===w.length-1?"bottom":"middle",textAlign:"inside"===g?"start":"end"})}))}else{var E=Zu(this.labelsShape).height;this.railShape.attr({x:u,y:h+("inside"===g?y+E:0)}),this.labelsShape.attr({x:u,y:h+("inside"===g?E/2:y+p+E/2)});var T=q(q([n],X(d),!1),[i],!1);this.labelsShape.getLabels().forEach((function(e,n){var i=T[n];e.attr({x:t.getValueOffset(i),y:0,textBaseline:"middle",textAlign:0===n?"start":n===T.length-1?"end":"center"})}))}}},e.prototype.adjustLayout=function(){var t,e,n=this.attributes,i=n.handle,r=n.label;i?null===(t=this.labelsShape)||void 0===t||t.hide():null===(e=this.labelsShape)||void 0===e||e.show(),this.startHandle&&this.adjustHandle(),r&&this.labelsShape.isVisible()&&this.adjustLabels()},e.prototype.getEventPosValue=function(t,e){void 0===e&&(e=!1);var n=this.attributes,i=n.min,r=n.max,o=this.getOrientVal(this.railShape.getPosition().slice(0,2)),a=this.getOrientVal(Ku(t))-o;return ut(this.getValueOffset(a,!0)+i,i,r)},e.prototype.bindEvents=function(){var t=this,e=new Map;e.set("rail",this.railShape),e.set("start",this.getHandle("start","icon")),e.set("end",this.getHandle("end","icon")),e.forEach((function(e,n){e.addEventListener("mousedown",t.onDragStart(n)),e.addEventListener("touchstart",t.onDragStart(n))})),this.railShape.getRail().addEventListener("mouseenter",this.onHoverStart("rail"))},e.prototype.dispatchIndicated=function(t){var e=new ti("onIndicated",{detail:{value:t}});this.dispatchEvent(e)},e.prototype.dispatchSelection=function(){var t=new ti("valueChanged",{detail:{value:this.selection}});this.dispatchEvent(t)},e.tag="continuous",e.defaultOptions=G({type:e.tag},Xc)}(qc),function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.init(),i}return F(e,t),e.prototype.init=function(){this.initShape(),this.update({})},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.backgroundShape.attr(this.getBackgroundShapeCfg()),this.titleShape.update(this.getTitleShapeCfg()),this.valueShape.update(this.getValueShapeCfg())},e.prototype.initShape=function(){this.titleShape=new fh({name:"title",style:e.defaultOptions.style.title}),this.valueShape=new fh({name:"value",style:e.defaultOptions.style.value}),this.backgroundShape=new ps({name:"background"}),this.backgroundShape.appendChild(this.titleShape),this.backgroundShape.appendChild(this.valueShape),this.appendChild(this.backgroundShape),this.backgroundShape.toBack()},e.prototype.getBackgroundShapeCfg=function(){return $u(this.attributes.backgroundStyle)},e.prototype.getTitleShapeCfg=function(){var t=this.attributes.title;return G(G({text:""},t),{x:0,y:0})},e.prototype.getValueShapeCfg=function(){var t=this.attributes,e=t.value,n=t.spacing,i=0;if(this.titleShape){var r=this.titleShape.getBounds();i=r.getMax()[1]-r.getMin()[1]}var o=n+i;return G(G({text:""},e),{x:0,y:o})},e.prototype.clear=function(){this.valueShape.destroy(),this.titleShape.destroy(),this.backgroundShape.destroy()},e.tag="statistic",e.defaultOptions={type:e.tag,style:{x:0,y:0,title:{text:"",padding:0,textStyle:{default:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"}},backgroundStyle:{default:{fill:"transparent",lineWidth:0}}},value:{text:"",padding:0,textStyle:{default:{fontSize:24,fill:"rgba(0, 0, 0, 0.85)"}},backgroundStyle:{default:{fill:"transparent",lineWidth:0}}},spacing:5}},e}(Bu)),cl=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function ll(t){nl||(nl=document.createElement("table"),il=document.createElement("tr"),rl=/^\s*<(\w+|!)[^>]*>/,ol={tr:document.createElement("tbody"),tbody:nl,thead:nl,tfoot:nl,td:il,th:il,"*":document.createElement("div")});var e=rl.test(t)&&RegExp.$1;e&&e in ol||(e="*");var n=ol[e];t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t;var i=n.childNodes[0];return n.removeChild(i),i}!function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.init(),i}F(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.timestamp=this.attributes.value.timestamp,this.startTimer()},e.prototype.update=function(e){t.prototype.update.call(this,e)},e.prototype.formatCountdown=function(t){var e,n,i=null===(e=this.attributes.value)||void 0===e?void 0:e.format;(null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.format)&&(i=t.value.format);var r=new Date(this.timestamp).getTime(),o=Date.now(),a=Math.max(r-o,0),s=gt(a)?"":"".concat(a);return i&&(s=function(t,e){var n=t,i=/\[[^\]]*]/g,r=(e.match(i)||[]).map((function(t){return t.slice(1,-1)})),o=e.replace(i,"[]"),a=cl.reduce((function(t,e){var i=X(e,2),r=i[0],o=i[1];if(-1!==t.indexOf(r)){var a=Math.floor(n/o);return n-=a*o,t.replace(new RegExp("".concat(r,"+"),"g"),(function(t){var e=a.toString();return e.length<2?"0".concat(e):e}))}return t}),o),s=0;return a.replace(i,(function(){var t=r[s];return s+=1,t}))}(a,i)),s},e.prototype.startTimer=function(){var t=this;this.countdownId||(this.countdownId=window.setInterval((function(){var e=t.formatCountdown();t.valueShape.update({text:e}),t.timestamp<=Date.now()&&t.stopTimer()}),33.333333333333336))},e.prototype.stopTimer=function(){if(this.countdownId){clearInterval(this.countdownId),this.countdownId=void 0;var t=this.attributes.onFinish;t&&t()}},e.tag="countdown",e.defaultOptions=St({},hl.defaultOptions,{style:{value:{timestamp:Date.now()+3e4}}})}(hl);var pl="tooltip",dl="tooltip-title",fl="tooltip-list",gl="tooltip-list-item",yl="tooltip-list-item-marker",vl="tooltip-list-item-value",ml=((al={})[".".concat(pl)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.9)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"rgb(87, 87, 87)","font-size":"12px","line-height":"20px",padding:"10px 10px 10px 10px"},al[".".concat(dl)]={"margin-bottom":"4px"},al[".".concat(fl)]={margin:"0px","list-style-type":"none",padding:"0px"},al[".".concat(gl)]={"list-style-type":"none","margin-bottom":"4px"},al[".".concat(yl)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"8px"},al[".".concat(vl)]={display:"inline-block",float:"right","margin-left":"30px"},al[".".concat("tooltip-crosshair-x")]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},al[".".concat("tooltip-crosshair-y")]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},al),bl=(function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.visibility="visible",i.throttleUpdatePosition=function(t,e,n){var i,r,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),i=null,a=t.apply(r,o),i||(r=o=null)},h=function(){var h=Date.now();s||!1!==n.leading||(s=h);var c=e-(h-s);return r=this,o=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),s=h,a=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(u,c)),a};return h.cancel=function(){clearTimeout(i),s=0,i=r=o=null},h}((function(){i.setOffsetPosition(i.autoPosition(i.getRelativeOffsetFromCursor()))}),i.attributes.throttleFrequency,{}),i.visibility=i.attributes.visibility,i.initShape(),i.init(),i}F(e,t),Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{set:function(t){var e=X(t,2),n=e[0],i=e[1];this.attr({x:n,y:i}),this.updatePosition()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this.attributes.items;return this.sort(this.filter(t.map((function(t,e){var n=t.name,i=void 0===n?"":n,r=t.value,o=t.color,a=void 0===o?"black":o,s=t.index,u=V(t,["name","value","color","index"]);return G({name:i,value:r,color:a,index:void 0===s?e:s},u)}))))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes.template.item,e=[];return this.items.forEach((function(n){var i,r;e.push(ll((r=n,(i=t)&&r?i.replace(/\\?\{([^{}]+)\}/g,(function(t,e){return"\\"===t.charAt(0)?t.slice(1):void 0===r[e]?"":r[e]})):i)))})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customContent",{get:function(){var t,e=this.attributes.customContent;return st(e)?Ju(e):(t=e)instanceof Element||t instanceof HTMLDocument?e:J(e)?Ju(e(this.attributes.items)):void 0},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.updateHTMLTooltipElement(),this.updatePosition()},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.updateHTMLTooltipElement(),this.updatePosition()},e.prototype.clear=function(){this.element.innerHTML=""},e.prototype.destroy=function(){var t,e;null===(t=this.element)||void 0===t||t.remove(),null===(e=this.customContent)||void 0===e||e.remove()},e.prototype.show=function(){this.visibility="visible",this.element.style.visibility="visible"},e.prototype.hide=function(){this.visibility="hidden",this.element.style.visibility="hidden"},e.prototype.initShape=function(){var t=this.attributes.template.container;this.element=ll(t),(this.id||""!==this.id)&&this.element.setAttribute("id",this.id)},e.prototype.updateHTMLTooltipElement=function(){var t,e,n=this.attributes.title,i=this.element,r=this.customContent;if(this.clear(),r)i.appendChild(r);else{var o=this.attributes.template.title;i.innerHTML=o,i.getElementsByClassName(dl)[0].innerHTML=n;var a=this.HTMLTooltipItemsElements,s=document.createElement("ul");s.className=fl,a.forEach((function(t){s.appendChild(t)})),this.element.appendChild(s)}t=i,e=this.attributes.style,Object.entries(e).forEach((function(e){var n=X(e,2),i=n[0],r=n[1];q([t],X(t.querySelectorAll(i)),!1).filter((function(t){return t.matches(i)})).forEach((function(t){t.style.cssText+=Object.entries(r).reduce((function(t,e){return"".concat(t).concat(e.join(":"),";")}),"")}))})),this.element.style.visibility=this.visibility},e.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,n=e.position,i=X(e.offset,2),r=i[0],o=i[1],a=(t||n).split("-"),s={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},u=this.elementSize,h=u.width,c=u.height,l=[-h/2,-c/2];return a.forEach((function(t){var e=X(l,2),n=e[0],i=e[1],a=X(s[t],2),u=a[0],p=a[1];l=[n+(h/2+r)*u,i+(c/2+o)*p]})),l},e.prototype.setOffsetPosition=function(t){var e=X(t,2),n=e[0],i=e[1],r=this.attributes,o=r.x,a=r.y,s=r.container,u=s.x,h=s.y;this.element.style.left="".concat(o+u+n,"px"),this.element.style.top="".concat(a+h+i,"px")},e.prototype.updatePosition=function(){this.throttleUpdatePosition()},e.prototype.autoPosition=function(t){var e=X(t,2),n=e[0],i=e[1],r=this.attributes,o=r.x,a=r.y,s=r.autoPosition,u=r.bounding;if(!s)return[n,i];var h=this.element,c=h.offsetWidth,l=h.offsetHeight,p=X([o+n,a+i],2),d=p[0],f=p[1],g=this.attributes.position,y={left:"right",right:"left",top:"bottom",bottom:"top"},v=u.x,m=u.y,b={left:d<v,right:d+c>v+u.width,top:f<m,bottom:f+l>m+u.height},x=[];g.split("-").forEach((function(t){b[t]?x.push(y[t]):x.push(t)}));var S=x.join("-");return this.getRelativeOffsetFromCursor(S)},e.prototype.filter=function(t){var e=this.attributes.filterBy;return e?t.filter(e):t},e.prototype.sort=function(t){var e=this.attributes.sortBy;return e?t.sort(e):t},e.tag="tooltip",e.defaultOptions={style:{x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],follow:!0,enterable:!1,autoPosition:!0,items:[],throttleFrequency:50,container:{x:0,y:0},bounding:{x:0,y:0,width:0,height:0},template:{container:'<div class="'.concat(pl,'"></div>'),title:'<div class="'.concat(dl,'"></div>'),item:'<li class="'.concat(gl,'" data-index={index}>\n        <span class="').concat(yl,'" style="background:{color}"></span>\n        <span class="').concat("tooltip-list-item-name",'">{name}</span>\n        <span class="').concat(vl,'">{value}</span>\n      </li>')},style:ml}}}(Bu),"#1890FF"),xl="#00000040",Sl={backgroundStyle:!1,textStyle:{default:{fill:"#fff"}}},wl=(function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.childrenShape=[],i.nowFocus=!1,i.otherOnClick=!0,i.init(),i}F(e,t),e.prototype.init=function(){this.initChecked(),this.initShape(),this.update({}),this.bindEvents()},e.prototype.getChecked=function(){return this.checked},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.updateChecked(),this.updateShape(),this.animateFlag&&this.animateSiwtch()},e.prototype.blur=function(){this.nowFocus=!1,this.clearBackgroundLineWidth()},e.prototype.focus=function(){this.nowFocus=!0,this.addBackgroundLineWidth()},e.prototype.clear=function(){},e.prototype.destroy=function(){var e,n;this.handleShape.destroy(),this.backgroundShape.destroy(),this.rectStrokeShape.destroy(),this.pathLineShape.destroy(),null===(e=this.childrenShape[0])||void 0===e||e.destroy(),null===(n=this.childrenShape[1])||void 0===n||n.destroy(),this.removeChildren(!0),t.prototype.destroy.call(this)},e.prototype.initShape=function(){this.backgroundShape=this.createBackgroundShape(),this.rectStrokeShape=this.createRectStrokeShape(),this.handleShape=this.createHandleShape(),this.backgroundShape.appendChild(this.handleShape),this.appendChild(this.rectStrokeShape),this.appendChild(this.backgroundShape)},e.prototype.initChecked=function(){var t=this.attributes,e=t.defaultChecked,n=t.checked;this.defaultChecked=!(!n&&!e),this.checked=!!(gt(n)?e:n)},e.prototype.createBackgroundShape=function(){return new ps({name:"background",style:G(G(G({},e.defaultOptions.style),this.sizeStyle),{strokeOpacity:.2})})},e.prototype.createRectStrokeShape=function(){return new ps({name:"rectStroke",style:G(G(G({},e.defaultOptions.style),this.sizeStyle),{lineWidth:0,fill:"#efefef",strokeOpacity:.4})})},e.prototype.createHandleShape=function(){return this.pathLineShape=new us({name:"pathLine"}),new ps({name:"handle",style:{width:0,height:0,fill:"#fff",offsetPath:this.pathLineShape}})},e.prototype.updateSizeStyle=function(){var t=Number(this.attributes.size)||e.defaultOptions.style.size,n=Ct(this.attributes,["style",this.checked?"selected":"default"]),i=n.width,r=n.height;this.sizeStyle={width:i||2*t,height:r||t,radius:r?r/2:t/2}},e.prototype.updateShape=function(){this.updateSizeStyle(),this.updateCheckedChildrenShape(),this.updateBackgroundShape(),this.updateHandleShape()},e.prototype.updateCheckedChildrenShape=function(){var t=this;["checkedChildren","unCheckedChildren"].forEach((function(n,i){var r,o=Ct(t.attributes,n);t.childrenShape[i]||(t.childrenShape[i]=new fh({name:n,style:Sl}));var a=t.childrenShape[i],s=Number(t.attributes.textSpacing)||e.defaultOptions.style.textSpacing;it(o)?(a.update(G(G({},At(o,["backgroundStyle","x"])),{x:0})),(0===i?t.checked:!t.checked)?t.backgroundShape.appendChild(a):t.backgroundShape.removeChild(a,!1),a.update({x:i?t.getShapeWidth()-(null===(r=Zu(a))||void 0===r?void 0:r.width)-s:s})):(t.backgroundShape.removeChild(a),null==a||a.clear())}))},e.prototype.updateBackgroundShape=function(){var t,e,n,i,r=this.attributes,o=r.style,a=r.disabled,s=this.getShapeWidth(),u=(t={},e=this.sizeStyle,n={width:s},i=Ct(o,this.checked?"selected":"default"),e&&Pt(t,e),n&&Pt(t,n),i&&Pt(t,i),t);this.backgroundShape.attr(G(G({},u),{fillOpacity:a?.4:1,cursor:a?"no-drop":"pointer"})),this.rectStrokeShape.attr(At(u,["fill"]))},e.prototype.updateHandleShape=function(){var t=Number(this.attributes.spacing)||e.defaultOptions.style.spacing,n=this.sizeStyle,i=n.height,r=n.radius,o=this.getShapeWidth(),a=Number(r)-t,s={y:t,radius:a,width:2*a,height:2*a};this.animateFlag||(s=G(G({},s),{x:this.defaultChecked?o-i+t:t})),this.handleShape.attr(s),this.pathLineShape.attr({x1:o-i+t,y1:t,x2:t,y2:t})},e.prototype.getShapeWidth=function(){var t,n=Number(Ct(this.attributes.style,[this.checked?"selected":"default","width"]));if(n)return n;var i=Number(this.attributes.textSpacing)||e.defaultOptions.style.textSpacing,r=Ct(this.attributes,[this.checked?"checkedChildren":"unCheckedChildren"]),o=this.childrenShape[this.checked?0:1];return(r?(null===(t=Zu(o))||void 0===t?void 0:t.width)+i-this.sizeStyle.height:0)+this.sizeStyle.width},e.prototype.updateChecked=function(){var t=this.attributes.checked;this.animateFlag=!(gt(t)||this.checked===!!t),this.animateFlag&&(this.checked=!!t)},e.prototype.bindEvents=function(){this.addSwitchMouseenter(),this.addSwitchMouseleave(),this.addSwitchClick(),this.addWindowClick()},e.prototype.banEvent=function(t){var e=this.attributes,n=e.disabled,i=e.checked;!n&&gt(i)&&t()},e.prototype.addSwitchMouseenter=function(){var t=this;this.addEventListener("mouseenter",(function(){t.otherOnClick=!1,t.banEvent((function(){t.clearBackgroundLineWidth()}))}))},e.prototype.addSwitchMouseleave=function(){var t=this;this.addEventListener("mouseleave",(function(){t.otherOnClick=!0,t.banEvent((function(){t.nowFocus&&t.addBackgroundLineWidth()}))}))},e.prototype.addSwitchClick=function(){var t=this;this.addEventListener("click",(function(e){var n=t.attributes,i=n.onClick,r=n.onChange,o=n.checked;t.banEvent((function(){t.checked=o||!t.checked,t.animateFlag=gt(o),t.nowFocus=!0,J(r)&&r(t.checked),t.updateShape(),t.animateSiwtch()})),J(i)&&i(e,t.checked)}))},e.prototype.addWindowClick=function(){var t=this;window.addEventListener("click",(function(){t.otherOnClick&&(t.nowFocus=!1),t.banEvent((function(){t.clearBackgroundLineWidth()}))}))},e.prototype.clearBackgroundLineWidth=function(){this.backgroundShape.attr({lineWidth:0})},e.prototype.addBackgroundLineWidth=function(){this.backgroundShape.attr({lineWidth:5})},e.prototype.animateSiwtch=function(){this.rectStrokeShape.animate([{lineWidth:0,strokeOpacity:.5},{lineWidth:14,strokeOpacity:0}],{duration:400,easing:"ease-on"}),this.handleShape.animate([{offsetDistance:this.checked?1:0},{offsetDistance:this.checked?0:1}],{duration:100,fill:"forwards"})},e.tag="switch",e.defaultOptions={type:e.tag,style:{x:0,y:0,size:22,spacing:2,textSpacing:8,defaultChecked:!0,style:{default:{stroke:xl,fill:xl},selected:{stroke:bl,fill:bl}}}}}(Bu),{text:{text:""},lineStyle:{stroke:"gray",lineWidth:1,lineDash:[5,5]}}),El=ah({},wl,{type:"line",text:{position:"start"}}),Tl=ah({},wl,{type:"circle",defaultRadius:0}),Pl=ah({},wl,{type:"polygon",defaultRadius:0,startAngle:0}),Cl=function(t){function e(n){var i=t.call(this,St({},e.defaultOptions,n))||this;return i.init(),i}return F(e,t),Object.defineProperty(e.prototype,"localPointer",{get:function(){var t=X(this.getPosition(),2),e=t[0],n=t[1],i=X(this.pointer,2);return[i[0]-e,i[1]-n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagCfg",{get:function(){var t=this.attributes.text;return t.position,V(t,["position"])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"crosshairCfg",{get:function(){var t=this.attributes.lineStyle;return G(G({},t),{path:this.crosshairPath})},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initShape(),this.adjustLayout()},e.prototype.update=function(t){this.attr(St({},this.attributes,t)),this.tagShape.update(this.tagCfg),this.crosshairShape.attr(this.crosshairCfg),this.adjustLayout()},e.prototype.clear=function(){},e.prototype.destroy=function(){},e.prototype.setPointer=function(t){this.pointer=t},e.prototype.initShape=function(){this.shapesGroup=new ns({name:"crosshairGroup"}),this.appendChild(this.shapesGroup),this.tagShape=new fh({name:"tag",style:this.tagCfg}),this.shapesGroup.appendChild(this.tagShape),this.crosshairShape=new hs({name:"crosshair",style:this.crosshairCfg}),this.shapesGroup.appendChild(this.crosshairShape)},e.tag="crosshair-base",e.defaultOptions={type:e.tag,style:wl},e}(Bu),Ml=(function(t){function e(n){return t.call(this,ah({},e.defaultOptions,n))||this}F(e,t),Object.defineProperty(e.prototype,"crosshairPath",{get:function(){var t=this.attributes,e=X(t.startPos,2),n=e[0],i=e[1],r=X(t.endPos,2);return[["M",0,0],["L",r[0]-n,r[1]-i],["Z"]]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localPointer",{get:function(){if(!this.pointer)return this.attributes.startPos;var t=X(this.getPosition(),2),e=t[0],n=t[1],i=X(this.pointer,2);return[i[0]-e,i[1]-n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){var t=this.attributes,e=X(t.startPos,2),n=e[0],i=e[1],r=X(t.endPos,2),o=r[0],a=r[1];return n===o&&i!==a},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagShapeSpace",{get:function(){var t=Zu(this.tagShape);return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),e.prototype.update=function(e){t.prototype.update.call(this,e)},e.prototype.setPointer=function(e){t.prototype.setPointer.call(this,e),this.adjustPosition()},e.prototype.setText=function(t){this.tagShape.update({text:t}),this.adjustTag()},e.prototype.adjustLayout=function(){this.adjustPosition(),this.adjustTag()},e.prototype.adjustPosition=function(){var t=X(this.localPointer,2),e=t[0],n=t[1],i=X(this.attributes.startPos,2),r=i[0],o=i[1],a=this.getOrientVal([r,n],[e,o]);this.shapesGroup.setLocalPosition(a)},e.prototype.adjustTag=function(){var t=this.attributes,e=t.text,n=X(t.startPos,2),i=n[0],r=n[1],o=X(t.endPos,2),a=o[0],s=o[1];if(e&&""!==e){this.tagShape.show();var u=e.position,h=this.tagShapeSpace,c=h.width,l=h.height,p=X(this.getOrientVal({start:[-c,-l/2],end:[a-i,-l/2]},{start:[-c/2,-l],end:[-c/2,s-r]})[u],2),d=p[0],f=p[1];this.tagShape.setLocalPosition(d,f)}else this.tagShape.hide()},e.prototype.getOrientVal=function(t,e){return this.isVertical?e:t},e.tag="line-crosshair",e.defaultOptions={type:e.tag,style:El},W([lh(20)],e.prototype,"setPointer",null)}(Cl),function(t){function e(n){return t.call(this,ah({},e.defaultOptions,n))||this}F(e,t),Object.defineProperty(e.prototype,"crosshairPath",{get:function(){return this.createCirclePath()},enumerable:!1,configurable:!0}),e.prototype.update=function(e){t.prototype.update.call(this,e)},e.prototype.setPointer=function(e){var n=X(e,2),i=n[0],r=n[1];t.prototype.setPointer.call(this,[i,r]);var o=X(this.localPointer,2),a=o[0],s=o[1],u=X(this.attributes.center,2),h=u[0],c=u[1],l=this.createCirclePath(Math.pow(Math.pow(a-h,2)+Math.pow(s-c,2),.5));this.crosshairShape.attr({path:l})},e.prototype.adjustLayout=function(){this.tagShape.hide()},e.prototype.createCirclePath=function(t){var e=this.attributes,n=X(e.center,2),i=n[0],r=n[1],o=e.defaultRadius;return ph(i,r,t||o)},e.tag="circle-crosshair",e.defaultOptions={type:e.tag,style:Tl},W([lh(20)],e.prototype,"setPointer",null)}(Cl),function(t){function e(n){return t.call(this,ah({},e.defaultOptions,n))||this}F(e,t),Object.defineProperty(e.prototype,"crosshairPath",{get:function(){return this.createPolygonPath()},enumerable:!1,configurable:!0}),e.prototype.update=function(e){t.prototype.update.call(this,e)},Object.defineProperty(e.prototype,"points",{get:function(){for(var t=this.attributes,e=t.startAngle,n=t.sides,i=2*Math.PI/n,r=[1,0],o=[],a=0;a<n;a+=1)o.push(cr([0,0],r,[0,0],e/180*Math.PI+i*a));return o},enumerable:!1,configurable:!0}),e.prototype.setPointer=function(e){var n=X(e,2),i=n[0],r=n[1];t.prototype.setPointer.call(this,[i,r]);var o=X(this.localPointer,2),a=o[0],s=o[1],u=this.attributes.center,h=X(this.intersection([a,s]),2),c=h[0],l=h[1];if(c&&l){var p=ch(u,[a,s])/ch(u,[c,l]),d=this.createPolygonPath(p);this.crosshairShape.attr({path:d})}},e.prototype.adjustLayout=function(){this.tagShape.hide()},e.prototype.createPolygonPath=function(t){var e=this.attributes,n=e.defaultRadius,i=X(e.center,2),r=i[0],o=i[1],a=this.points.map((function(e,i){var a=X(e,2),s=X(ar([0,0],[a[0],a[1]],t||n),2),u=s[0],h=s[1];return[0===i?"M":"L",r+u,o+h]}));return a.push(["Z"]),a},e.prototype.intersection=function(t){for(var e,n,i,r=X(t,2),o=r[0],a=r[1],s=this.points,u=X(this.attributes.center,2),h=u[0],c=u[1],l=1;l<=s.length;l+=1){var p=X(s[l-1],2),d=p[0],f=p[1],g=X(s[l%s.length],2),y=hh([o,a],[h,c],[d+h,f+c],[g[0]+h,g[1]+c]);0!==y.length&&(n=(e=X(y,2))[0],i=e[1])}return[n,i]},e.tag="polygon-crosshair",e.defaultOptions={type:e.tag,style:Pl},W([lh(20)],e.prototype,"setPointer",null)}(Cl),function(t){function e(n){var i=t.call(this,ah({},e.defaultOptions,n))||this;return i.update({}),i}return F(e,t),Object.defineProperty(e.prototype,"decorationType",{get:function(){var t=this.attributes.type;return t&&"none"!==t&&Q(t)?t.map((function(t){return Q(t)?t:[t,"solid"]})):"none"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doubleSpacing",{get:function(){return 2*this.attributes.style.lineWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hangingRate",{get:function(){return this.attributes.hangingRate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dashedCfg",{get:function(){var t=this.attributes.style.lineWidth;return{lineDash:[2*t,t]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dottedCfg",{get:function(){var t=this.attributes.style.lineWidth;return{lineDash:[t,t]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"solidCfg",{get:function(){return{lineDash:[0,0]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decorationCfg",{get:function(){var t=this,e=this.attributes.style,n=this.decorationType;return"none"===n?[]:n.map((function(n){var i=X(n,2),r=i[0],o=i[1];if("wavy"===o)return G({path:t.getWavyPath(r)},e);if("double"===o)return G({path:t.getDoubleLinePath(r)},e);var a={solid:t.solidCfg,dashed:t.dashedCfg,dotted:t.dottedCfg};return G(G({path:t.getLinePath(r)},e),a[o])}))},enumerable:!1,configurable:!0}),e.prototype.update=function(t){var e=this;this.attr(ah({},this.attributes,t)),this.clear(),this.decorationCfg.forEach((function(t){e.appendChild(new hs({style:t}))}))},e.prototype.clear=function(){this.removeChildren(!0)},e.prototype.getLinePos=function(t){var e,n,i,r=X(this.hangingRate,3),o=r[0],a=r[1],s=r[2],u=this.attributes,h=u.height,c=u.fontSize,l=X([0,0],2),p=l[0],d=l[1];return"overline"===t?(p=(e=X([0,h*o-c/2],2))[0],d=e[1]):"line-through"===t?(p=(n=X([0,h*a],2))[0],d=n[1]):(p=(i=X([0,h*s+c/2],2))[0],d=i[1]),[p,d]},e.prototype.getLinePath=function(t){var e=this.attributes.width,n=X(this.getLinePos(t),2),i=n[0],r=n[1];return[["M",i,r],["L",i+e,r]]},e.prototype.getDoubleLinePath=function(t){var e,n,i,r=this.doubleSpacing,o=this.attributes.width,a=X(this.getLinePos(t),2),s=a[0],u=a[1],h=X([0,0],2),c=h[0],l=h[1];return"line-through"===t&&(c=(e=X([-.5,.5],2))[0],l=e[1]),"underline"===t?(c=(n=X([0,1],2))[0],l=n[1]):"overline"===t&&(c=(i=X([1,0],2))[0],l=i[1]),[["M",s,u+r*c],["L",s+o,u+r*c],["M",s,u+r*l],["L",s+o,u+r*l]]},e.prototype.getWavyPath=function(t){return[]},e.tag="decoration",e.defaultOptions={style:{width:0,height:0,type:"none",hangingRate:[.5,.55,.5],style:{lineWidth:1,stroke:"#000"}}},e}(es));!function(t){function e(n){var i=t.call(this,ah({},e.defaultOptions,n))||this;return i.init(),i}F(e,t),Object.defineProperty(e.prototype,"textWidth",{get:function(){var t=this;return rt(this.renderText.split("\n").map((function(e){return ju(e,t.font)})))||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return Zu(this.textShape).height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=this.attributes.width;return"auto"===t||void 0===t||0===t?this.textWidth:t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this.attributes.height;return ht(t)&&0!==t?t:Zu(this.textShape).height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){var t=this.attributes,e=t.lineHeight,n=t.fontSize;return e&&0!==e?e:n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"capitalizeWord",{get:function(){return this.attributes.text.split("\n").map((function(t){return t.split(" ").map((function(t){return Vu(t,"capitalize")})).join(" ")})).join("\n")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var t=this.attributes,e=t.transform,n=t.text;return"capitalize"===e?this.capitalizeWord:Vu(n,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ellipsisText",{get:function(){var t=this,e=this.text,n=this.attributes,i=n.width,r=n.overflow,o="ellipsis"===r?"...":r;return e.split("\n").map((function(e){return Fu(e,ht(i)?i:1/0,t.font,o)})).join("\n")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderText",{get:function(){var t=this.attributes.width,e=this.attributes.overflow;return e&&!["none","clip","wrap"].includes(e)&&ht(t)?this.ellipsisText:this.text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.attributes.verticalAlign},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return kt(this.attributes,["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","letterSpacing","leading"])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontColor",{get:function(){return this.attributes.fontColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return"wrap"===this.attributes.overflow},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){var t=this.width;return this.wordWrap?t:1/0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textCfg",{get:function(){var t=this,e=t.renderText,n=t.lineHeight,i=t.wordWrap,r=t.wordWrapWidth,o=t.fontColor;return G(G({},this.font),{fill:o,wordWrap:i,lineHeight:n,wordWrapWidth:r,text:e,textAlign:"start",textBaseline:"middle"})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundCfg",{get:function(){var t=this.width,e=this.height,n=this.attributes.backgroundStyle;return G({x:0,y:0,width:t,height:e},n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decorationLineWidth",{get:function(){var t=this.attributes.fontSize;return Math.floor(2*Math.log10(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decorationCfg",{get:function(){var t=this.attributes,e=t.decoration,n=t.fontSize,i=this.decorationLineWidth,r=this.fontColor;return this.textShape.getLineBoundingRects().map((function(t){return ah({},{fontSize:n,style:{stroke:r,lineWidth:i}},e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clipRectCfg",{get:function(){var t=this.height;return{width:this.attributes.width,height:t}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.initShape(),this.update({})},e.prototype.update=function(t){var e=this;this.attr(ah({},this.attributes,t)),this.clear(),this.backgroundShape.attr(this.backgroundCfg),this.textShape.attr(this.textCfg),this.layout(),this.decorationGroup.removeChildren(!0),this.decorationCfg.forEach((function(t){e.decorationGroup.appendChild(new Ml({style:t}))}))},e.prototype.clear=function(){var t;this.backgroundShape.style.clipPath=null,null===(t=this.clipRect)||void 0===t||t.destroy()},e.prototype.initShape=function(){this.backgroundShape=new ps({name:"background",style:{width:0,height:0}}),this.decorationGroup=new ns({name:"decoration-group"}),this.textShape=new ds({name:"text",style:this.textCfg}),this.textShape.appendChild(this.decorationGroup),this.backgroundShape.appendChild(this.textShape),this.appendChild(this.backgroundShape)},e.prototype.overflow=function(){var t=this.wordWrap,e=this.attributes,n=e.width,i=e.overflow;i&&"none"!==i&&!t&&ht(n)&&"clip"===i&&(this.clipRect=new ps({name:"clip-rect",style:this.clipRectCfg}),this.backgroundShape.style.clipPath=this.clipRect)},e.prototype.adjustTextAlign=function(){var t=this.textWidth,e=this.attributes,n=e.width,i=e.textAlign;if(ht(n)){var r;r="start"===i?0:"center"===i?(this.width-t)/2:this.width-t,this.textShape.attr({x:r})}},e.prototype.adjustVerticalAlign=function(){var t,e=this.verticalAlign,n=this.textHeight;t="top"===e?n/2:"middle"===e?this.height/2:this.height-n/2,this.textShape.attr({y:t})},e.prototype.layout=function(){this.adjustTextAlign(),this.adjustVerticalAlign(),this.overflow()},e.tag="paragraph",e.defaultOptions={type:e.tag,style:{text:"",fontColor:"#000",fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fontVariant:"normal",letterSpacing:0,leading:0,fontStyle:"normal",decoration:{type:"none",style:{}},overflow:"none",backgroundStyle:{},transform:"none",tooltip:!1,tooltipWait:300}}}(Bu);const kl="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function Al(t){let e=0,n=t.length;for(let i=0;i<n;i++)e+=(kl.indexOf(t[i])+1)*Math.pow(kl.length,n-i-1);return e}function Ol(t){let e=[],n=t;do{n--;const t=n%kl.length;e.unshift(kl[t]),n=(n-t)/kl.length}while(n>0);return e.join("")}function _l(t){const e=t.replace(/[a-zA-Z]+/,"");return[Al(t.replace(/\d+/,""))-1,Number(e)-1]}function Nl(t,e){return`${e+1}${Ol(t+1)}`}function Ll(t){const e=new Map,[n,i]=t;if(gt(n)||gt(i))return e;for(let t=n;t<=i;t++)e.set(t,!0);return e}function Il(t,e){const n=Ll(t),i=Ll(e),r=[],o=[],a=[],[s,u]=t,[h,c]=e;for(let t=s;t<=u;t++)i.has(t)?o.push(t):a.push(t);for(let t=h;t<=c;t++)n.has(t)||r.push(t);return{add:r,update:o,remove:a}}function Rl(t,e,n){const[i,r,o,a]=n;return t>=i&&t<=r&&e>=o&&e<=a}function Dl(t){return t.reduce(((t,e)=>t+e),0)}const Bl="#1890ff";class jl extends rs{static tag="selector";backgroundShape;iconShape;constructor(t){super(t),this.init()}init(){this.update()}update(t){this.attr(t),this.backgroundShape?this.backgroundShape.attr(this.getBackgroundAttr()):(this.backgroundShape=new ps({name:"selector-background",style:this.getBackgroundAttr()}),this.appendChild(this.backgroundShape)),this.iconShape?this.iconShape.attr(this.getIconAttr()):(this.iconShape=new ps({name:"selector-icon",style:this.getIconAttr()}),this.appendChild(this.iconShape)),this.backgroundShape.attr({})}getBackgroundAttr(){const{width:t,height:e}=this.attributes;return{x:0,y:0,width:t,height:e,fill:Bl,stroke:Bl,lineWidth:2,fillOpacity:.1}}getIconAttr(){const{width:t,height:e}=this.attributes;return{x:t-3,y:e-3,width:6,height:6,lineWidth:2,stroke:"#fff",fill:Bl}}clear(){}destroy(){this.removeChildren(!0),super.destroy()}}class Fl{options;data=new Map;constructor(t){this.options=t}training(){this.data=new Map;const{data:t}=this.options,e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n],[r,o]=_l(i);this.data.has(r)||this.data.set(r,new Map),this.data.get(r).set(o,t[i])}}update(t){this.options={...this.options,...t}}getValue(t,e){return this.data.get(t)?.get(e)?.text}}const Gl=100,Vl=24,Wl=100,Hl=999;class zl{options;widths=[];heights=[];constructor(t){this.options=t}update(t){this.options={...this.options,...t}}run(){const{cols:t,cellWidth:e=Gl,maxCol:n=Wl,rows:i,cellHeight:r=Vl,maxRow:o=Hl}=this.options;this.widths=new Array(n).fill(e),this.heights=new Array(o).fill(r),Object.values(t).forEach((t=>{this.widths[t.index]=t.width})),Object.values(i).forEach((t=>{this.heights[t.index]=t.height}))}getWidths(){return this.widths}getHeights(){return this.heights}getBBox(t,e){return[Dl(this.widths.slice(0,t)),Dl(this.heights.slice(0,e)),this.widths[t],this.heights[e]]}getSelectionBBox(t){if(!t)return null;let{sci:e,sri:n,eci:i,eri:r}=t;const[o,a]=this.getBBox(Math.min(e,i),Math.min(n,r)),[s,u,h,c]=this.getBBox(Math.max(i,e),Math.max(r,n));return[o,a,s-o+h,u-a+c]}}function Ul(t,e,n){const i=[];let r=0,o=r;for(let a=0;a<n.length&&(o=r+n[0],(r>=t&&r<=t+e||o>=t&&o<=t+e)&&i.push(a),!(o>t+e));a++)r=o;return[i[0],i[i.length-1]]}class Yl extends rs{static tag="col";backgroundShape;textShape;constructor(t){super(t),this.init()}getId(){return`${this.attributes.index}`}init(){this.update()}update(t={}){this.attr(t),this.backgroundShape||(this.backgroundShape=new ps({name:"background"}),this.appendChild(this.backgroundShape)),this.textShape||(this.textShape=new ds({name:"text",style:{text:"",textAlign:"center",textBaseline:"middle",fontSize:12}}),this.appendChild(this.textShape));const{x:e,y:n,width:i,height:r,textStyle:o}=this.attributes;this.backgroundShape.attr({x:e,y:n,width:i,height:r}),this.textShape.attr({x:i/2,y:r/2,text:this.getText(),...o}),this.getText()}getText(){const{index:t}=this.attributes;return Ol(t+1)}destroy(){this.removeChildren(!0),super.destroy()}}class Xl extends rs{static tag="clos";cols=new Map;grids=[];viewportIndexes=[];constructor(t){super(t),this.init()}setOffset(t){this.update({offset:t})}init(){this.update()}update(t){this.attr(t);const{offset:e,width:n,widths:i}=this.attributes,r=Ul(e,n,i),{add:o,update:a,remove:s}=Il(this.viewportIndexes,r);s.forEach((t=>{const e=this.cols.get(t);this.removeChild(e,!0),this.cols.delete(t)})),a.forEach((t=>{this.cols.get(t).update(this.getColAttr(t))})),o.forEach((t=>{const e={name:"col",style:this.getColAttr(t)},n=new Yl(e);this.cols.set(t,n),this.appendChild(n)})),this.viewportIndexes=r}getColAttr(t){const{offset:e,x:n,y:i,height:r,widths:o}=this.attributes;return{index:t,x:Dl(o.slice(0,t))-e,y:i,width:o[t],height:r}}clear(){}destroy(){this.removeChildren(!0),super.destroy()}}class ql extends rs{static tag="row";backgroundShape;textShape;constructor(t){super(t),this.init()}getId(){return`${this.attributes.index}`}init(){this.update()}update(t={}){this.attr(t),this.backgroundShape||(this.backgroundShape=new ps({name:"background"}),this.appendChild(this.backgroundShape)),this.textShape||(this.textShape=new ds({name:"text",style:{text:"",textAlign:"center",textBaseline:"middle",fontSize:12}}),this.appendChild(this.textShape));const{x:e,y:n,width:i,height:r,textStyle:o}=this.attributes;this.backgroundShape.attr({x:e,y:n,width:i,height:r}),this.textShape.attr({x:i/2,y:r/2,text:this.getText(),...o}),this.getText()}getText(){const{index:t}=this.attributes;return`${t+1}`}destroy(){this.removeChildren(!0),super.destroy()}}class $l extends rs{static tag="rows";rows=new Map;grids=[];viewportIndexes=[];constructor(t){super(t),this.init()}setOffset(t){this.update({offset:t})}init(){this.update()}update(t){this.attr(t);const{offset:e,height:n,heights:i}=this.attributes,r=Ul(e,n,i),{add:o,update:a,remove:s}=Il(this.viewportIndexes,r);s.forEach((t=>{const e=this.rows.get(t);this.removeChild(e,!0),this.rows.delete(t)})),a.forEach((t=>{this.rows.get(t).update(this.getRowAttr(t))})),o.forEach((t=>{const e={name:"row",style:this.getRowAttr(t)},n=new ql(e);this.rows.set(t,n),this.appendChild(n)})),this.viewportIndexes=r}getRowAttr(t){const{offset:e,x:n,y:i,width:r,heights:o}=this.attributes;return{index:t,x:n,y:Dl(o.slice(0,t))-e,width:r,height:o[t]}}clear(){}destroy(){this.removeChildren(!0),super.destroy()}}class Kl extends rs{static tag="cell";backgroundShape;textShape;constructor(t){super(t),this.init()}getRow(){return this.attributes.row}getCol(){return this.attributes.col}init(){this.update()}update(t={}){this.attr(t),this.backgroundShape||(this.backgroundShape=new ps({name:"cell-background"}),this.appendChild(this.backgroundShape)),this.textShape||(this.textShape=new ds({name:"text",style:{text:"",textAlign:"center",textBaseline:"middle",fontSize:12}}),this.appendChild(this.textShape));const{width:e,height:n}=this.attributes;this.backgroundShape.attr({x:0,y:0,width:e,height:n,fill:"#fff",cursor:"cell",stroke:"#000",lineWidth:.1}),this.textShape.attr({x:e/2,y:n/2,text:this.getText()}),this.getText()}getText(){const{text:t,formula:e}=this.attributes;return t}destroy(){this.removeChildren(!0),super.destroy()}}class Zl extends rs{static tag="table";cells=new Map;clipShape;viewportIndexes=[];constructor(t){super(t),this.init()}setOffsetX(t){this.update({offsetX:t})}setOffsetY(t){this.update({offsetY:t})}setOffset(t,e){this.update({offsetX:t,offsetY:e})}init(){this.update()}update(t){this.attr(t);const{x:e,y:n,width:i,height:r,layout:o,offsetX:a,offsetY:s}=this.attributes;this.clipShape||(this.clipShape=new ps({style:{x:0,y:0,width:i,height:r}}),this.attr({clipPath:this.clipShape}));const u=o.getWidths(),h=Ul(s,r,o.getHeights()),c=[...Ul(a,i,u),...h],{add:l,remove:p,update:d}=function(t,e){const[n,i,r,o]=t,[a,s,u,h]=e,c=[];for(let t=n;t<=i;t++)for(let n=r;n<=o;n++)Rl(t,n,e)||c.push({col:t,row:n});const l=[];for(let e=a;e<=s;e++)for(let n=u;n<=h;n++)Rl(e,n,t)||l.push({col:e,row:n});return{add:l,remove:c,update:function(t){const[e,n,i,r]=t,o=[];for(let t=e;t<=n;t++)for(let e=i;e<=r;e++)o.push({row:e,col:t});return o}([a,i,u,o])}}(this.viewportIndexes,c);p.forEach((({col:t,row:e})=>{const n=Nl(t,e),i=this.cells.get(n);this.cells.delete(n),i&&this.removeChild(i)})),d.forEach((({col:t,row:e})=>{const n=Nl(t,e),i=this.cells.get(n);i&&i.update(this.getCellAttr(t,e))})),l.forEach((({col:t,row:e})=>{const n=Nl(t,e),i={name:"cell",style:this.getCellAttr(t,e)},r=new Kl(i);this.cells.set(n,r),this.appendChild(r)})),this.viewportIndexes=c}getCellAttr(t,e){const{layout:n,offsetX:i,offsetY:r,dataSet:o}=this.attributes,[a,s,u,h]=n.getBBox(t,e);return{col:t,row:e,x:a-i,y:s-r,width:u,height:h,text:o.getValue(t,e)}}clear(){}destroy(){this.removeChildren(!0),super.destroy()}}class Jl extends rs{static tag="sheet";cols;rows;table;scrollbarX;scrollbarY;selector;layout;dataSet;offsetX=0;offsetY=0;virtualWidth=0;virtualHeight=0;constructor(t){super(t),this.init()}setOffset(t,e){const{width:n,height:i}=this.table.attributes;this.offsetX=ut(t,0,this.virtualWidth-n),this.offsetY=ut(e,0,this.virtualHeight-i),this.cols.setOffset(this.offsetX),this.rows.setOffset(this.offsetY),this.table.setOffset(this.offsetX,this.offsetY),this.scrollbarX.setValue(this.offsetX/(this.virtualWidth-n)),this.scrollbarY.setValue(this.offsetY/(this.virtualHeight-i)),this.selector&&this.selector.update(this.getSelectorAttr())}init(){this.update()}update(t={}){this.attr(t),this.updateDataSet(),this.updateLayout(),this.updateUI()}updateDataSet(){const{data:t}=this.attributes;this.dataSet||(this.dataSet=new Fl({data:t})),this.dataSet.update({data:t}),this.dataSet.training()}updateLayout(){const{width:t,height:e,cols:n,rows:i,maxCol:r,maxRow:o,defaultCellHeight:a,defaultCellWidth:s}=this.attributes;this.layout||(this.layout=new zl({x:0,y:0,width:0,height:0,cols:n,rows:i,maxCol:r,maxRow:o,cellHeight:a,cellWidth:s}));const[u,h,c,l]=this.getPadding();this.layout.update({x:0,y:0,width:t-l-h,height:e-u-c,cols:n,rows:i}),this.layout.run(),this.virtualWidth=Dl(this.layout.getWidths()),this.virtualHeight=Dl(this.layout.getHeights())}updateUI(){this.cols?this.cols.update(this.getColsAttr()):(this.cols=new Xl({name:"cols",style:this.getColsAttr()}),this.appendChild(this.cols)),this.rows?this.rows.update(this.getRowsAttr()):(this.rows=new $l({name:"rows",style:this.getRowsAttr()}),this.appendChild(this.rows)),this.table?this.table.update(this.getTableAttr()):(this.table=new Zl({name:"table",style:this.getTableAttr()}),this.appendChild(this.table)),this.scrollbarX?this.scrollbarX.update(this.getScrollbarXAttr()):(this.scrollbarX=new yc({style:this.getScrollbarXAttr()}),this.scrollbarX.addEventListener("valueChanged",this.onScrollX),this.appendChild(this.scrollbarX)),this.scrollbarY?this.scrollbarY.update(this.getScrollbarYAttr()):(this.scrollbarY=new yc({style:this.getScrollbarYAttr()}),this.scrollbarY.addEventListener("valueChanged",this.onScrollY),this.appendChild(this.scrollbarY)),this.selector?this.selector.update(this.getSelectorAttr()):(this.selector=new jl({name:"selector",style:this.getSelectorAttr()}),this.appendChild(this.selector),this.selector.backgroundShape.interactive=!1)}onScrollX=t=>{const e=t.detail.value,n=this.scrollbarX.attr("width");this.setOffset(e*(this.virtualWidth-n),this.offsetY)};onScrollY=t=>{const e=t.detail.value,n=this.scrollbarY.attr("height");this.setOffset(this.offsetX,e*(this.virtualHeight-n))};onWheel=t=>{const{deltaX:e,deltaY:n}=t;this.setOffset(this.offsetX+e,this.offsetY+n)};getPadding(){const{colHeight:t,rowWidth:e}=this.attributes;return[t,5,5,e]}getColsAttr(){const{x:t,y:e,width:n,height:i}=this.attributes,[r,o,a,s]=this.getPadding();return{x:s,y:0,width:n-s-o,height:r,offset:this.offsetX,widths:this.layout.getWidths()}}getRowsAttr(){const{x:t,y:e,width:n,height:i}=this.attributes,[r,o,a,s]=this.getPadding();return{x:0,y:r,width:s,height:i-r-a,offset:this.offsetY,heights:this.layout.getHeights()}}getTableAttr(){const{x:t,y:e,width:n,height:i}=this.attributes,[r,o,a,s]=this.getPadding();return{x:s,y:r,width:n-s-o,height:i-r-a,offsetX:this.offsetX,offsetY:this.offsetY,layout:this.layout,dataSet:this.dataSet}}getScrollbarXAttr(){const{x:t,y:e,width:n,height:i}=this.attributes,[r,o,a,s]=this.getPadding();return{x:s,y:i-a,orient:"horizontal",value:0,width:n-s-o,height:5,thumbLen:100,padding:0,trackStyle:{default:{lineWidth:1,stroke:"#cecece",shadowColor:"#c0c0c0",shadowBlur:10}},thumbStyle:{default:{fill:"#000"}},isRound:!0}}getScrollbarYAttr(){const{x:t,y:e,width:n,height:i}=this.attributes,[r,o,a,s]=this.getPadding();return{x:n-o,y:r,orient:"vertical",value:0,width:5,height:i-r-a,thumbLen:100,padding:0,trackStyle:{default:{lineWidth:1,stroke:"#cecece",shadowColor:"#c0c0c0",shadowBlur:10}},thumbStyle:{default:{fill:"#000"}},isRound:!0}}getSelectorAttr(){const{x:t,y:e,width:n,height:i,selection:r}=this.attributes,[o,a,s,u]=this.getPadding(),h=this.layout.getSelectionBBox(r);return h?{x:u+h[0]-this.offsetX,y:o+h[1]-this.offsetY,width:h[2],height:h[3],visibility:"visible"}:{x:0,y:0,width:0,height:0,visibility:"hidden"}}clear(){}destroy(){this.cols.destroy(),this.cols=null,this.rows.destroy(),this.rows=null,this.table.destroy(),this.table=null,this.removeChildren(!0),super.destroy()}}class Ql{spreadsheet;constructor(t){this.spreadsheet=t}destroy(){}}class tp extends Ql{prevFillColor;init(){this.spreadsheet.sheet.addEventListener("mouseover",this.onCellMouseover),this.spreadsheet.sheet.addEventListener("mouseout",this.onCellMouseout)}onCellMouseover=t=>{const e=t.composedPath().find((t=>"cell"===t.name));this.prevFillColor=e?.backgroundShape.attr("fill"),e?.backgroundShape.attr("fill","#EEF3FE")};onCellMouseout=t=>{t.composedPath().find((t=>"cell"===t.name))?.backgroundShape.attr("fill",this.prevFillColor)};destroy(){this.spreadsheet.sheet.removeEventListener("mouseover",this.onCellMouseover),this.spreadsheet.sheet.removeEventListener("mouseout",this.onCellMouseout)}}class ep extends Ql{selection;init(){this.spreadsheet.sheet.addEventListener("mousedown",this.onMousedown)}onMousedown=t=>{const e=t.composedPath().find((t=>"cell"===t.name));if(e){this.spreadsheet.sheet.addEventListener("mousemove",this.onMousemove),this.spreadsheet.sheet.addEventListener("mouseup",this.onMouseup);const t=e.getCol(),n=e.getRow();this.selection={sci:t,sri:n,eci:t,eri:n},this.spreadsheet.sheet.update({selection:this.selection})}};onMousemove=t=>{const e=t.composedPath().find((t=>"cell"===t.name));if(e){const t=e.getCol(),n=e.getRow();this.selection={sci:this.selection.sci,sri:this.selection.sri,eci:t,eri:n},this.spreadsheet.sheet.update({selection:this.selection})}};onMouseup=t=>{this.spreadsheet.sheet.removeEventListener("mousemove",this.onMousemove),this.spreadsheet.sheet.removeEventListener("mouseup",this.onMouseup)};destroy(){this.spreadsheet.sheet.removeEventListener("mousedown",this.onMousedown),this.spreadsheet.sheet.removeEventListener("mousemove",this.onMousemove),this.spreadsheet.sheet.removeEventListener("mouseup",this.onMouseup)}}const np=class{container;options;g;padding=[0,0,0,0];interactions=new Map;sheet;constructor(t,e){this.container="string"==typeof t?document.getElementById(t):t,this.options={...this.getInitialOptions(),...e},this.init()}init(){const{width:t,height:e,renderer:n}=this.options;this.g=new Bs({container:this.container,width:t,height:e,renderer:new Du})}getInitialOptions(){return{width:document.body.offsetWidth,height:screen.availHeight,data:{},cols:{},rows:{},colHeight:28,rowWidth:64,maxCol:100,maxRow:999,defaultCellWidth:100,defaultCellHeight:24}}renderToolbar(){}renderSheet(){this.sheet?this.sheet.update(this.getSheetAttr()):(this.sheet=new Jl({style:this.getSheetAttr()}),this.container.addEventListener("wheel",(t=>{t.preventDefault(),this.sheet.onWheel(t)}),{passive:!1})),this.g.appendChild(this.sheet)}getSheetAttr(){const{width:t,height:e,renderer:n,...i}=this.options;return{x:0,y:0,width:t,height:e,...i}}renderSheetbar(){}render(){this.renderToolbar(),this.renderSheet(),this.renderSheetbar(),this.interactions.forEach((t=>{t.init()}))}resize(t,e){this.options={...this.options,width:t,height:e},this.g.resize(t,e),this.render()}changeData(t){this.options={...this.options,...t}}installInteraction(t){this.interactions.has(t)?(this.interactions.get(t).destroy(),this.interactions.delete(t)):this.interactions.set(t,new t(this))}uninstallInteraction(t){this.interactions.has(t)&&(this.interactions.get(t).destroy(),this.interactions.delete(t))}getOptions(){return this.options}destroy(){this.g.destroy(),this.g=null,this.sheet=null}}})(),i})()}));
